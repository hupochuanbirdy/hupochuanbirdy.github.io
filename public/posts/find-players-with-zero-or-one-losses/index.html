<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="description" content="Design by bird - A blog about life, code, design, and woman in STEM by tothemoon"/>
    <meta name="author" content="yejia yang">
    <meta name="author" content="tothemoon">
    <meta name="keywords" content="blog,life,code,desgin,woman in stem, yejia yang">
    <meta name="google-site-verification" content="SbNkXuCNABXOwhO2qCmtv02sV94EUSOO1c" />
    <title>Find Players With Zero or One Losses | tothemoon&#39;s blog</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <link href='https://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet'>
    <link rel="icon" type="image/png" href="/images/favicon.png"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="icon" type="image/x-icon" href="/images/favicon.ico"/>
    <link rel="stylesheet" href="/css/tailwind.css?v=3.1"/>
    <link rel="stylesheet" href="/css/main.css?v=11"/>
    <link rel="stylesheet" href="/css/404.css"/>
    <link rel="stylesheet" href="https://cdn.plyr.io/3.7.8/plyr.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.css"/>
    <script src="https://kit.fontawesome.com/237a634d14.js" crossorigin="anonymous"></script>
    <script src="https://cdn.plyr.io/3.7.8/plyr.polyfilled.js"></script>


</head><body  >

        <div id="popup"></div>
        <div id="normal" >
            <header  >
    <nav  id="top-nav"   class="trans-parent fixed z-10 w-full py-4 sm:py-6 ">
      <div   id="menu" class="container flex flex-wrap items-center h-full">
        
        <div class="flex gap-4">
  
    <a href="https://www.instagram.com/tothemoonbird/"  target="_blank">
      <i class="fa-brands fa-instagram fa-lg"></i>
    </a>
  
    <a href="https://leetcode.com/BirdyYang/"  target="_blank">
      <i class="fa-solid fa-bug  fa-lg"></i>
    </a>
  
    <a href="https://www.linkedin.com/in/yejia-yang-11105722a/"  target="_blank">
      <i class="fa-brands fa-linkedin fa-lg"></i>
    </a>
  
    <a href="https://github.com/Amber916Young/"  target="_blank">
      <i class="fa-brands fa-github fa-lg"></i>
    </a>
  
</div>
      


        
        <ul class=" hidden sm:flex flex-1 justify-end items-center gap-6 ">












<a href="/"  title="Home">
    <li class="hover  ">
      <i class="fa-solid fa-house"></i>
      Home
    </li>
</a>













<a href="/posts/"  title="My Blog">
    <li class="hover    active ">
      <i class="fa-solid fa-paper-plane"></i>
      My Blog
    </li>
</a>













<a href="/gallery/"  title="My Life">
    <li class="hover  ">
      <i class="fa-solid  fa-mountain-sun"></i>
      My Life
    </li>
</a>













<a href="/tags/"  title="Tags">
    <li class="hover  ">
      <i class="fa-solid fa-tag"></i>
      Tags
    </li>
</a>













<a href="/about/"  title="About">
    <li class="hover  ">
      <i class="fa-solid fa-medal"></i>
      About
    </li>
</a>













<a href="/oxford/"  title="Oxford">
    <li class="hover  ">
      <i class="fa-solid fa-book"></i>
      Oxford
    </li>
</a>


</ul>
        
        <div class="flex sm:hidden flex-1 justify-end">
          <button id="toggle" class="button_container">
            <i class="fa-solid fa-bars"></i>           
          </button>
        </div>


        <div class="theme-toggle">
          <input type="checkbox" id="theme-switch" class="theme-switch-input" onclick="toggleTheme()">
          <label for="theme-switch" class="theme-switch-label">
            <span class="theme-switch-icon">
              <i class="fas fa-sun"></i>
              <i class="fas fa-moon"></i>
            </span>
          </label>
        </div>

      </div>
      <div class="overlay" id="overlay">
        <nav class="overlay-menu">
            <ul>












<a href="/"  title="Home">
    <li class="hover  ">
      <i class="fa-solid fa-house"></i>
      Home
    </li>
</a>













<a href="/posts/"  title="My Blog">
    <li class="hover    active ">
      <i class="fa-solid fa-paper-plane"></i>
      My Blog
    </li>
</a>













<a href="/gallery/"  title="My Life">
    <li class="hover  ">
      <i class="fa-solid  fa-mountain-sun"></i>
      My Life
    </li>
</a>













<a href="/tags/"  title="Tags">
    <li class="hover  ">
      <i class="fa-solid fa-tag"></i>
      Tags
    </li>
</a>













<a href="/about/"  title="About">
    <li class="hover  ">
      <i class="fa-solid fa-medal"></i>
      About
    </li>
</a>













<a href="/oxford/"  title="Oxford">
    <li class="hover  ">
      <i class="fa-solid fa-book"></i>
      Oxford
    </li>
</a>


</ul>
        </nav>
      </div>
    
      
      


    </nav>
  </header>
             <main class="min-h-full"  >

<style>
  
  html {
  scroll-behavior: smooth;
}
html, body {
    scroll-padding-top: 100px;
}
#page-section {
    display: block;
    word-wrap: break-word;
}


.blog-content {
    padding-bottom: 3rem;
}

@media(min-width: 1024px) {
    #page-section>aside {
        margin-left:1rem;
        border-left-width: 4px;
        border-color: #ffb703
    }

    #page-section>aside.tableOfContentContainer {
        position: -webkit-sticky;
        position: sticky;
        top: 79px;
        align-self: start
    }

    #page-section>aside>h3 {
        font-size: 1rem;
        padding-left: .5rem;
        font-weight: 700;
        padding-bottom: .5rem;
        padding-top: 1rem
    }

    #page-section {
        display: grid;
        grid-template-columns: 100% 12em;
        width: 80%
    }

    #TableOfContents {
        display: block;
        padding-left: .5rem;
        padding-bottom: 1rem;
        font-size: 1rem;
        color: var(--copyright-info-color)
    }

    #TableOfContents li {
        padding-top: .25rem;
        padding-bottom: .25rem;
        list-style: none;
        font-size: small;
    }

    #TableOfContents li.active {
        padding-left: 0
    }

    #TableOfContents li.active:before {
        content: "→";
        display: inline-block;
        margin-left: -20px;
        width: 20px
    }

    .cronweekly #TableOfContents ul {
        margin-left: 1rem!important
    }

    #TableOfContents li {
        margin-left: 1rem
    }

    #TableOfContents li.active>a {
        color: var(--copyright-info-color);
        font-weight: 700
    }

    #TableOfContents a {
        text-decoration: none;
        padding: .125rem 0;
        color: rgb(142, 142, 142);
        -webkit-transition: all 50ms ease-in-out;
        transition: all 50ms ease-in-out
    }

    #TableOfContents a:hover,#TableOfContents a:focus,#TableOfContents a:active {
        color: var(--primary-color)
    }

    #tableOfContentContainer ol,ul {
      list-style: none;
      margin: 0;
      padding: 0
    }
}



.content blockquote {
    padding-left: 1rem;
    padding-right: 1rem;
    border-left-width: 4px;
    border-color: #ffb703;
    font-style: italic;
}

.content a,.homepage-intro a,.link-dark {
    border-bottom-width: 2px;
    padding-bottom: .1rem;
    padding-top: .1rem;
    border-color: #ffb703
}

.link-talks-meta {
    padding-bottom: .3rem!important;
    margin-right: 1rem;
    color: #718096;
    font-size: 1rem
}

.link-dark {
    border-color: #744210
}

.content a:hover,.homepage-intro a:hover,footer a:hover,.link-dark a:hover {
    background-color: #f6e05e
}

.comments svg {
    height: 2rem;
    width: 2rem;
    fill: currentColor;
    display: inline-block;
    margin: .5rem
}

.comments .share-links a {
    border-width: 0;
    background-color: #f7fafc;
    display: inline-block;
    border-color: #cbd5e0;
    border-width: 1px;
    margin-right: 1rem
}

.comments .share-links a:hover {
    background-color: #edf2f7
}

.comments h3 {
    border-bottom-width: 0!important;
    display: block!important;
    font-size: 1.875rem!important
}

.content h1,.content h2,.content h3 {
    display: inline-block;
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 1rem;
    margin-top: 1.5rem;
    border-bottom-width: 2px;
    padding-bottom: 0;
    border-color: #e2e8f0;
    line-height: 2
}

.content h2 {
    margin-bottom: .25rem
}

.content h3 {
    font-size: 1.25rem
}
.polaroid{
    display: flex;
    justify-content: center;
}

.content img {
    max-height: 500px;
    width: 100%;
    height: inherit;
    display: block;
    object-fit: cover;
    border-radius: .25rem;
    border-width: 1px;
    box-shadow: 0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -2px rgba(0,0,0,.05);
}

</style>
<section class="s:mt-10">
  <div class="w-screen max-w-full pt-20 header-curved  ">
    <div class="container w-full md:max-w-4xl px-4 md:px-6 text-xl text-gray-800 leading-normal mx-auto">
        <div class="pb-8">
            <h1 class="font-thin break-normal leading-tight text-gray-900 pt-6 pb-4 text-4xl md:text-5xl">
              Find Players With Zero or One Losses
            </h1>
           
        </div>
      </div>
    </div>
        <div class="container w-full md:max-w-4xl mx-auto mt-8 ">
          <div class="w-full px-4 md:px-6  text-gray-800 leading-normal">
            <div class="page-metadata">
<div class="article-header">
    <div class="avatar">
        <img src="https://hupo-common.s3.ap-northeast-2.amazonaws.com/W0FUuPX.jpeg">
    </div>
    <div class="info">
        <div class="author">
            <span class="name">tothemoon</span>
            <span class="author-label"></span>
        </div>
        <div class="meta-info">
            <div class="article-meta-info">
                <span class="article-date article-meta-item">
                    <i class="fa fa-pen"></i>&nbsp;
                    <span class="pc">December 1, 2024</span>
                </span>
                
                <div class="article-categories article-meta-item">
                    <span class="fa fa-folder-open"></span>
                    
                    <a href="https://hupochuanbird.github.io/categories/leetcode/">Leetcode</a>&nbsp;
                    
                </div>
                
                
                <span class="article-tags article-meta-item">
                    <i class="fa fa-tag"></i>&nbsp;
                    <ul>
                        
                        <li>
                        #<a href="https://hupochuanbird.github.io/tags/medium/">Medium</a>&nbsp;
                        </li>
                        
                        <li>
                        #<a href="https://hupochuanbird.github.io/tags/array/">Array</a>&nbsp;
                        </li>
                        
                        <li>
                        #<a href="https://hupochuanbird.github.io/tags/hash-table/">Hash Table</a>&nbsp;
                        </li>
                        
                        <li>
                        #<a href="https://hupochuanbird.github.io/tags/sort/">Sort</a>&nbsp;
                        </li>
                        
                    </ul>
                </span>
                
                <span class="article-wordcount article-meta-item">
                    <i class="fa fa-book"></i>&nbsp;<span>305 Words</span>
                </span>
                <span class="article-min2read article-meta-item">
                    <i class="fa fa-clock"></i>&nbsp;<span>2 mins</span>
                </span>


            </div>
        </div>
    </div>
</div></div>
            <mian id="page-section">
              
              <div class="content blog-content">
                
                
              
                <h1 id="2225find-players-with-zero-or-one-losses-medium">【2225】Find Players With Zero or One Losses <font size="3" color="#FF5733">Medium</font></h1>
<p>You are given an integer array <code>matches</code> where <code>matches[i] = [winneri, loseri]</code> indicates that the player <code>winneri</code> defeated player <code>loseri</code> in a match.</p>
<p>Return <em>a list</em> <code>answer</code> <em>of size</em> <code>2</code> <em>where:</em></p>
<ul>
<li><code>answer[0]</code> is a list of all players that have <strong>not</strong> lost any matches.</li>
<li><code>answer[1]</code> is a list of all players that have lost exactly <strong>one</strong> match.</li>
</ul>
<p>The values in the two lists should be returned in <strong>increasing</strong> order.</p>
<p><strong>Note:</strong></p>
<ul>
<li>You should only consider the players that have played <strong>at least one</strong> match.</li>
<li>The testcases will be generated such that <strong>no</strong> two matches will have the <strong>same</strong> outcome.</li>
</ul>
<p><strong>Example 1:</strong></p>
<div class="component-content pagebody component code">
  
  
  
  <pre><code class="">Input: matches = [[1,3],[2,3],[3,6],[5,6],[5,7],[4,5],[4,8],[4,9],[10,4],[10,9]]
Output: [[1,2,10],[4,5,7,8]]
Explanation:
Players 1, 2, and 10 have not lost any matches.
Players 4, 5, 7, and 8 each have lost one match.
Players 3, 6, and 9 each have lost two matches.
Thus, answer[0] = [1,2,10] and answer[1] = [4,5,7,8].</code></pre>
  
</div><p><strong>Example 2:</strong></p>
<div class="component-content pagebody component code">
  
  
  
  <pre><code class="">Input: matches = [[2,3],[1,3],[5,4],[6,4]]
Output: [[1,2,5,6],[]]
Explanation:
Players 1, 2, 5, and 6 have not lost any matches.
Players 3 and 4 each have lost two matches.
Thus, answer[0] = [1,2,5,6] and answer[1] = [].</code></pre>
  
</div><p><strong>Constraints:</strong></p>
<ul>
<li><code>1 &lt;= matches.length &lt;= 105</code></li>
<li><code>matches[i].length == 2</code></li>
<li><code>1 &lt;= winneri, loseri &lt;= 105</code></li>
<li><code>winneri != loseri</code></li>
<li>All <code>matches[i]</code> are <strong>unique</strong>.</li>
</ul>
<h3 id="solution">💡Solution</h3>
<div class="component-content pagebody component code">
  
  
  
  <div class=""><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span>   <span style="color:#8be9fd;font-style:italic">public</span> List<span style="color:#ff79c6">&lt;</span>List<span style="color:#ff79c6">&lt;</span>Integer<span style="color:#ff79c6">&gt;&gt;</span> <span style="color:#50fa7b">findWinners</span>(<span style="color:#8be9fd">int</span><span style="color:#ff79c6">[][]</span> matches) {
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>        Map<span style="color:#ff79c6">&lt;</span>Integer,Integer<span style="color:#ff79c6">&gt;</span> losers <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> HashMap<span style="color:#ff79c6">&lt;&gt;</span>();
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>        Set<span style="color:#ff79c6">&lt;</span>Integer<span style="color:#ff79c6">&gt;</span> winners <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> TreeSet<span style="color:#ff79c6">&lt;&gt;</span>();
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>        List<span style="color:#ff79c6">&lt;</span>List<span style="color:#ff79c6">&lt;</span>Integer<span style="color:#ff79c6">&gt;&gt;</span> ans <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> ArrayList<span style="color:#ff79c6">&lt;&gt;</span>();
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>        <span style="color:#ff79c6">for</span>(<span style="color:#8be9fd">int</span><span style="color:#ff79c6">[]</span> tmp : matches){
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>            <span style="color:#8be9fd">int</span> win <span style="color:#ff79c6">=</span> tmp<span style="color:#ff79c6">[</span>0<span style="color:#ff79c6">]</span>;
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>            <span style="color:#8be9fd">int</span> lose <span style="color:#ff79c6">=</span> tmp<span style="color:#ff79c6">[</span>1<span style="color:#ff79c6">]</span>;
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>            winners.<span style="color:#50fa7b">add</span>(win);
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>            losers.<span style="color:#50fa7b">put</span>(lose,losers.<span style="color:#50fa7b">getOrDefault</span>(lose,0)<span style="color:#ff79c6">+</span>1);
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>        }
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>        Set<span style="color:#ff79c6">&lt;</span>Integer<span style="color:#ff79c6">&gt;</span> loses <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> TreeSet<span style="color:#ff79c6">&lt;&gt;</span>();
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>        <span style="color:#ff79c6">for</span>(Map.<span style="color:#50fa7b">Entry</span><span style="color:#ff79c6">&lt;</span>Integer,Integer<span style="color:#ff79c6">&gt;</span> map : losers.<span style="color:#50fa7b">entrySet</span>()){
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>            <span style="color:#8be9fd">int</span> lose <span style="color:#ff79c6">=</span> map.<span style="color:#50fa7b">getKey</span>();
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span>            winners.<span style="color:#50fa7b">remove</span>(lose);
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span>            <span style="color:#ff79c6">if</span>(map.<span style="color:#50fa7b">getValue</span>() <span style="color:#ff79c6">==</span> 1){
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span>                loses.<span style="color:#50fa7b">add</span>(lose);
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span>            }
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span>        }
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span>        ans.<span style="color:#50fa7b">add</span>( <span style="color:#ff79c6">new</span> ArrayList<span style="color:#ff79c6">&lt;&gt;</span>(winners));
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span>        ans.<span style="color:#50fa7b">add</span>( <span style="color:#ff79c6">new</span> ArrayList<span style="color:#ff79c6">&lt;&gt;</span>(loses));
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span><span>        <span style="color:#ff79c6">return</span> ans;
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span><span>    }</span></span></code></pre></div></div>
  
</div><h1 id="-refer-links">🔗 Refer links</h1>
<p><a href="https://leetcode.com/problems/find-players-with-zero-or-one-losses/description/">https://leetcode.com/problems/find-players-with-zero-or-one-losses/description/</a></p>

              </div>
             <aside class="hidden lg:block tableOfContentContainer" id="tableOfContentContainer">
              <h3>Table of contents</h3>
                
              <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#solution">💡Solution</a></li>
      </ul>
    </li>
  </ul>
</nav>
              </aside>
            </mian>
          </div>
            
      


          <div class="my-14">
            













  

  

  








  


 




  



<style>
.resp-sharing-button__link,
.resp-sharing-button__icon {
  display: inline-block
}

.resp-sharing-button__link {
  text-decoration: none;
  color: #fff !important;
  margin: 0.2em
}

.resp-sharing-button {
  border-radius: 5px;
  transition: 25ms ease-out;
  padding: 0.5em 0.75em;
  font-family: Helvetica Neue,Helvetica,Arial,sans-serif;
  
}

.resp-sharing-button__icon svg {
  width: 1em;
  height: 1em;
  margin-right: 0.4em;
  vertical-align: middle
}

.resp-sharing-button--small svg {
  margin: 0;
  vertical-align: middle
}

 
.resp-sharing-button__icon {
  stroke: #fff;
  fill: none
}

 
.resp-sharing-button__icon--solid,
.resp-sharing-button__icon--solidcircle {
  fill: #fff;
  stroke: none
}

.resp-sharing-button--twitter {
  background-color: #55acee
}

.resp-sharing-button--twitter:hover {
  background-color: #2795e9
}

.resp-sharing-button--pinterest {
  background-color: #bd081c
}

.resp-sharing-button--pinterest:hover {
  background-color: #8c0615
}

.resp-sharing-button--facebook {
  background-color: #3b5998
}

.resp-sharing-button--facebook:hover {
  background-color: #2d4373
}

.resp-sharing-button--tumblr {
  background-color: #35465C
}

.resp-sharing-button--tumblr:hover {
  background-color: #222d3c
}

.resp-sharing-button--reddit {
  background-color: #ff4500
}

.resp-sharing-button--reddit:hover {
  background-color: #3a80c1
}

.resp-sharing-button--google {
  background-color: #dd4b39
}

.resp-sharing-button--google:hover {
  background-color: #c23321
}

.resp-sharing-button--linkedin {
  background-color: #0077b5
}

.resp-sharing-button--linkedin:hover {
  background-color: #046293
}

.resp-sharing-button--email {
  background-color: #777
}

.resp-sharing-button--email:hover {
  background-color: #5e5e5e
}

.resp-sharing-button--xing {
  background-color: #1a7576
}

.resp-sharing-button--xing:hover {
  background-color: #114c4c
}

.resp-sharing-button--whatsapp {
  background-color: #25D366
}

.resp-sharing-button--whatsapp:hover {
  background-color: #1da851
}

.resp-sharing-button--hackernews {
background-color: #FF6600
}
.resp-sharing-button--hackernews:hover, .resp-sharing-button--hackernews:focus {   background-color: #FB6200 }

.resp-sharing-button--vk {
  background-color: #507299
}

.resp-sharing-button--vk:hover {
  background-color: #43648c
}

.resp-sharing-button--facebook {
  background-color: #3b5998;
  border-color: #3b5998;
}

.resp-sharing-button--facebook:hover,
.resp-sharing-button--facebook:active {
  background-color: #2d4373;
  border-color: #2d4373;
}

.resp-sharing-button--twitter {
  background-color: #55acee;
  border-color: #55acee;
}

.resp-sharing-button--twitter:hover,
.resp-sharing-button--twitter:active {
  background-color: #2795e9;
  border-color: #2795e9;
}

.resp-sharing-button--tumblr {
  background-color: #35465C;
  border-color: #35465C;
}

.resp-sharing-button--tumblr:hover,
.resp-sharing-button--tumblr:active {
  background-color: #222d3c;
  border-color: #222d3c;
}

.resp-sharing-button--email {
  background-color: #777777;
  border-color: #777777;
}

.resp-sharing-button--email:hover,
.resp-sharing-button--email:active {
  background-color: #5e5e5e;
  border-color: #5e5e5e;
}

.resp-sharing-button--pinterest {
  background-color: #bd081c;
  border-color: #bd081c;
}

.resp-sharing-button--pinterest:hover,
.resp-sharing-button--pinterest:active {
  background-color: #8c0615;
  border-color: #8c0615;
}

.resp-sharing-button--linkedin {
  background-color: #0077b5;
  border-color: #0077b5;
}

.resp-sharing-button--linkedin:hover,
.resp-sharing-button--linkedin:active {
  background-color: #046293;
  border-color: #046293;
}

.resp-sharing-button--reddit {
  background-color: #ff4500;
  border-color: #ff4500;
}

.resp-sharing-button--reddit:hover,
.resp-sharing-button--reddit:active {
  background-color: #ff5700;
  border-color: #ff5700;
}

.resp-sharing-button--xing {
  background-color: #1a7576;
  border-color: #1a7576;
}

.resp-sharing-button--xing:hover
.resp-sharing-button--xing:active {
  background-color: #114C4C;
  border-color: #114C4C;
}

.resp-sharing-button--whatsapp {
  background-color: #25D366;
  border-color: #25D366;
}

.resp-sharing-button--whatsapp:hover,
.resp-sharing-button--whatsapp:active {
  background-color: #1DA851;
  border-color: #1DA851;
}

.resp-sharing-button--hackernews {
  background-color: #FF6600;
  border-color: #FF6600;
}

.resp-sharing-button--hackernews:hover
.resp-sharing-button--hackernews:active {
  background-color: #FB6200;
  border-color: #FB6200;
}

.resp-sharing-button--vk {
  background-color: #507299;
  border-color: #507299;
}

.resp-sharing-button--vk:hover
.resp-sharing-button--vk:active {
  background-color: #43648c;
  border-color: #43648c;
}

.resp-sharing-button--telegram {
  background-color: #54A9EB;
}

.resp-sharing-button--telegram:hover {
  background-color: #4B97D1;
}
</style>










<a class="resp-sharing-button__link" href="mailto:?subject=Find%20Players%20With%20Zero%20or%20One%20Losses&amp;body=https://hupochuanbird.github.io/posts/find-players-with-zero-or-one-losses/" target="_self" rel="noopener" aria-label="" title="E-Mail">
  <div class="resp-sharing-button resp-sharing-button--email resp-sharing-button--small"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">

<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M22 4H2C.9 4 0 4.9 0 6v12c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM7.25 14.43l-3.5 2c-.08.05-.17.07-.25.07-.17 0-.34-.1-.43-.25-.14-.24-.06-.55.18-.68l3.5-2c.24-.14.55-.06.68.18.14.24.06.55-.18.68zm4.75.07c-.1 0-.2-.03-.27-.08l-8.5-5.5c-.23-.15-.3-.46-.15-.7.15-.22.46-.3.7-.14L12 13.4l8.23-5.32c.23-.15.54-.08.7.15.14.23.07.54-.16.7l-8.5 5.5c-.08.04-.17.07-.27.07zm8.93 1.75c-.1.16-.26.25-.43.25-.08 0-.17-.02-.25-.07l-3.5-2c-.24-.13-.32-.44-.18-.68s.44-.32.68-.18l3.5 2c.24.13.32.44.18.68z"/></svg>

    
    </div>
  </div>
</a>






<a class="resp-sharing-button__link" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://hupochuanbird.github.io/posts/find-players-with-zero-or-one-losses/&amp;title=Find%20Players%20With%20Zero%20or%20One%20Losses&amp;summary=Find%20Players%20With%20Zero%20or%20One%20Losses&amp;https://hupochuanbird.github.io/posts/find-players-with-zero-or-one-losses/" target="_blank" rel="noopener" aria-label="">
  <div class="resp-sharing-button resp-sharing-button--linkedin resp-sharing-button--small"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">

<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6.5 21.5h-5v-13h5v13zM4 6.5C2.5 6.5 1.5 5.3 1.5 4s1-2.4 2.5-2.4c1.6 0 2.5 1 2.6 2.5 0 1.4-1 2.5-2.6 2.5zm11.5 6c-1 0-2 1-2 2v7h-5v-13h5V10s1.6-1.5 4-1.5c3 0 5 2.2 5 6.3v6.7h-5v-7c0-1-1-2-2-2z"/></svg>

    
    </div>
  </div>
</a>




<a class="resp-sharing-button__link" href="https://reddit.com/submit/?url=https://hupochuanbird.github.io/posts/find-players-with-zero-or-one-losses/&amp;resubmit=true&amp;title=Find%20Players%20With%20Zero%20or%20One%20Losses" target="_blank" rel="noopener" aria-label="" title="Reddit">
  <div class="resp-sharing-button resp-sharing-button--reddit resp-sharing-button--small"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">

<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M24 11.5c0-1.65-1.35-3-3-3-.96 0-1.86.48-2.42 1.24-1.64-1-3.75-1.64-6.07-1.72.08-1.1.4-3.05 1.52-3.7.72-.4 1.73-.24 3 .5C17.2 6.3 18.46 7.5 20 7.5c1.65 0 3-1.35 3-3s-1.35-3-3-3c-1.38 0-2.54.94-2.88 2.22-1.43-.72-2.64-.8-3.6-.25-1.64.94-1.95 3.47-2 4.55-2.33.08-4.45.7-6.1 1.72C4.86 8.98 3.96 8.5 3 8.5c-1.65 0-3 1.35-3 3 0 1.32.84 2.44 2.05 2.84-.03.22-.05.44-.05.66 0 3.86 4.5 7 10 7s10-3.14 10-7c0-.22-.02-.44-.05-.66 1.2-.4 2.05-1.54 2.05-2.84zM2.3 13.37C1.5 13.07 1 12.35 1 11.5c0-1.1.9-2 2-2 .64 0 1.22.32 1.6.82-1.1.85-1.92 1.9-2.3 3.05zm3.7.13c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2zm9.8 4.8c-1.08.63-2.42.96-3.8.96-1.4 0-2.74-.34-3.8-.95-.24-.13-.32-.44-.2-.68.15-.24.46-.32.7-.18 1.83 1.06 4.76 1.06 6.6 0 .23-.13.53-.05.67.2.14.23.06.54-.18.67zm.2-2.8c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm5.7-2.13c-.38-1.16-1.2-2.2-2.3-3.05.38-.5.97-.82 1.6-.82 1.1 0 2 .9 2 2 0 .84-.53 1.57-1.3 1.87z"/></svg>

    
    </div>
  </div>
</a>















          </div>

          <div class="pagination"><div class="paginator" >
    
        <a class="prev btn" style="font-size: small;"  href="https://hupochuanbird.github.io/posts/maximum-sum-of-an-hourglass/"><i class="fa-solid fa-arrow-left"></i>Maximum Sum of an Hourglass </a>
    
    
        <a class="next btn" style="font-size: small;" href="https://hupochuanbird.github.io/posts/leetcode-checkifrccontainsallnumber/">Check if Every Row and Column … <i class="fa-solid fa-arrow-right"></i></a>
       
    
</div></div>
          <div class="comment-block">

 <div class="giscus">
    <iframe class="giscus-frame">
    
    </iframe>
 </div>
 <script src="https://giscus.app/client.js"
 data-repo="hupochuanbird/hupochuanbird.github.io"
 data-repo-id="R_kgDOLShynw"
 data-category="Announcements"
 data-category-id="DIC_kwDOLShyn84CdQiv"
 data-mapping="pathname"
 data-strict="0"
 data-reactions-enabled="1"
 data-emit-metadata="0"
 data-input-position="bottom"
 data-theme="light_tritanopia"
 data-lang="en"
 crossorigin="anonymous"
 async>
</script></div>
        </div>

    
  </section>

  <script>


window.addEventListener('DOMContentLoaded', () => {
        const observerForTableOfContentActiveState = new IntersectionObserver(entries => {
            entries.forEach(entry => {
                const id = entry.target.getAttribute('id');
                if (entry.intersectionRatio > 0) {
                  clearActiveStatesInTableOfContents();
                  document.querySelector(`aside nav li a[href="#${id}"]`).parentElement.classList.add('active');
              }
          });
      });
      document.querySelectorAll('h1[id],h2[id],h3[id],h4[id]').forEach((section) => {
          observerForTableOfContentActiveState.observe(section);
      });

    });

    function clearActiveStatesInTableOfContents() {
        document.querySelectorAll('aside nav li').forEach((section) => {
            section.classList.remove('active');
        });
    }

  </script>
            </main>
             <footer class="mt-20">
    <div class="footer">
        <div class="bubbles">
            <div class="bubble" style="--size:3.283778460829012rem; --distance:8.273995682244763rem; --position:80.43121961838831%; --time:3.370470516561046s; --delay:-2.4460750377075677s;"></div>
            <div class="bubble" style="--size:5.048775832023261rem; --distance:8.209048016743958rem; --position:81.24435161533792%; --time:2.689387587750886s; --delay:-3.178866630821537s;"></div>
            <div class="bubble" style="--size:2.8917775001193196rem; --distance:8.454264258769582rem; --position:-1.892480833658683%; --time:2.870417823317806s; --delay:-3.8694363898657054s;"></div>
            <div class="bubble" style="--size:2.98950564759547rem; --distance:6.810598321237242rem; --position:100.02057873419844%; --time:2.2412476180211125s; --delay:-3.9669609230968366s;"></div>
            <div class="bubble" style="--size:3.056008172581711rem; --distance:7.571228915589839rem; --position:101.36290426526402%; --time:3.556279976104421s; --delay:-2.601994631532017s;"></div>
            <div class="bubble" style="--size:3.22671020910027rem; --distance:8.977876061761204rem; --position:69.44795371340336%; --time:2.0813687087410555s; --delay:-2.561126203255737s;"></div>
            <div class="bubble" style="--size:5.983498430412179rem; --distance:9.55217569034621rem; --position:33.97699243298395%; --time:2.766369309258826s; --delay:-2.306807070885999s;"></div>
            <div class="bubble" style="--size:3.7130270767886904rem; --distance:9.15367913841726rem; --position:36.78355273882992%; --time:3.4415953312360266s; --delay:-2.8423432581270194s;"></div>
            <div class="bubble" style="--size:2.0830849819394457rem; --distance:6.408202865389665rem; --position:-3.7304088146057324%; --time:2.1324701384850853s; --delay:-3.6594998300237567s;"></div>
            <div class="bubble" style="--size:2.846429800070382rem; --distance:9.850031890259043rem; --position:63.51703893124248%; --time:2.48611792099451s; --delay:-3.957713451098727s;"></div>
            <div class="bubble" style="--size:2.0204852928911228rem; --distance:7.706337256219967rem; --position:10.659889096699736%; --time:3.8878533177786547s; --delay:-2.7460423807313834s;"></div>
            <div class="bubble" style="--size:5.148489190934578rem; --distance:7.8185867715909385rem; --position:44.27428830609239%; --time:3.0912972813262374s; --delay:-2.4548184305462204s;"></div>
            <div class="bubble" style="--size:3.1179981047008507rem; --distance:8.217674226182545rem; --position:-0.8434243039321725%; --time:3.893070336584621s; --delay:-3.482134608090908s;"></div>
            <div class="bubble" style="--size:3.073022863441822rem; --distance:6.748615665272697rem; --position:17.187709593603337%; --time:2.869641888050805s; --delay:-3.011358944260785s;"></div>
            <div class="bubble" style="--size:3.040494763665981rem; --distance:6.001078493795163rem; --position:30.428225670705793%; --time:2.1274023672313547s; --delay:-2.269450277325624s;"></div>
            <div class="bubble" style="--size:2.4934683696411932rem; --distance:9.661759778304251rem; --position:38.28385025284947%; --time:3.3066616446050388s; --delay:-3.903278872741094s;"></div>
            <div class="bubble" style="--size:4.341153504409132rem; --distance:8.372204276920996rem; --position:8.925467109327556%; --time:2.961530876031502s; --delay:-3.733657008574247s;"></div>
            <div class="bubble" style="--size:3.017692044104651rem; --distance:7.742406344583268rem; --position:7.135396211953164%; --time:3.9814409149202454s; --delay:-2.769434098028662s;"></div>
            <div class="bubble" style="--size:5.080150296463536rem; --distance:6.090080087294706rem; --position:99.46159986754385%; --time:3.125230884966736s; --delay:-2.415272316183627s;"></div>
            <div class="bubble" style="--size:4.220709880817442rem; --distance:6.273886998189256rem; --position:97.58004171875584%; --time:3.1349176005189006s; --delay:-3.9274262276392298s;"></div>
            <div class="bubble" style="--size:3.567041880882358rem; --distance:6.32323480828306rem; --position:92.70135681477952%; --time:2.1362733605721504s; --delay:-3.1505418730279633s;"></div>
            <div class="bubble" style="--size:3.5907802134353792rem; --distance:9.870786669090203rem; --position:98.38043362003364%; --time:2.365772524802981s; --delay:-3.155876947312736s;"></div>
            <div class="bubble" style="--size:3.153202036251672rem; --distance:8.019938162492018rem; --position:17.19668721036048%; --time:3.6277311767623384s; --delay:-3.1876739225876354s;"></div>
            <div class="bubble" style="--size:3.4877396066133333rem; --distance:8.270634812076594rem; --position:10.484445181872442%; --time:3.0775952904576176s; --delay:-2.2907439552389293s;"></div>
            <div class="bubble" style="--size:5.766665156529646rem; --distance:9.899439420013206rem; --position:3.2576122174816096%; --time:2.846254474445945s; --delay:-2.0209311226219087s;"></div>
            <div class="bubble" style="--size:5.239738288627671rem; --distance:8.364557911980619rem; --position:87.23110357446504%; --time:2.1930097960461055s; --delay:-3.0322261546336517s;"></div>
            <div class="bubble" style="--size:2.1990673841700143rem; --distance:7.720521403005255rem; --position:-0.17107184177207468%; --time:2.5997240933430965s; --delay:-2.07586605687868s;"></div>
            <div class="bubble" style="--size:2.096379882401747rem; --distance:8.369893834364031rem; --position:32.32516475439321%; --time:3.695249819707472s; --delay:-3.851082655427779s;"></div>
            <div class="bubble" style="--size:3.638390237165721rem; --distance:9.7664220131003rem; --position:87.38200354757375%; --time:3.862542578562428s; --delay:-2.9797900374453823s;"></div>
            <div class="bubble" style="--size:2.014227665781494rem; --distance:9.475179023878415rem; --position:18.072465784612906%; --time:2.876721765742051s; --delay:-3.456765174855402s;"></div>
            <div class="bubble" style="--size:4.835622070747298rem; --distance:6.646442484712818rem; --position:42.56200483263158%; --time:2.4201735129167705s; --delay:-2.129697393514734s;"></div>
            <div class="bubble" style="--size:2.6544780967758683rem; --distance:9.993914974673478rem; --position:47.41484229787173%; --time:2.6928887058432203s; --delay:-3.6501705520332406s;"></div>
            <div class="bubble" style="--size:2.1810138227712246rem; --distance:8.625390262659332rem; --position:79.91382406364768%; --time:3.0571539204415643s; --delay:-2.879575299430147s;"></div>
            <div class="bubble" style="--size:3.9602029523135043rem; --distance:8.811978694178176rem; --position:22.085129474405363%; --time:2.3040885125074015s; --delay:-3.9822714071472305s;"></div>
            <div class="bubble" style="--size:3.2601731045983255rem; --distance:6.551449087150881rem; --position:56.03044260678546%; --time:3.377917555269709s; --delay:-2.248689205859968s;"></div>
            <div class="bubble" style="--size:4.724989417802013rem; --distance:8.126549828172152rem; --position:83.76957059823852%; --time:2.8347659523990463s; --delay:-2.4045807342328174s;"></div>
            <div class="bubble" style="--size:2.4601556144465766rem; --distance:6.451551054345049rem; --position:77.04823997553098%; --time:2.466260099531937s; --delay:-3.8444152858910203s;"></div>
            <div class="bubble" style="--size:3.5005873287032445rem; --distance:7.9251184298861475rem; --position:-1.7530963025931068%; --time:2.5654285446675242s; --delay:-3.719663280805641s;"></div>
            <div class="bubble" style="--size:3.287577998169491rem; --distance:9.297377061416393rem; --position:18.741671727246466%; --time:3.341885163952444s; --delay:-2.5715436541146115s;"></div>
            <div class="bubble" style="--size:5.221728885270182rem; --distance:9.286314646321468rem; --position:42.28149761730227%; --time:3.389657748614331s; --delay:-2.961540852653576s;"></div>
            <div class="bubble" style="--size:2.818746087299467rem; --distance:6.526311604034215rem; --position:8.32284386562167%; --time:3.533110613536286s; --delay:-3.4929316976539795s;"></div>
            <div class="bubble" style="--size:3.9555668943551874rem; --distance:7.587517096965727rem; --position:86.98518380989474%; --time:3.8328433866272116s; --delay:-3.947314208169883s;"></div>
            <div class="bubble" style="--size:5.86344809196979rem; --distance:6.715459413428028rem; --position:93.51712672911347%; --time:3.3194895688568025s; --delay:-2.814996993119309s;"></div>
            <div class="bubble" style="--size:4.659085472309417rem; --distance:6.833049757751052rem; --position:18.34331186924404%; --time:2.1401803669951542s; --delay:-3.281758431062622s;"></div>
            <div class="bubble" style="--size:5.647514992520861rem; --distance:6.166187896878902rem; --position:103.56058520261233%; --time:2.7109824838325496s; --delay:-3.5641804780474113s;"></div>
            <div class="bubble" style="--size:3.4116906103373514rem; --distance:9.87448520511619rem; --position:60.40367758628962%; --time:3.211959351671091s; --delay:-3.909483663267988s;"></div>
            <div class="bubble" style="--size:4.358059871263618rem; --distance:6.192241875091202rem; --position:55.79560282838993%; --time:3.522040191932956s; --delay:-2.4451874413830073s;"></div>
            <div class="bubble" style="--size:5.657469779677323rem; --distance:8.59153006822326rem; --position:72.97116848710832%; --time:3.2281152136729996s; --delay:-2.6942268466639807s;"></div>
            <div class="bubble" style="--size:5.36401084558097rem; --distance:8.032035852980673rem; --position:68.03498132267576%; --time:3.6949889538863347s; --delay:-3.5310246226914868s;"></div>
            <div class="bubble" style="--size:5.57833766575319rem; --distance:7.499254928961794rem; --position:94.12393327236666%; --time:3.4806354090355405s; --delay:-2.274765603356683s;"></div>
            <div class="bubble" style="--size:3.2806309747640574rem; --distance:8.488379921065523rem; --position:48.78983463936292%; --time:2.877531426246132s; --delay:-2.096852780408325s;"></div>
            <div class="bubble" style="--size:2.5739678385733678rem; --distance:8.917657906310211rem; --position:36.30111446297418%; --time:2.132094571645426s; --delay:-2.300338825704596s;"></div>
            <div class="bubble" style="--size:3.193905105705725rem; --distance:6.837855040140766rem; --position:77.42883266635026%; --time:2.6764254242868546s; --delay:-2.6117600566315358s;"></div>
            <div class="bubble" style="--size:2.921396795915677rem; --distance:6.017635087648889rem; --position:64.47566942541235%; --time:2.1329836115090024s; --delay:-2.9493514981070006s;"></div>
            <div class="bubble" style="--size:5.996546073399244rem; --distance:8.438210536324492rem; --position:13.268370807153438%; --time:3.6359501852961262s; --delay:-3.9647431379196347s;"></div>
            <div class="bubble" style="--size:3.6759907032328405rem; --distance:8.418483277724492rem; --position:32.34008573798657%; --time:2.4480223557558345s; --delay:-2.0329066324347824s;"></div>
            <div class="bubble" style="--size:4.1642001716890285rem; --distance:7.292867116703618rem; --position:53.7639790538517%; --time:3.502488399088864s; --delay:-2.498372665932038s;"></div>
            <div class="bubble" style="--size:4.787565853418627rem; --distance:7.002471829807719rem; --position:71.91523290439147%; --time:2.958165535287203s; --delay:-3.874622142256656s;"></div>
            <div class="bubble" style="--size:2.518311359883132rem; --distance:7.986066195679516rem; --position:64.83491880651033%; --time:2.799838241177398s; --delay:-2.605045923573953s;"></div>
            <div class="bubble" style="--size:2.876971757413453rem; --distance:6.068564148976618rem; --position:11.865157104893097%; --time:2.827771256360732s; --delay:-2.39512359755763s;"></div>
            <div class="bubble" style="--size:2.104732688202529rem; --distance:7.730020214979188rem; --position:89.79694218565386%; --time:3.463311919402186s; --delay:-3.12192390140452s;"></div>
            <div class="bubble" style="--size:3.3360664273276166rem; --distance:7.983397791094809rem; --position:68.65578472758347%; --time:3.9335303632278293s; --delay:-3.4294180673320884s;"></div>
            <div class="bubble" style="--size:3.9727817769810656rem; --distance:9.566771590971191rem; --position:8.31120576187265%; --time:2.205225438795449s; --delay:-3.324358147783013s;"></div>
            <div class="bubble" style="--size:2.785922768617306rem; --distance:7.082254824315727rem; --position:28.396955159650958%; --time:2.942223891965728s; --delay:-2.5935628505954393s;"></div>
            <div class="bubble" style="--size:4.2464496070749rem; --distance:6.691569284526946rem; --position:42.54917838169232%; --time:3.127523856909967s; --delay:-2.954291705842826s;"></div>
            <div class="bubble" style="--size:5.723073490329043rem; --distance:9.090319785576288rem; --position:-3.3796480533643103%; --time:2.2633471262800557s; --delay:-3.2578755649237174s;"></div>
            <div class="bubble" style="--size:3.219530490661871rem; --distance:7.4797090026341495rem; --position:101.94887397738762%; --time:2.1036948366679686s; --delay:-2.751593490682857s;"></div>
            <div class="bubble" style="--size:2.1814720163593524rem; --distance:6.396504615967695rem; --position:50.89372542693971%; --time:2.582017377993537s; --delay:-2.906294282914755s;"></div>
            <div class="bubble" style="--size:5.809553529495087rem; --distance:7.464097429978566rem; --position:90.38559551607041%; --time:3.7652915434285816s; --delay:-2.354212300265661s;"></div>
            <div class="bubble" style="--size:3.62120707963538rem; --distance:9.076979425692606rem; --position:11.150253759803633%; --time:3.0486377247236534s; --delay:-2.8041488577211697s;"></div>
            <div class="bubble" style="--size:5.00310856270532rem; --distance:9.170735560719102rem; --position:64.58179397075584%; --time:3.7656580293692796s; --delay:-2.893674658194128s;"></div>
            <div class="bubble" style="--size:2.709501141760601rem; --distance:7.8373914558643705rem; --position:5.674632497742465%; --time:3.395681112908417s; --delay:-2.2649544585446963s;"></div>
            <div class="bubble" style="--size:5.863530345348175rem; --distance:6.010688703517391rem; --position:8.068803588662359%; --time:3.027313856154054s; --delay:-2.231948018674604s;"></div>
            <div class="bubble" style="--size:3.184680382015328rem; --distance:8.878536191481098rem; --position:8.386217564803701%; --time:3.9938236104040246s; --delay:-3.582227746566318s;"></div>
            <div class="bubble" style="--size:5.634096080720658rem; --distance:9.852119364968344rem; --position:1.083944673937438%; --time:2.332288460957819s; --delay:-2.8850298727934875s;"></div>
            <div class="bubble" style="--size:3.4014949844199958rem; --distance:8.171860996672919rem; --position:84.2657700109125%; --time:2.2494226346466255s; --delay:-2.5677067273975007s;"></div>
            <div class="bubble" style="--size:3.25901366738288rem; --distance:7.677629208945115rem; --position:51.318943432823694%; --time:2.8086005653923443s; --delay:-3.8858374739056676s;"></div>
            <div class="bubble" style="--size:2.738787520059482rem; --distance:7.215369023176211rem; --position:56.250543764215685%; --time:3.976054489308197s; --delay:-2.326983298866254s;"></div>
            <div class="bubble" style="--size:2.2159404026193075rem; --distance:6.656577136470761rem; --position:6.693028946147312%; --time:2.864055961058856s; --delay:-2.4300716543937217s;"></div>
            <div class="bubble" style="--size:4.21593419511934rem; --distance:8.927963260087107rem; --position:25.147537992688058%; --time:3.009996529717521s; --delay:-3.0238438289524225s;"></div>
            <div class="bubble" style="--size:5.179991621161971rem; --distance:6.3853169980031845rem; --position:102.46036383116052%; --time:2.493617740988301s; --delay:-3.200833645229917s;"></div>
            <div class="bubble" style="--size:5.513584744686991rem; --distance:8.22544620750663rem; --position:101.1452384048811%; --time:3.282739845432842s; --delay:-3.661873228440018s;"></div>
            <div class="bubble" style="--size:3.339183876739143rem; --distance:9.526513756713628rem; --position:29.882131632276284%; --time:2.4931248570889335s; --delay:-2.475593644022913s;"></div>
            <div class="bubble" style="--size:5.572625591150981rem; --distance:7.345648077046019rem; --position:22.8560703003273%; --time:2.7498169626967566s; --delay:-2.17990566059977s;"></div>
            <div class="bubble" style="--size:4.1177605678413265rem; --distance:8.34852219885391rem; --position:29.490529078305904%; --time:3.2706309302541188s; --delay:-3.7771110698550556s;"></div>
            <div class="bubble" style="--size:5.9527591413810015rem; --distance:8.228548797101368rem; --position:86.92141319108892%; --time:2.1195045300057886s; --delay:-2.1550354449961038s;"></div>
            <div class="bubble" style="--size:3.4122434983866006rem; --distance:7.8470984688972765rem; --position:-4.737684816944457%; --time:3.361433469609846s; --delay:-2.7510535260586435s;"></div>
            <div class="bubble" style="--size:3.767163633315376rem; --distance:8.004107269407179rem; --position:58.86574552235167%; --time:2.4584153129693487s; --delay:-3.8899327217598216s;"></div>
            <div class="bubble" style="--size:4.966101867270128rem; --distance:8.096238035862653rem; --position:73.33011876280814%; --time:3.2569085513280767s; --delay:-2.927105754623504s;"></div>
            <div class="bubble" style="--size:5.239318894400097rem; --distance:8.21018133412617rem; --position:49.79329539415349%; --time:2.486417355278126s; --delay:-3.935240915466869s;"></div>
            <div class="bubble" style="--size:2.309860158972202rem; --distance:8.23350401700413rem; --position:52.762390580567924%; --time:3.253681340156047s; --delay:-3.39928187900957s;"></div>
            <div class="bubble" style="--size:5.405641933124867rem; --distance:7.787670658003827rem; --position:55.299301993538734%; --time:2.9254208880312023s; --delay:-3.4035022943444453s;"></div>
            <div class="bubble" style="--size:4.7889435136433365rem; --distance:8.059493307179075rem; --position:6.476650057477524%; --time:2.8831662912305407s; --delay:-2.469760261123794s;"></div>
            <div class="bubble" style="--size:5.202159646625798rem; --distance:6.485068767986836rem; --position:17.188791799414645%; --time:2.5591245696178158s; --delay:-2.547017621074239s;"></div>
            <div class="bubble" style="--size:2.6536622797162357rem; --distance:7.047091090720969rem; --position:99.8065168678203%; --time:3.1358735873884225s; --delay:-2.7674896723499964s;"></div>
            <div class="bubble" style="--size:5.455813017594882rem; --distance:7.92331827436949rem; --position:56.29121034809554%; --time:2.9592446232978804s; --delay:-3.0628319945178304s;"></div>
            <div class="bubble" style="--size:5.376750549059151rem; --distance:7.037706886415796rem; --position:90.43150179415491%; --time:3.4947245448237947s; --delay:-2.7649519449431956s;"></div>
            <div class="bubble" style="--size:3.6759966425104382rem; --distance:9.304354596540962rem; --position:50.078877699643236%; --time:2.364227888914125s; --delay:-2.1049591636942835s;"></div>
            <div class="bubble" style="--size:2.6416988575492812rem; --distance:8.426364301174832rem; --position:34.50261001869937%; --time:3.1489044014899474s; --delay:-2.872308171609069s;"></div>
            <div class="bubble" style="--size:3.039820548413071rem; --distance:7.700594071278777rem; --position:54.369437773201135%; --time:2.3518890849934877s; --delay:-3.816455915222773s;"></div>
            <div class="bubble" style="--size:4.946041332561464rem; --distance:9.940105274558535rem; --position:93.38341839478599%; --time:3.515708411924009s; --delay:-2.139929822750188s;"></div>
            <div class="bubble" style="--size:2.263980751965552rem; --distance:6.845227344107201rem; --position:7.6223749655636635%; --time:3.2543534151869933s; --delay:-3.5968097313692247s;"></div>
            <div class="bubble" style="--size:2.9705072994554786rem; --distance:6.417811696490268rem; --position:0.9010946526242307%; --time:3.869664661904819s; --delay:-2.817867407827982s;"></div>
            <div class="bubble" style="--size:3.7636117769983146rem; --distance:9.28767671082202rem; --position:104.59608438872068%; --time:2.6660045314116205s; --delay:-3.0279672533679767s;"></div>
            <div class="bubble" style="--size:2.534147718025401rem; --distance:9.761714609373762rem; --position:17.47044672925322%; --time:3.8859389327208964s; --delay:-3.3352631179315866s;"></div>
            <div class="bubble" style="--size:5.809103802369521rem; --distance:9.865569439286801rem; --position:15.660853702232227%; --time:2.518863325103205s; --delay:-3.5808886812518383s;"></div>
            <div class="bubble" style="--size:2.4500873479914125rem; --distance:7.274598849994393rem; --position:36.897733125341446%; --time:3.3461286093771387s; --delay:-3.6280095853685674s;"></div>
            <div class="bubble" style="--size:5.773371959699836rem; --distance:8.463136547655406rem; --position:35.06048100391646%; --time:3.209957922113289s; --delay:-3.0079091255606945s;"></div>
            <div class="bubble" style="--size:4.3926522787512265rem; --distance:9.612613676284077rem; --position:22.262054455432867%; --time:2.373303643948798s; --delay:-3.0679725632400907s;"></div>
            <div class="bubble" style="--size:3.952708176353637rem; --distance:9.169495699134323rem; --position:55.04449087079253%; --time:2.7418325241308232s; --delay:-3.3828476409270283s;"></div>
            <div class="bubble" style="--size:3.844775009709453rem; --distance:8.355266723179703rem; --position:3.429889023129533%; --time:3.804465386878591s; --delay:-2.513210465049223s;"></div>
            <div class="bubble" style="--size:2.375822423531286rem; --distance:8.085306102003058rem; --position:51.444859856544134%; --time:3.5291234902803015s; --delay:-3.174879273882913s;"></div>
            <div class="bubble" style="--size:3.987597068631678rem; --distance:6.323842998471056rem; --position:58.472598393140736%; --time:3.6685014540532994s; --delay:-2.125640472580853s;"></div>
            <div class="bubble" style="--size:3.826556536162788rem; --distance:8.093657912781008rem; --position:47.22358687899771%; --time:2.46067661652588s; --delay:-2.795336044113773s;"></div>
            <div class="bubble" style="--size:5.409522304422901rem; --distance:8.08453713835749rem; --position:7.192255114868317%; --time:3.6024864503739416s; --delay:-2.02777453028783s;"></div>
            <div class="bubble" style="--size:2.33220717107433rem; --distance:6.015929004226659rem; --position:69.52801341775708%; --time:3.072171961227187s; --delay:-2.4004690861766145s;"></div>
            <div class="bubble" style="--size:3.1897153674684295rem; --distance:7.970038416707961rem; --position:79.81130078644377%; --time:3.2691207165145544s; --delay:-3.1095874096110614s;"></div>
            <div class="bubble" style="--size:3.043749061825313rem; --distance:9.519971455545065rem; --position:-2.8790650455965716%; --time:2.5921789839789624s; --delay:-3.3392150143930954s;"></div>
            <div class="bubble" style="--size:2.016067925148069rem; --distance:6.601355813566787rem; --position:12.042692941814398%; --time:3.302733338826566s; --delay:-2.666684825220276s;"></div>
            <div class="bubble" style="--size:2.3135489970103658rem; --distance:8.429205824133346rem; --position:10.078502192237377%; --time:3.478083377118066s; --delay:-2.3933149990580658s;"></div>
            <div class="bubble" style="--size:2.3997743557871374rem; --distance:7.408088419264727rem; --position:35.09525576349087%; --time:3.389315536809761s; --delay:-3.7218046643592877s;"></div>
            <div class="bubble" style="--size:5.41080890592663rem; --distance:6.263885540517833rem; --position:88.47970464538236%; --time:3.791977923545102s; --delay:-2.1539409602055803s;"></div>
            <div class="bubble" style="--size:4.187278503726575rem; --distance:8.495185390066428rem; --position:55.2879387519304%; --time:3.8691313236516165s; --delay:-3.7558742796010205s;"></div>
            <div class="bubble" style="--size:5.2260631351390066rem; --distance:6.953165091043609rem; --position:87.01664638966206%; --time:2.2054605348148777s; --delay:-2.0729929853657163s;"></div>
            <div class="bubble" style="--size:3.2309243043140823rem; --distance:8.90242528602417rem; --position:70.6941354974967%; --time:2.420572336985768s; --delay:-3.902986636768033s;"></div>
            <div class="bubble" style="--size:4.416267568041894rem; --distance:8.454455353587463rem; --position:16.18344707827548%; --time:2.6786658712942186s; --delay:-3.7145978779515363s;"></div>
            <div class="bubble" style="--size:5.179842125942596rem; --distance:6.279313089480346rem; --position:51.631946389170714%; --time:2.9215376152158723s; --delay:-3.579196747493768s;"></div>
            <div class="bubble" style="--size:4.298088157115222rem; --distance:8.644044369523485rem; --position:25.709431630582966%; --time:3.9945321241856395s; --delay:-3.6007615466734237s;"></div>
        </div>
        <div class="content">
            <div class="container">
                <div class="footer__label">

                    <h2 class="footer__title">tothemoon</h2>

                    <span class="footer__subtitle">Design by bird - A blog about life, code, design, and woman in STEM by tothemoon</span>
                </div>
                    <ul class="footer__links">
                        <li>
                            <a href="/posts" class="footer__link">My blogs</a>
                        </li>
                        <li>
                            <a href="/about" class="footer__link">Who I Am</a>
                        </li>
                    </ul>
                    <div class="footer__socials">
  
    <a href="https://www.instagram.com/tothemoonbird/"  target="_blank">
      <i class="fa-brands fa-instagram fa-lg"></i>
    </a>
  
    <a href="https://leetcode.com/BirdyYang/"  target="_blank">
      <i class="fa-solid fa-bug  fa-lg"></i>
    </a>
  
    <a href="https://www.linkedin.com/in/yejia-yang-11105722a/"  target="_blank">
      <i class="fa-brands fa-linkedin fa-lg"></i>
    </a>
  
    <a href="https://github.com/Amber916Young/"  target="_blank">
      <i class="fa-brands fa-github fa-lg"></i>
    </a>
  
</div>


            </div>
            <p class="footer__copy">Copyright© All rights reserved</p>
        </div>
    </div>
    <svg style="position:fixed; top:100vh">
        <defs>
            <filter id="blob">
                <feGaussianBlur in="SourceGraphic" stdDeviation="10" result="blur"></feGaussianBlur>
                <feColorMatrix in="blur" mode="matrix" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 19 -9" result="blob"></feColorMatrix>
            </filter>
        </defs>
    </svg>
</footer>

































<button class="scrollToTopBtn showBtn">
    <i class="fa-solid fa-plane-up"></i>
</button>

<script src="https://unpkg.com/lunr/lunr.js"></script>
<script src="/js/search.js"></script>

<script>
    window.store = {
        
        "https:\/\/hupochuanbird.github.io\/categories\/": {
            "title": "Categories",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/categories\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/categories\/flutter\/": {
            "title": "Flutter",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/categories\/flutter\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/flutter\/": {
            "title": "Flutter",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/flutter\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/posts\/callerid_flutter\/": {
            "title": "How to read Data from USB CallerID deivce in Flutter",
            "tags": ["Tutorial","flutter","usb deivces",],
            "content": "Intro In the restaurant ordering scenario, phone orders are still quite common (though to be honest, I personally think this approach feels pretty traditional, even a bit outdated). When a restaurant takes a call, the staff usually has to ask for the phone number, address, and name, then manually type everything into the system. This process is not only slow but also prone to mistakes.\nIf we could recognize the phone number right when the call comes in, and directly match it with the customer’s past information (like delivery address or frequently ordered dishes), we could save a lot of repetitive work. That’s exactly what I’m trying to do here: integrate a CallerID device into a Flutter app. When a customer calls, the system instantly recognizes the number, and if the customer already exists in the database, their info pops up automatically—no manual input needed.\nCallerID is basically a small hardware device that connects to the telephone line. When a call comes in, it captures the number and sends the data to the computer via USB or serial port. When buying such a device, you need to check what platforms it supports. For example, the Artech110 only works on Windows, so I ended up using the CID EASY device for my development.\nHere’s the catch: Flutter is essentially a cross-platform UI framework, and it can’t directly talk to low-level hardware like this. A CallerID device continuously pushes out USB/serial data streams, which Dart simply can’t access. I couldn’t find any ready-made Flutter plugin for this either. So, the only option was to implement it myself: read the raw USB data, parse it into a plain phone number, and then pass it over to Flutter using a Platform Channel or Event Channel. Once Flutter receives the number, it can check the database, and if it’s an existing customer, show their info right away.\nThe Flow: How to realise To make this work in practice, the overall flow looks like this:\nCapture the raw data On the native side (Windows/Linux/macOS/Android), read the raw stream from the CallerID device via USB or serial port.\nParse the number The raw stream usually contains control characters and formatting codes. Strip those out and extract a clean phone number string.\nBridge to Flutter Use Platform Channel or Event Channel to pass the parsed phone number from the native layer to the Dart side.\nYour Own logic \u0026amp; Display customer info Once Flutter receives the number, query the local or remote database to check if this number belongs to an existing customer. If the customer exists, show their saved information (address, past orders, etc.) right away, skipping manual entry. If not, proceed with normal input.\nImplementation Scan devices by USB connection Connet the device Setup the thread for listening data from incoming call Catch the Data from USB, pass it to your own flutter app Plugin Here is the project Structure.\nThis is the main entry \u0026mdash; flutter_callerid.dart, It usually exports the public-facing API that app developers will us\nflutter_callerid_method_channel.dart \u0026mdash; provides the default implementation (talks to native).\nflutter_callerid_platform_interface.dart \u0026ndash; defines the abstract interface.\nSet up an EventChannel to receive streamed data In this step, need to use a native USB library on each platform to scan and open the CallerID device, then start a background listener that reads the raw bytes continuously. The native layer pushes the parsed phone number upstream via an EventChannel, so Flutter can subscribe to the stream and react in real time.\nWhat happens under the hood (high level):\nUse the platform’s native USB package to enumerate devices and select the CallerID. Open the device and start a background thread to read the incoming data. Parse the raw stream (strip control codes → get a clean number). Emit each parsed number through the EventChannel → Flutter listens and updates the UI / queries the DB. 1\u0026lt;!-- devices_service.dart --\u0026gt; 2 Future\u0026lt;void\u0026gt; _getUSBDevices() async { 3 try { 4 final devices = await FlutterCalleridPlatform.instance.startUsbScan(); 5 List\u0026lt;DeviceModel\u0026gt; usbPrinters = []; 6 for (var map in devices) { 7 final device = DeviceModel( 8 vendorId: map[\u0026#39;vendorId\u0026#39;].toString(), 9 productId: map[\u0026#39;productId\u0026#39;].toString(), 10 name: map[\u0026#39;name\u0026#39;], 11 connectionType: ConnectionType.USB, 12 address: map[\u0026#39;vendorId\u0026#39;].toString(), 13 .... 14 ); 15 usbPrinters.add(device); 16 } 17 18 _devices.addAll(usbPrinters); 19 20 // Start listening to USB events 21 _usbSubscription = _deviceEventChannel.receiveBroadcastStream().listen(( 22 event, 23 ) { 24 final map = Map\u0026lt;String, dynamic\u0026gt;.from(event); 25 _updateOrAddPrinter( 26 DeviceModel( 27 vendorId: map[\u0026#39;vendorId\u0026#39;].toString(), 28 productId: map[\u0026#39;productId\u0026#39;].toString(), 29 name: map[\u0026#39;name\u0026#39;], 30 connectionType: ConnectionType.USB, 31 address: map[\u0026#39;vendorId\u0026#39;].toString(), 32 ... 33 ), 34 ); 35 }); 36 // remove Duplicate deivces 37 _sortDevices(); 38 } catch (e) { 39 log(\u0026#34;$e [USB Connection]\u0026#34;); 40 } 41 } FlutterCalleridPlatform.instance.startUsbScan(); method need to define in flutter_callerid_platform_interface.dart flutter_callerid_method_channel.dart and flutter_callerid.dart\n1 2 3 // flutter_callerid_platform_interface.dart 4 5 Future\u0026lt;dynamic\u0026gt; startUsbScan() { 6 throw UnimplementedError(\u0026#39;startUsbScan() has not been implemented.\u0026#39;); 7 } 8 9 // flutter_callerid_method_channel.dart 10 @override 11 Future\u0026lt;dynamic\u0026gt; startUsbScan() async { 12 return await methodChannel.invokeMethod(\u0026#39;getAvailableDevices\u0026#39;); 13 } 14 15 16 // flutter_callerid.dart, you can ignore cloudPrinterNum and androidUsesFineLocation, this is for my printer scanning 17 18 Future\u0026lt;void\u0026gt; getDevices({ 19 List\u0026lt;ConnectionType\u0026gt; connectionTypes = const [ConnectionType.USB], 20 bool androidUsesFineLocation = false, 21 int cloudPrinterNum = 1, 22 }) async { 23 DevicesService().getDevices( 24 connectionTypes: connectionTypes, 25 androidUsesFineLocation: androidUsesFineLocation, 26 cloudPrinterNum: cloudPrinterNum, 27 ); 28 } In the Android side, define method in onMethodCall to get usb devices\n1 @Override 2 public void onMethodCall(@NonNull MethodCall call, @NonNull MethodChannel.Result result) { 3 switch (call.method) { 4 case \u0026#34;getAvailableDevices\u0026#34;: 5 result.success(flutterCallerIdMethod.getUsbDevicesList()); 6 break; 7 .... 8 } 9 } Connet the device 1 2 3 // flutter_callerid_platform_interface.dart 4 Future\u0026lt;bool\u0026gt; connectToHidDevice(String vid, String pid) { 5 throw UnimplementedError(\u0026#39;connectToHidDevice() has not been implemented.\u0026#39;); 6 } 7 8 // flutter_callerid_method_channel.dart 9 @override 10 Future\u0026lt;bool\u0026gt; connectToHidDevice(String vid, String pid) async { 11 return await methodChannel.invokeMethod(\u0026#39;connectToHidDevice\u0026#39;, {\u0026#39;vendorId\u0026#39;: vid, \u0026#39;productId\u0026#39;: pid}); 12 } 13 14 // flutter_callerid.dart, callerID is HID device 15 /// Connect to a specific HID device by device ID 16 Future\u0026lt;bool\u0026gt; connectToHidDevice(DeviceModel device) async { 17 return await DevicesService().connect(device); 18 } In the Android side, define method in onMethodCall to connect HID device\n1 @Override 2 public void onMethodCall(@NonNull MethodCall call, @NonNull MethodChannel.Result result) { 3 switch (call.method) { 4 case \u0026#34;connectToHidDevice\u0026#34;: { 5 String vendorId = call.argument(\u0026#34;vendorId\u0026#34;); 6 String productId = call.argument(\u0026#34;productId\u0026#34;); 7 flutterCallerIdMethod.connect(vendorId, productId); 8 result.success(false); 9 break; 10 } 11 .... 12 } 13 } FlutterCallerIdMethod.java Implementation here. Usb device will pop the syetem connetion dialog when connect in the first time , then it will detect automatically\n1 2 // Connect using VendorId and ProductId 3 public void connect(String vendorId, String productId) { 4 connectionVendorId = vendorId; 5 connectionProductId = productId; 6 UsbManager m = (UsbManager) context.getSystemService(Context.USB_SERVICE); 7 UsbDevice device = findDevice(m, vendorId, productId); 8 9 if (device == null) { 10 AppLogger.d(TAG, \u0026#34;when connect but Device not found.\u0026#34;); 11 return; 12 } 13 14 if (!m.hasPermission(device)) { 15 AppLogger.d(TAG, \u0026#34;Requesting permission for device...\u0026#34;); 16 PendingIntent permissionIntent = PendingIntent.getBroadcast(context, 0, new Intent(ACTION_USB_PERMISSION), PendingIntent.FLAG_IMMUTABLE); 17 m.requestPermission(device, permissionIntent); 18 } else { 19 AppLogger.d(TAG, \u0026#34;Permission already granted. Proceeding.\u0026#34;); 20 sendDevice(device, false); // Proceed directly if permission exists 21 } 22 } Setup the thread for listening data from incoming call Connect the USB device, then launch a background listener thread to read incoming data.\n1 2Class xx{ 3 UsbDevice listeningDevice = null; 4 5 // Method to start listening on the USB device for CallerID data 6 7 public void startListening(String vendorId, String productId) { 8 AppLogger.d(TAG, \u0026#34;Attempting to connect to device...\u0026#34;); 9 10 UsbManager m = (UsbManager) context.getSystemService(Context.USB_SERVICE); 11 UsbDevice currentDevice = null; 12 for (UsbDevice device : m.getDeviceList().values()) { 13 if (String.valueOf(device.getVendorId()).equals(vendorId) \u0026amp;\u0026amp; String.valueOf(device.getProductId()).equals(productId)) { 14 currentDevice = device; 15 break; 16 } 17 } 18 19 if (currentDevice == null) { 20 AppLogger.e(TAG, \u0026#34;No connected device.\u0026#34;); 21 return; 22 } 23 if (!m.hasPermission(currentDevice)) { 24 AppLogger.e(TAG, \u0026#34;No permission for device. Please request it via broadcast.\u0026#34;); 25 return; 26 } 27 listeningDevice = currentDevice; 28 UsbInterface intf = currentDevice.getInterface(0); 29 String deviceType = getDeviceType(intf); 30 AppLogger.d(\u0026#34;USB\u0026#34;, deviceType); 31 32 connection = m.openDevice(currentDevice); 33 if (connection == null) { 34 AppLogger.e(TAG, \u0026#34;Failed to open or claim interface.\u0026#34;); 35 return; 36 } 37 38 mIntf = currentDevice.getInterface(0); 39 if (!connection.claimInterface(mIntf, true)) { 40 AppLogger.e(TAG, \u0026#34;Failed to claim interface.\u0026#34;); 41 return; 42 } 43 44 AppLogger.d(TAG, \u0026#34; Interface Class: \u0026#34; + mIntf.getInterfaceClass()); 45 46 // Dynamically pick endpoints by direction 47 for (int i = 0; i \u0026lt; mIntf.getEndpointCount(); i++) { 48 UsbEndpoint ep = mIntf.getEndpoint(i); 49 if (ep.getDirection() == UsbConstants.USB_DIR_IN) rEndpoint = ep; 50 else if (ep.getDirection() == UsbConstants.USB_DIR_OUT) wEndpoint = ep; 51 AppLogger.d(TAG, \u0026#34;Endpoint #\u0026#34; + i + \u0026#34; type=\u0026#34; + ep.getType() + \u0026#34;, direction=\u0026#34; + (ep.getDirection() == UsbConstants.USB_DIR_IN ? \u0026#34;IN\u0026#34; : \u0026#34;OUT\u0026#34;) + \u0026#34;, address=\u0026#34; + ep.getAddress() + \u0026#34;, maxPacketSize=\u0026#34; + ep.getMaxPacketSize()); 52 } 53 54 55 if (rEndpoint == null) { 56 AppLogger.e(TAG, \u0026#34;No readable endpoint found.\u0026#34;); 57 return; 58 } 59 60 AppLogger.d(TAG, \u0026#34;Claimed interface and endpoints. Starting read loop...\u0026#34;); 61 sendData(\u0026#34;AT+VCID=1\\\\r\u0026#34;); 62 readThread = new Thread(this::readLoop); 63 readThread.start(); 64 reading = true; 65 } 66 67 68 69 // Thread 70 private void readLoop() { 71 byte[] buffer = new byte[64]; 72 73 while (reading) { 74 int len = connection.bulkTransfer(rEndpoint, buffer, buffer.length, TIMEOUT); 75 if (len \u0026gt; 0) { 76 analyzePackage(buffer); 77 } else if (len == -1) { 78 AppLogger.w(TAG, \u0026#34;No data or timeout.\u0026#34;); 79 } 80 Sleep(SLEEP); 81 } 82 } 83 84 85 // Parse data 86 87 private String sDateTime = \u0026#34;\u0026#34;; 88 private String sCaller = \u0026#34;\u0026#34;; 89 private String sCallee = \u0026#34;\u0026#34;; 90 private String sOther = \u0026#34;\u0026#34;; 91 private char sPort = 0; 92 93 private void analyzePackage(byte[] bytes) { 94 try { 95 final String strPackage = composeString(bytes); 96 97 if (strPackage.contains(\u0026#34;ENQ\u0026#34;) ||strPackage.contains(\u0026#34;ETB\u0026#34;)){ 98 sendData(ACK); 99 } 100 else { 101 sendData(DCK); 102 if (testCliPackage(bytes)) { 103 //Pass data to flutter 104 Map\u0026lt;String, Object\u0026gt; callInfo = new HashMap\u0026lt;\u0026gt;(); 105 callInfo.put(\u0026#34;caller\u0026#34;, sCaller); 106 callInfo.put(\u0026#34;callee\u0026#34;, sCallee); 107 callInfo.put(\u0026#34;datetime\u0026#34;, sDateTime); 108 callInfo.put(\u0026#34;port\u0026#34;, String.valueOf(sPort)); 109 if (callerIdEventSink != null) 110 mainHandler.post(() -\u0026gt; callerIdEventSink.success(callInfo)); 111 112 113 } 114 } 115 } catch (Exception e) { 116 } 117 } 118 119 private boolean testCliPackage(byte[] Package) { 120 boolean res = false; 121 try { 122 byte[] portNames = {\u0026#39;A\u0026#39;, \u0026#39;B\u0026#39;, \u0026#39;C\u0026#39;, \u0026#39;D\u0026#39;, \u0026#39;S\u0026#39;}; 123 int[] pckTypes = {0x04, 0x80}; 124 125 byte pPort = Package[0]; 126 int pType = Math.abs((int) Package[1]); 127 int pLen = Math.abs((int) Package[2]); 128 129 if ((pLen \u0026gt; 0) \u0026amp;\u0026amp; (pLen \u0026lt; 65) \u0026amp;\u0026amp; Arrays.binarySearch(portNames, pPort) \u0026gt;= 0 \u0026amp;\u0026amp; Arrays.binarySearch(pckTypes, pType) \u0026gt;= 0) { 130 if (pType == 0x80) { 131 res = parseMDMF(Package); 132 } 133 if (pType == 0x04) { 134 res = parseSDMF(Package); 135 } 136 } 137 } catch (Exception e) { 138 } 139 return res; 140 } 141 142 private boolean parseSDMF(byte[] Package) { 143 int packlength = 0; 144 char theChar = 0; 145 146 try { 147 packlength = Package[2] + 4; 148 sPort = (char) Package[0]; 149 sCaller = \u0026#34;\u0026#34;; 150 sCallee = \u0026#34;\u0026#34;; 151 sDateTime = \u0026#34;\u0026#34;; 152 sOther = \u0026#34;\u0026#34;; 153 154 for (int i = 3; i \u0026lt;= packlength - 2; i++) { 155 if (i \u0026lt; Package.length) { 156 theChar = (char) Package[i]; 157 if (i \u0026lt; 11) { 158 sDateTime = sDateTime + (char) Package[i]; 159 } else { 160 sCaller = sCaller + theChar; 161 } 162 } 163 } 164 } catch (Exception e) { 165 } 166 167 return (!enableCheckDigitControl || testCheckDigit(Package)); 168 } 169 170 private boolean parseMDMF(byte[] Package) { 171 int packlength = 0; 172 int datalength = 0; 173 char theChar = 0; 174 int i; 175 176 try { 177 packlength = Package[2] + 4; 178 sPort = (char) Package[0]; 179 sCaller = \u0026#34;\u0026#34;; 180 sCallee = \u0026#34;\u0026#34;; 181 sDateTime = \u0026#34;\u0026#34;; 182 sOther = \u0026#34;\u0026#34;; 183 184 if (packlength \u0026gt; Package.length) { 185 packlength = Package.length; 186 } 187 188 if (packlength \u0026gt; 0) { 189 i = 3; 190 datalength = 0; 191 while (i \u0026lt; Package.length) { 192 if (Package[i] == 1) // Date Field 193 { 194 i++; 195 if (i \u0026lt; packlength - 1) { 196 datalength = Package[i]; 197 if (datalength != 8) datalength = 8; 198 if (datalength == 8) { 199 while ((datalength \u0026gt; 0) \u0026amp;\u0026amp; (datalength \u0026lt; packlength)) { 200 i++; 201 theChar = (char) Package[i]; 202 sDateTime = sDateTime + theChar; 203 datalength--; 204 } 205 } 206 } 207 } else if (Package[i] == 2) // Number Field 208 { 209 i++; 210 if (i \u0026lt; packlength - 1) { 211 datalength = Package[i]; 212 if (datalength \u0026gt; (packlength - i - 1)) 213 datalength = (packlength - i - 1); 214 while ((datalength \u0026gt; 0) \u0026amp;\u0026amp; (datalength \u0026lt; packlength)) { 215 i++; 216 theChar = (char) Package[i]; 217 sCaller = sCaller + theChar; 218 datalength--; 219 } 220 } 221 } else if (Package[i] == 34) //Callee field 222 { 223 // Other Fields 224 i++; 225 if (i \u0026lt; packlength - 1) { 226 datalength = Package[i]; 227 while ((datalength \u0026gt; 0) \u0026amp;\u0026amp; (datalength \u0026lt; packlength)) { 228 i++; 229 theChar = (char) Package[i]; 230 sCallee = sCallee + theChar; 231 datalength--; 232 } 233 } 234 } else { 235 // Other Fields 236 i++; 237 if (i \u0026lt; packlength - 1) { 238 datalength = Package[i]; 239 while ((datalength \u0026gt; 0) \u0026amp;\u0026amp; (datalength \u0026lt; packlength)) { 240 i++; 241 theChar = (char) Package[i]; 242 sOther = sOther + theChar; 243 datalength--; 244 } 245 } 246 } 247 i++; 248 } 249 } 250 } catch (Exception e) { 251 } 252 253 return (!enableCheckDigitControl || testCheckDigit(Package)); 254 } 255 256 private static final boolean enableCheckDigitControl = true; 257 258 private static boolean testCheckDigit(byte[] inputReport) { 259 int pLen = 0; 260 int cDigit = 123; 261 int pDigit = 0; 262 263 try { 264 pLen = inputReport[2] + 3; 265 cDigit = inputReport[pLen] \u0026amp; 255; 266 for (int i = 1; i \u0026lt; pLen; i++) 267 pDigit = (pDigit + Math.abs((int) inputReport[i] \u0026amp; 255)) \u0026amp; 255; 268 pDigit = Math.abs((int) (0x100 - pDigit)) \u0026amp; 255; 269 } catch (Exception e) { 270 } 271 272 return pDigit == cDigit; 273 } 274 275 private String composeString(byte[] bytes) { 276 String strPackage = \u0026#34;\u0026#34;; 277 278 try { 279 StringBuilder builder = new StringBuilder(); 280 for (byte b : bytes) { 281 if (b \u0026gt; 0) { 282 char c = (char) b; 283 builder.append(c); 284 } 285 } 286 strPackage = builder.toString(); 287 } catch (Exception e) { 288 } 289 290 return strPackage; 291 } 292 293 294 private void Sleep(int milliseconds) { 295 try { 296 Thread.sleep(milliseconds); 297 } catch (InterruptedException e) { 298 e.printStackTrace(); 299 } 300 } 301} Logic in Your flutter app Connect the CallerID device → start the listener → receive the stream data → process it according to your business logic.\n1 // Import package 2 3import \u0026#39;package:flutter_callerid/model/usb_device_model.dart\u0026#39; as callerid; 4 5class YourClassName { 6 7 final _flutterCalleridPlugin = FlutterCallerid(); 8 StreamSubscription\u0026lt;Map\u0026lt;String, dynamic\u0026gt;\u0026gt;? _callerIdStreamSubscription; 9 StreamSubscription\u0026lt;List\u0026lt;callerid.DeviceModel\u0026gt;\u0026gt;? _devicesStreamSubscription; 10 11 callerid.DeviceModel? _connectedCallerIdDevice; 12 List\u0026lt;callerid.ConnectionType\u0026gt; getScanConnectionType() { 13 return [ 14 \u0026lt;!-- callerid.ConnectionType.BLE, --\u0026gt; 15 callerid.ConnectionType.USB, 16 \u0026lt;!-- callerid.ConnectionType.NETWORK, --\u0026gt; 17 ]; 18 } 19 // Method Strat Scan devices 20 Future\u0026lt;void\u0026gt; startScan() async { 21 _devices = []; 22 await _devicesStreamSubscription?.cancel(); 23 await _flutterCalleridPlugin.getDevices( 24 connectionTypes: getScanConnectionType()); 25 _devicesStreamSubscription = _flutterCalleridPlugin.devicesStream.listen((List\u0026lt;callerid.DeviceModel\u0026gt; event) { 26 // Only keep devices with a non-empty name containing \u0026#39;caller\u0026#39; 27 _devices = event 28 .where((element) =\u0026gt; 29 (element.name?.isNotEmpty ?? false) \u0026amp;\u0026amp; 30 ((element.name?.toLowerCase().contains(\u0026#39;caller\u0026#39;) ?? false))) 31 .toList(); 32 _devices = _devices.where((element) =\u0026gt; element.isRemove == null || element.isRemove == false).toList(); 33 }); 34 } 35 36 37 Future\u0026lt;void\u0026gt; onConnectedCallerId(callerid.DeviceModel findDevice) async { 38 bool res = await _flutterCalleridPlugin.connectToHidDevice(findDevice); 39 if (res) { 40 _connectedCallerIdDevice = findDevice; 41 await startListening(); 42 } 43 } 44 Future\u0026lt;void\u0026gt; startListening() async { 45 _callerIdStreamSubscription?.cancel(); 46 47 // stream 48 _callerIdStreamSubscription = _flutterCalleridPlugin.callerIdStream.listen((callInfo) async { 49 // Recive data from the plugin 50 51 // Your own logic to parse Map to Model , and search from DB 52 CallerIdModel callerIdModel = CallerIdModel.fromJson(callInfo); 53 if (callerIdModel.caller == null || (callerIdModel.caller ?? \u0026#34;\u0026#34;).isEmpty) { 54 return; 55 } 56 YOUR_OWN_HANDLE_MTHOD(callerIdModel); 57 58 59 }); 60 await _flutterCalleridPlugin.startListening(_connectedCallerIdDevice!); 61 } 62 63 64} 65 My logic is straightforward: as soon as the number comes in, I look it up in the database and show the result inside a draggable overlay card.\nRepo Source Code https://github.com/Amber916Young/flutter_callerID\nThis repo actually combines CallerID and printer support (USB/WiFi/BLE), which is why it covers quite a lot of things.\nBut the core idea is really simple:\nConnect the device over USB Start a thread to listen for incoming data from the landline Parse the raw stream Return the clean phone number back to Flutter That’s the essential flow. Everything else is just implementation details that vary depending on your hardware and platform.\n", 
            "url": "https:\/\/hupochuanbird.github.io\/posts\/callerid_flutter\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/posts\/": {
            "title": "Posts",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/posts\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/tutorial\/": {
            "title": "Tutorial",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/tutorial\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/usb-deivces\/": {
            "title": "Usb Deivces",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/usb-deivces\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/posts\/flutter-drift-localdb\/": {
            "title": "Building Offline-Ready Apps with Flutter Drift: My Experience",
            "tags": ["flutter","drift",],
            "content": "has been long time didnt write any article, working hardly, code and system design\nOur clients hope the system can keep running offline—some areas have no network at all, and others have very unstable connections. This requirement made us rethink our whole data storage approach for the project. We needed something robust enough to handle offline reads and writes, and smart enough to sync changes whenever the network returns.\nIntro After researching various options, we landed on Drift as our local database solution for Flutter. Drift (formerly known as Moor) offers powerful features like type-safe queries, auto-updating streams, and easy schema migrations, making it a great fit for apps that need to perform reliably—online and offline.\nTo address this, our Flutter system includes:\nA network real-time checker: It constantly monitors connectivity status to smartly switch between online and offline modes. Cloud sync (download/upload): Data created or updated locally is synced to the cloud when connectivity is restored, while server-side changes are downloaded for local use. Background Task: Sync local orders in midnight. smart data retrieval strategy: The app decides whether to fetch data from the cloud or local database based on the current network state, giving users a seamless experience regardless of connection quality. In this blog, I’ll walk through my implementing offline-first data persistence with Drift, BTW, I use MVVM pattern.\nWhy Chose Drift for Flutter For our offline-first Flutter app, we needed a local database solution that was:\nReliable Type-safe Reactive Easy to maintain After comparing options like sqflite, Isar, we chose Drift because it offers:\nQueries return Streams that automatically notify the UI of data changes, making real-time updates seamless. With clear separation between tables, DAOs, and database logic, it fits perfectly into a clean architecture. Manual Migration Control Getting Started with Drift Here is the folder structure:\n1 2 3 4 5 core/ ├── database/ │ ├── dao/ \u0026lt;- Each table’s DAO (query logic) │ ├── table/ \u0026lt;- Table definitions (Drift Tables) │ └── app_database.dart \u0026lt;- Central database and migration logic Modular: Easy to scale as new tables are added. Readable: Each concern (schema vs logic) is isolated. Testable: DAOs and migrations can be tested independently. Setting Up AppDatabase 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 import \u0026#39;package:drift/drift.dart\u0026#39;; import \u0026#39;package:drift/native.dart\u0026#39;; import \u0026#39;dart:io\u0026#39;; import \u0026#39;package:path_provider/path_provider.dart\u0026#39;; import \u0026#39;package:path/path.dart\u0026#39; as p; ..... part \u0026#39;app_database.g.dart\u0026#39;; @DriftDatabase( tables: [SystemConfig, PosUser, PosOrder, ...], daos: [SystemConfigDao, PosUserDao, PosOrderDao, ...], ) class AppDatabase extends _$AppDatabase { AppDatabase() : super(_openConnection()); @override int get schemaVersion =\u0026gt; 1; @override MigrationStrategy get migration =\u0026gt; MigrationStrategy( onCreate: (m) async { await m.createAll(); }, onUpgrade: (m, from, to) async { print(\u0026#39;Upgrading DB from $from to $to...\u0026#39;); }, ); } LazyDatabase _openConnection() { return LazyDatabase(() async { final dir = await getApplicationDocumentsDirectory(); final file = File(p.join(dir.path, \u0026#39;your_db_name.sqlite\u0026#39;)); print(file.path); return NativeDatabase(file); }); } In this file, we define the core AppDatabase class that serves as the entry point to all Drift tables and DAOs.\nDeclare Tables \u0026amp; DAOs Implement schemaVersion Define MigrationStrategy Set Up LazyDatabase The app_database.g.dart file is initially empty or missing. This is normal. It will be auto-generated once you run the Drift code generator using the following command:\n1 flutter pub run build_runner build --delete-conflicting-outputs DAO and Table To keep our codebase organized and scalable, we separate each table and its corresponding query logic into two dedicated folders: table/ and dao/.\nDrift Table Definitions (table/) 1class PosOrder extends Table { 2 @override 3 String get tableName =\u0026gt; \u0026#39;xxxx\u0026#39;; // you can overwrite the table name 4 5 IntColumn get id =\u0026gt; integer().autoIncrement()(); 6 TextColumn get orderCode =\u0026gt; text()(); 7 RealColumn get orderAmount =\u0026gt; real().withDefault(const Constant(0.00))(); 8 TextColumn get paymentStatus =\u0026gt; text().withDefault(const Constant(\u0026#39;unpaid\u0026#39;))(); 9 TextColumn get orderStatus =\u0026gt; text().withDefault(const Constant(\u0026#39;pending\u0026#39;))(); 10 RealColumn get totalTaxAmount =\u0026gt; real().withDefault(const Constant(0.00))(); 11 TextColumn get paymentMethod =\u0026gt; text().nullable()(); 12 TextColumn get orderNote =\u0026gt; text().nullable()(); 13 TextColumn get orderType =\u0026gt; text().withDefault(const Constant(\u0026#39;delivery\u0026#39;))(); 14 TextColumn get deliveryDate =\u0026gt; text().nullable()(); 15 TextColumn get deliveryTime =\u0026gt; text().nullable()(); 16.... 17 TextColumn get customer =\u0026gt; text().nullable()(); // snapshot 18 TextColumn get customerAddress =\u0026gt; text().nullable()(); // snapshot 19 DateTimeColumn get createdAt =\u0026gt; dateTime().nullable()(); 20 IntColumn get customerId =\u0026gt; integer().nullable()(); 21} DAO Classes (dao/) DAOs (Data Access Objects) contain the read/write/query(CRUD) logic for each table.\n1// dao/pos_order_dao.dart 2@DriftAccessor(tables: [PosOrder]) 3class PosOrderDao extends DatabaseAccessor\u0026lt;AppDatabase\u0026gt; with _$PosOrderDaoMixin { 4 PosOrderDao(AppDatabase db) : super(db); 5 6 Future\u0026lt;List\u0026lt;PosOrderData\u0026gt;\u0026gt; getAllOrders() =\u0026gt; select(posOrder).get(); 7 8 Stream\u0026lt;List\u0026lt;PosOrderData\u0026gt;\u0026gt; watchAllOrders() =\u0026gt; select(posOrder).watch(); 9 10 Future\u0026lt;int\u0026gt; insertOrder(PosOrderCompanion order) =\u0026gt; into(posOrder).insert(order); 11 12 Future\u0026lt;bool\u0026gt; updateOrder(PosOrderCompanion order) =\u0026gt; update(posOrder).replace(order); 13 14 Future\u0026lt;int\u0026gt; deleteOrderById(int id) =\u0026gt; 15 (delete(posOrder)..where((t) =\u0026gt; t.id.equals(id))).go(); 16} Notes:\nwatch() enables reactive UI updates (ideal for Flutter) Using Companion classes allows partial inserts and updates Any class like SystemConfigData, PosOrderData, or PosUserData is not something you write manually — it’s automatically generated by Drift\u0026rsquo;s code generator based on your table definitions.\nSo if you see a red underline or “undefined class” error in your IDE when you first reference something like PosOrderData, don’t panic — this is normal. Just Run\n1 flutter pub run build_runner build --delete-conflicting-outputs Comes Together In app_database.dart\n1@DriftDatabase( 2 tables: [PosOrder, ...], 3 daos: [PosOrderDao, ...], 4) And run that CLI, Generate the app_database.g.dart file\nMigrations and Schema Changes As your app grows, so will your database. New features often require adding tables, columns, or modifying constraints. In Flutter Drift, migrations ensure that existing users’ data stays safe and usable when schema changes occur.\nWe handled this using Drift’s built-in MigrationStrategy in app_database.dart. We override the migration getter to define both onCreate and onUpgrade logic:\n1@override 2MigrationStrategy get migration =\u0026gt; MigrationStrategy( 3 onCreate: (m) async { 4 await m.createAll(); 5 }, 6 onUpgrade: (m, from, to) async { 7 print(\u0026#39;Upgrading DB from $from to $to...\u0026#39;); 8 .... 9 if (from == 7 \u0026amp;\u0026amp; to == 8) { 10 await m.createTable(xxxx); 11 } 12 13 if (from == 8 \u0026amp;\u0026amp; to == 9) { 14 await m.alterTable(TableMigration(user)); 15 await m.alterTable(TableMigration(address)); 16 try { 17 //Check if \u0026#39;counter\u0026#39; already exists in \u0026#39;order\u0026#39; 18 await m.alterTable(TableMigration( 19 order, 20 columnTransformer: { 21 order.counter: const CustomExpression(\u0026#39;NULL\u0026#39;), 22 }, 23 newColumns: [order.counter], 24 )); 25 } catch (e) { 26 if (kDebugMode) { 27 print(\u0026#34;Column \u0026#39;counter\u0026#39; may already exist: $e\u0026#34;); 28 } 29 } 30 } 31 }, 32); ⚠️ Tips\nAlways increment schemaVersion when making schema changes: 1@override 2int get schemaVersion =\u0026gt; 2; Avoid dropping tables/columns without backups. Drift doesn’t support dropping columns directly, so you need to: Create a new table Migrate old data manually Drop the old table after verification Use conditionals (if (from == x \u0026amp;\u0026amp; to == y)) for clarity. Log everything in onUpgrade In Dev Env(DONT USE IN PROD ENV), we can easily reset DB\n1await deleteDatabase(file.path); // only for development! ", 
            "url": "https:\/\/hupochuanbird.github.io\/posts\/flutter-drift-localdb\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/drift\/": {
            "title": "Drift",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/drift\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/galway\/": {
            "title": "Galway",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/galway\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/gallery\/galway-2024-xmas\/": {
            "title": "Galway 2024 Xmas",
            "tags": ["Galway","Xmas",],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/gallery\/galway-2024-xmas\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/categories\/travel\/": {
            "title": "Travel",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/categories\/travel\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/xmas\/": {
            "title": "Xmas",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/xmas\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/array\/": {
            "title": "Array",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/array\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/categories\/leetcode\/": {
            "title": "Leetcode",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/categories\/leetcode\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/matrix\/": {
            "title": "Matrix",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/matrix\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/posts\/maximum-sum-of-an-hourglass\/": {
            "title": "Maximum Sum of an Hourglass",
            "tags": ["Array","Matrix","Prefix Sum",],
            "content": "【2428】Maximum Sum of an Hourglass Medium You are given an m x n integer matrix grid.\nWe define an hourglass as a part of the matrix with the following form:\nReturn the maximum sum of the elements of an hourglass.\nNote that an hourglass cannot be rotated and must be entirely contained within the matrix.\nExample 1:\nInput: grid = [[6,2,1,3],[4,2,1,5],[9,2,8,7],[4,1,2,9]] Output: 30 Explanation: The cells shown above represent the hourglass with the maximum sum: 6 \u0026#43; 2 \u0026#43; 1 \u0026#43; 2 \u0026#43; 9 \u0026#43; 2 \u0026#43; 8 = 30. Example 2:\nInput: grid = [[1,2,3],[4,5,6],[7,8,9]] Output: 35 Explanation: There is only one hourglass in the matrix, with the sum: 1 \u0026#43; 2 \u0026#43; 3 \u0026#43; 5 \u0026#43; 7 \u0026#43; 8 \u0026#43; 9 = 35. Constraints:\nm == grid.length n == grid[i].length 3 \u0026lt;= m, n \u0026lt;= 150 0 \u0026lt;= grid[i][j] \u0026lt;= 106 💡Solution very easy question but a little bit tricky.\n1public int maxSum(int[][] grid) { 2 int row = grid.length; 3 int col = grid[0].length; 4 int sum = 0; 5 for(int i =0;i\u0026lt; row -2 ;i++){ 6 for(int j =0;j\u0026lt; col - 2 ;j++){ 7 int count = 0; 8 count = grid[i][j] + grid[i][j + 1] + grid[i][j + 2] + grid[i + 1][j + 1] 9 + grid[i + 2][j] + grid[i + 2][j + 1] + grid[i + 2][j + 2]; 10 sum = Math.max(sum,count); 11 } 12 } 13 return sum; 14} 🔗 Refer links https://leetcode.com/problems/maximum-sum-of-an-hourglass/description/\n", 
            "url": "https:\/\/hupochuanbird.github.io\/posts\/maximum-sum-of-an-hourglass\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/prefix-sum\/": {
            "title": "Prefix Sum",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/prefix-sum\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/posts\/find-players-with-zero-or-one-losses\/": {
            "title": "Find Players With Zero or One Losses",
            "tags": ["Medium","Array","Hash Table","Sort",],
            "content": "【2225】Find Players With Zero or One Losses Medium You are given an integer array matches where matches[i] = [winneri, loseri] indicates that the player winneri defeated player loseri in a match.\nReturn a list answer of size 2 where:\nanswer[0] is a list of all players that have not lost any matches. answer[1] is a list of all players that have lost exactly one match. The values in the two lists should be returned in increasing order.\nNote:\nYou should only consider the players that have played at least one match. The testcases will be generated such that no two matches will have the same outcome. Example 1:\nInput: matches = [[1,3],[2,3],[3,6],[5,6],[5,7],[4,5],[4,8],[4,9],[10,4],[10,9]] Output: [[1,2,10],[4,5,7,8]] Explanation: Players 1, 2, and 10 have not lost any matches. Players 4, 5, 7, and 8 each have lost one match. Players 3, 6, and 9 each have lost two matches. Thus, answer[0] = [1,2,10] and answer[1] = [4,5,7,8]. Example 2:\nInput: matches = [[2,3],[1,3],[5,4],[6,4]] Output: [[1,2,5,6],[]] Explanation: Players 1, 2, 5, and 6 have not lost any matches. Players 3 and 4 each have lost two matches. Thus, answer[0] = [1,2,5,6] and answer[1] = []. Constraints:\n1 \u0026lt;= matches.length \u0026lt;= 105 matches[i].length == 2 1 \u0026lt;= winneri, loseri \u0026lt;= 105 winneri != loseri All matches[i] are unique. 💡Solution 1 public List\u0026lt;List\u0026lt;Integer\u0026gt;\u0026gt; findWinners(int[][] matches) { 2 Map\u0026lt;Integer,Integer\u0026gt; losers = new HashMap\u0026lt;\u0026gt;(); 3 Set\u0026lt;Integer\u0026gt; winners = new TreeSet\u0026lt;\u0026gt;(); 4 List\u0026lt;List\u0026lt;Integer\u0026gt;\u0026gt; ans = new ArrayList\u0026lt;\u0026gt;(); 5 for(int[] tmp : matches){ 6 int win = tmp[0]; 7 int lose = tmp[1]; 8 winners.add(win); 9 losers.put(lose,losers.getOrDefault(lose,0)+1); 10 } 11 12 Set\u0026lt;Integer\u0026gt; loses = new TreeSet\u0026lt;\u0026gt;(); 13 for(Map.Entry\u0026lt;Integer,Integer\u0026gt; map : losers.entrySet()){ 14 int lose = map.getKey(); 15 winners.remove(lose); 16 if(map.getValue() == 1){ 17 loses.add(lose); 18 } 19 } 20 ans.add( new ArrayList\u0026lt;\u0026gt;(winners)); 21 ans.add( new ArrayList\u0026lt;\u0026gt;(loses)); 22 return ans; 23 } 🔗 Refer links https://leetcode.com/problems/find-players-with-zero-or-one-losses/description/\n", 
            "url": "https:\/\/hupochuanbird.github.io\/posts\/find-players-with-zero-or-one-losses\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/hash-table\/": {
            "title": "Hash Table",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/hash-table\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/medium\/": {
            "title": "Medium",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/medium\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/sort\/": {
            "title": "Sort",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/sort\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/posts\/leetcode-checkifrccontainsallnumber\/": {
            "title": "Check if Every Row and Column Contains All Numbers",
            "tags": ["Array",],
            "content": "💙 【2133】Check if Every Row and Column Contains All Numbers easy An n x n matrix is valid if every row and every column contains all the integers from 1 to n (inclusive).\nGiven an n x n integer matrix matrix, return true if the matrix is valid. Otherwise, return false.\nExample 1:\nInput: matrix = [[1,2,3],[3,1,2],[2,3,1]] Output: true Explanation: In this case, n = 3, and every row and column contains the numbers 1, 2, and 3. Hence, we return true. Example 2:\nInput: matrix = [[1,1,1],[1,2,3],[1,2,3]] Output: false Explanation: In this case, n = 3, but the first row and the first column do not contain the numbers 2 or 3. Hence, we return false. Constraints:\nn == matrix.length == matrix[i].length 1 \u0026lt;= n \u0026lt;= 100 1 \u0026lt;= matrix[i][j] \u0026lt;= n 📝个人分析 如果每一行和每一列包含从1到n（包括1到n）的所有整数，则nxn矩阵有效。 给定一个nxn整数矩阵，如果该矩阵有效，则返回true。否则，返回false。\n矩阵行列相等，按照常规循环。这里使用HashSet来记录是否存在重复值。Set不会存入相同的内容，每次循环检查set长度是否与矩阵行或者列相等。\n💡Solution 1 public boolean checkValid(int[][] matrix) { 2 int n = matrix.length; 3 for(int i = 0;i\u0026lt;n;i++){ 4 Set\u0026lt;Integer\u0026gt; row = new HashSet\u0026lt;\u0026gt;(); 5 Set\u0026lt;Integer\u0026gt; col = new HashSet\u0026lt;\u0026gt;(); 6 for(int j = 0;j\u0026lt;n;j++){ 7 row.add(matrix[i][j]); 8 col.add(matrix[j][i]); 9 } 10 if(row.size() != n || col.size() != n)return false; 11 } 12 return true; 13 } 🔗 Refer links https://leetcode.com/problems/check-if-every-row-and-column-contains-all-numbers/\n", 
            "url": "https:\/\/hupochuanbird.github.io\/posts\/leetcode-checkifrccontainsallnumber\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/bitbucket\/": {
            "title": "Bitbucket",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/bitbucket\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/posts\/bitbucket-pipeline-docker-image-in-aws-ecr\/": {
            "title": "Bitbucket Pipeline for Docker Image Deployment to AWS ECR",
            "tags": ["Bitbucket",],
            "content": "Diagram The diagram illustrates a Bitbucket pipeline setup for deploying Docker images to AWS Elastic Container Registry (ECR).\nPipeline.yaml - Contains the Bitbucket pipeline configuration script, defining steps for building, testing, and deploying the Docker image. Dockerfile - Specifies the instructions for building the Docker image. Bitbucket - The repository where the source code and pipeline configuration reside. Bitbucket Pipeline - Executes the pipeline steps as defined in Pipeline.yaml. AWS ECR - The target registry where the Docker image is pushed and stored after deployment. Create a Repo in AWS ECR Navigate to AWS ECR Create a repository Memorise the URI(need set permission for this repo) Create a docker image which contains all the env your project needed In my case, the environment I need includes Python 3.10.3, along with the packages boto3 (for AWS), os, json, and yaml.\nTo Retrieve OpenID Connect (OIDC) information in Bitbucket Navigate to Bitbucket [Repository Settings] Click [OpenID Connect], Memorises Identity provider URL and Audience Set up an IAM role and assign permissions to allow pulling and retrieving Docker images Create Identity Provider Navigate to AWS IAM Create Identity Provider, copy paste the Provider URL and Audience. Then [Add provider] Create IMA Role Navigate to AWS IAM Click [Create Role] Assign permissions After finish the creation, Navigate to this role\u0026rsquo;s detail page, Click [Add Permissions] Here is the yaml file looks like, Resource should be ECR URI\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 { \u0026#34;Version\u0026#34;: \u0026#34;2012-10-17\u0026#34;, \u0026#34;Statement\u0026#34;: [ { \u0026#34;Sid\u0026#34;: \u0026#34;GetAuthorizationToken\u0026#34;, \u0026#34;Effect\u0026#34;: \u0026#34;Allow\u0026#34;, \u0026#34;Action\u0026#34;: [ \u0026#34;ecr:GetAuthorizationToken\u0026#34; ], \u0026#34;Resource\u0026#34;: \u0026#34;*\u0026#34; }, { \u0026#34;Sid\u0026#34;: \u0026#34;ReadRepositoryContents\u0026#34;, \u0026#34;Effect\u0026#34;: \u0026#34;Allow\u0026#34;, \u0026#34;Action\u0026#34;: [ \u0026#34;ecr:BatchCheckLayerAvailability\u0026#34;, \u0026#34;ecr:GetDownloadUrlForLayer\u0026#34;, \u0026#34;ecr:GetRepositoryPolicy\u0026#34;, \u0026#34;ecr:DescribeRepositories\u0026#34;, \u0026#34;ecr:ListImages\u0026#34;, \u0026#34;ecr:DescribeImages\u0026#34;, \u0026#34;ecr:BatchGetImage\u0026#34; ], \u0026#34;Resource\u0026#34;: \u0026#34;arn:aws:ecr:us-east-1:URI\u0026#34; } ] } Write a pipeline to upload docker image to AWS ECR Navigate to bitbucket Click [Deployments], setup AWS_ACCESS_KEY_ID and AWS_SECRET_ACCESS_KEY which should download from IAM created before. and what the code of pipeline, very simple\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 options: docker: true pipelines: default: - step: services: - docker caches: - docker name: Build and Push Docker Image to ECR script: # Push the Docker image to Amazon ECR - docker build -t $ECR_IMAGE_NAME:$BITBUCKET_COMMIT -f ./Dockerfile . - pipe: atlassian/aws-ecr-push-image:2.4.2 variables: AWS_ACCESS_KEY_ID: \u0026#34;$AWS_ACCESS_KEY_ID\u0026#34; AWS_SECRET_ACCESS_KEY: \u0026#34;$AWS_SECRET_ACCESS_KEY\u0026#34; AWS_DEFAULT_REGION: \u0026#34;$AWS_REGION\u0026#34; IMAGE_NAME: \u0026#34;$ECR_IMAGE_NAME\u0026#34; Ref https://support.atlassian.com/bitbucket-cloud/docs/use-aws-ecr-images-in-pipelines-with-openid-connect/\n", 
            "url": "https:\/\/hupochuanbird.github.io\/posts\/bitbucket-pipeline-docker-image-in-aws-ecr\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/categories\/tutorial\/": {
            "title": "Tutorial",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/categories\/tutorial\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/aws\/": {
            "title": "AWS",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/aws\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/namecheap\/": {
            "title": "Namecheap",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/namecheap\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/ssl\/": {
            "title": "SSL",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/ssl\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/posts\/ssl-config-in-ec2-namecheap\/": {
            "title": "SSL Configration in Ec2 Namecheap",
            "tags": ["Namecheap","AWS","SSL",],
            "content": " In this section, I will show you how to config the SSL in Namecheap and AWS EC2.\nPreparation Buy a domain name Buy a SSL certificate Generate a key and csr file Config the SSL in Namecheap Config the SSL in AWS EC2 ubuntu Buy a domain name Go to Namecheap and buy a domain name.\nBuy a SSL certificate Go to Dashboard -\u0026gt; SSL Certificates -\u0026gt; Buy SSL Certificates.\nGenerate a key and csr file Go to csrgenerator.com and generate a key and csr file. You can use online tools to generate the key and csr file. or the following command in Mac:\n1 openssl req -new -newkey rsa:2048 -nodes -keyout yoursite.key -out yoursite.csr Config the SSL in Namecheap Go to SSL Certificates page and click \u0026ldquo;Reissue\u0026rdquo; or \u0026ldquo;Issue\u0026rdquo; in the \u0026ldquo;SSL Certificates\u0026rdquo; section. Paste the csr file content into the \u0026ldquo;CSR\u0026rdquo; field. Then click \u0026ldquo;Next\u0026rdquo; button. Wait for a while, you will see the SSL certificate is ready.\nThen, Go to the \u0026ldquo;Domains List\u0026rdquo; \u0026ndash;\u0026gt; \u0026ldquo;Manage\u0026rdquo; \u0026ndash;\u0026gt; \u0026ldquo;Advanced DNS\u0026rdquo; \u0026ndash;\u0026gt; \u0026ldquo;Manage\u0026rdquo; \u0026ndash;\u0026gt; \u0026ldquo;SSL Certificates\u0026rdquo;.\nIn my case, I config www, www.site as the domain name. The most important thing is to add \u0026ldquo;CNAME Record\u0026rdquo; for the domain name. If the domain name abc.xxx.com, the Host ofCNAME Record is should be \u0026ldquo;_0fxxxd.abc\u0026rdquo;, if the domian name you want to config is www.xxx.com, the Host ofCNAME Record is should be \u0026ldquo;_0fxxxd.\u0026rdquo; Don\u0026rsquo;t forgot the \u0026ldquo;.\u0026rdquo;.\nWhere to find the CNAME Record In the \u0026ldquo;SSL Certificate\u0026rdquo; section, you can see this page and this is the place to get CNAME Record.\nOnce you add the CNAME Record, wait for a while, the status of the SSL certificate will be changed from \u0026ldquo;Pending Validation\u0026rdquo; to \u0026ldquo;Verfiy\u0026rdquo; which me you can see [download] button in SSL Certificates page.\nDownload the SSL certificate in SSL Certificates page. Last step is to config the SSL in AWS EC2.\nConfig the SSL in AWS EC2 Log in to EC2. If this is the first time configuring, you\u0026rsquo;ll need to create a folder yourself to store the SSL files.\n1 sudo mkdir /etc/ssl/ Create three files in this folder: certificate.ca-bundle, certificate.crt, and certificate.key(private key). The command is:\n1 2 3 touch certificate.ca-bundle touch certificate.crt touch certificate.key Open the files downloaded from Namecheap using a text editor, copy the corresponding content into the respective files, and save them. You may find that there is no .key file, but in fact, the key file was already generated when you first created the CSR (Certificate Signing Request)\u0026rsquo;s PRIVATE KEY.\nConfigure under the apache2 folder 1 2 3 cd /etc/apache2/sites-available ls cat 000-default.conf In 000-default.conf file: ServerName and ServerAlias should be the domain name you want to config. abc is sub domain name of xxx.com.\nIn my case, I only want to use visit the site by https://abc.xxx.com, so I need to add the following content into the 000-default.conf file.\n1\u0026lt;VirtualHost *:443\u0026gt; 2ServerAdmin admin@example.com 3DocumentRoot /var/www/html/forum/public 4ServerName abc.xxx.com 5ServerAlias abc.xxx.com 6 7\u0026lt;Directory /var/www/html/forum/public/\u0026gt; 8Options FollowSymLinks 9AllowOverride All 10Require all granted 11\u0026lt;/Directory\u0026gt; 12 13\u0026lt;IfModule mod_rewrite.c\u0026gt; 14RewriteEngine On 15RewriteCond %{HTTP_HOST} !^abc\\.xxx\\.com$ [NC] 16RewriteRule ^ - [F] 17\u0026lt;/IfModule\u0026gt; 18 19SSLEngine on 20RewriteCond %{HTTPS} !=on 21RewriteRule ^/?(.*) https://%{SERVER_NAME}/$1 [R=301,L] 22SSLCertificateFile /etc/ssl/certificate.crt 23SSLCertificateKeyFile /etc/ssl/certificate.key 24SSLCertificateChainFile /etc/ssl/certificate.ca-bundle 25 26\u0026lt;/VirtualHost\u0026gt; \u0026ldquo;Open the 000-default.conf file. I have already configured it, and you can see that port 443 is pointing to the SSL files that were just downloaded and uploaded to the server. If you need to make changes\u0026hellip;\u0026rdquo;\nLast step is to restart the apache2 service.\n1sudo a2enmod ssl 2sudo a2ensite 000-default.conf 3sudo apache2ctl configtest 4 5sudo systemctl reload apache2 6 7// check again --- Verify vhosts 8 9sudo apache2ctl -S 10→ should now show both *:80 and *:443. Now, you can visit the site by https://abc.xxx.com.\n", 
            "url": "https:\/\/hupochuanbird.github.io\/posts\/ssl-config-in-ec2-namecheap\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/iminstant-messaging\/": {
            "title": "IM(Instant Messaging)",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/iminstant-messaging\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/tencent\/": {
            "title": "Tencent",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/tencent\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/posts\/tencentim-in-flutter\/": {
            "title": "TencentIM(Instant messaging) C2C chat in Flutter",
            "tags": ["flutter","tencent","IM(Instant messaging)",],
            "content": " Recently, I have been fully focused on IM (instant messaging) in Flutter. It\u0026rsquo;s quite a huge functionality. This article will include initialization, conversation management, message management (text, image, voice, video), and loading progress display. In my project, I use my own UI design, which I find more flexible and prettier (in my perspective 😉).\nHere is the message module folder. A little bit ambitious, I have to say. Don\u0026rsquo;t worry, let\u0026rsquo;s dig into this interesting module in Flutter.\nView post on imgur.com A quick bit of background on IM: In the official document, IM stands for instant messaging, which you probably use every single day in products like WhatsApp, Instagram, Slack, WeChat, and so on. Instant Messaging (IM) provides applications with the ability to support single chat, group chat, pop-ups, and other chat modes. It supports text, pictures, voice, short video, and other types of messages for social communication.\nPreparation(Need to register tencent account) Here is the offical document you can refer to https://cloud.tencent.com/document/product/269/75286\nPlatform Version Flutter Above 2.2.0 Android Android Studio 3.5 and above, App requires Android 4.1 and above devices. iOS Xcode 11.0 and above, for real machine debugging please make sure your project has a valid developer signature. IM Initialization The reference link for this section is ❤️ https://cloud.tencent.com/document/product/269/75293\nBefore you can use the features of the IM SDK, you must initialize it. In most scenarios, you will only need to initialize the IM SDK once during the application lifecycle. Here is the link to register account https://www.tencentcloud.com/?lang=en\u0026amp;pg=\nThe following steps are required to initialize the SDK:\nPrepare the SDKAppID. Set the LogLevelEnum. Set the SDK event listener. Call initSDK to initialize the SDK. You must have the correct SDKAppID for initialization. SDKAppID is a unique identifier used by Tencent Cloud IM service to distinguish customer accounts. We recommend that each individual App apply for a new SDKAppID. messages between different SDKAppIDs are naturally segregated and cannot be interchanged.\nView post on imgur.com Setting up SDK event listeners 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 class IMHelper { static V2TIMManager v2TIMManager = V2TIMManager(); static V2TimAdvancedMsgListener messageListener = V2TimAdvancedMsgListener(); static V2TimGroupListener groupListener = V2TimGroupListener(); static V2TimConversationListener conversationListener = V2TimConversationListener(); static V2TimFriendshipListener friendshipListener = V2TimFriendshipListener(); static V2TIMFriendshipManager friendshipManager = V2TIMFriendshipManager(); static V2TIMConversationManager conversationManager = V2TIMConversationManager(); static Future\u0026lt;void\u0026gt; initSDK() async { V2TimSDKListener sdkListener = V2TimSDKListener( onConnectFailed: (int code, String error) { // 连接失败的回调函数 // code 错误码 // error 错误信息 print(\u0026#34;code $code error $error\u0026#34;); }, onConnectSuccess: () { // SDK 已经成功连接到腾讯云服务器 }, onConnecting: () { // SDK 正在连接到腾讯云服务器 }, onKickedOffline: () { // 当前用户被踢下线，此时可以 UI 提示用户，并再次调用 V2TIMManager 的 login() 函数重新登录。 }, onSelfInfoUpdated: (V2TimUserFullInfo info) { // 登录用户的资料发生了更新 // info登录用户的资料 print(\u0026#34;info登录用户资料\u0026#34;); }, onUserSigExpired: () { // 在线时票据过期：此时您需要生成新的 userSig 并再次调用 V2TIMManager 的 login() 函数重新登录。 // login(IMConfig.userid); }, onUserStatusChanged: (List\u0026lt;V2TimUserStatus\u0026gt; userStatusList) { //用户状态变更通知 //userStatusList 用户状态变化的用户列表 //收到通知的情况：订阅过的用户发生了状态变更（包括在线状态和自定义状态），会触发该回调 //在 IM 控制台打开了好友状态通知开关，即使未主动订阅，当好友状态发生变更时，也会触发该回调 //同一个账号多设备登录，当其中一台设备修改了自定义状态，所有设备都会收到该回调 }, ); V2TimValueCallback\u0026lt;bool\u0026gt; initSDKRes = await v2TIMManager.initSDK( sdkAppID: int.parse(IMConfig.sdkappid), loglevel: LogLevelEnum.V2TIM_LOG_ALL, // Log listener: sdkListener, ); if (initSDKRes.code == 0) { //初始化成功 // login(IMConfig.userid); } } ...... } login/ logout The first time you log in to an IM account, you do not need to register the account first. IM automatically completes the registration of the account after a successful login. You can call the login (click to view details) interface to log in.\nTo incorporate the business logic of my project, I\u0026rsquo;ve handled the registration or login when the user logs into my app.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 static Future\u0026lt;void\u0026gt; login(MemberInfoModel? memberInfoModel) async { String key = IMConfig.key; String userId = memberInfoModel!.id.toString(); UserSigGenerateUtils generateTestUserSig = UserSigGenerateUtils(sdkappid: int.parse(IMConfig.sdkappid), key: key); String userSig = generateTestUserSig.genSig(identifier: userId, expire: 99999); V2TimCallback res = await v2TIMManager.login( userID: userId, userSig: userSig, ); if (res.code == 0) { // 登录成功逻辑 IMHelper.getLoginUser(memberInfoModel); print(\u0026#34;登录成功逻辑 ${res.desc}\u0026#34;); } else { print(\u0026#34;登录失败 ${res.code}\u0026#34;); } } The getLoginUser method is used to set up user information, such as avatar and username.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 static Future\u0026lt;void\u0026gt; getLoginUser(MemberInfoModel memberInfoModel) async { V2TimValueCallback\u0026lt;String\u0026gt; getLoginUserRes = await v2TIMManager.getLoginUser(); if (getLoginUserRes.code == 0) { //获取成功 V2TimUserFullInfo defaultUserInfo = V2TimUserFullInfo( nickName: memberInfoModel.userName, allowType: 0, role: 0, faceUrl: memberInfoModel.userPhoto, gender: 2, selfSignature: memberInfoModel.introduction, ); v2TIMManager.setSelfInfo(userFullInfo: defaultUserInfo); } } Conversation Management This is the parameter description of Conversation class https://comm.qq.com/im/doc/flutter/zh/SDKAPI/Class/Message/V2TimConversation.html\nWhen a user creates a single or group chat, the corresponding session is created. In Tencent Cloud IM SDK, the session class is TencentImSDKPlugin.v2TIMManager.getConversationManager(). You can use the APIs in the conversation manager class to realize the functions of conversation list display/update, conversation unread count update, top conversation, conversation draft, conversation do not disturb and so on.\nIn my project, I need to get all the conversations and display them, including the username, user avatar, number of unread messages, whether it is pinned or not, and whether it is in do-not-disturb mode.\nView post on imgur.com Get all Conversations You can get the conversations by using pagination. Because I need to use conversations on other screens, I define this value in the message provider.\nHere is the code in Message provider\n1 2 3 4 5 6 7 8 List\u0026lt;V2TimConversation?\u0026gt;? _allConversations = []; List\u0026lt;V2TimConversation?\u0026gt;? get allConversations =\u0026gt; _allConversations; Future\u0026lt;void\u0026gt; getAllConversations() async { _allConversations = []; _allConversations = await IMHelper.getConversationList(); notifyListeners(); } In the IMHelper class, there is a recursive function to get all conversations at once.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 static Future\u0026lt;V2TimValueCallback\u0026lt;V2TimConversationResult\u0026gt;\u0026gt; getConversations(String nextSeq) async { return await v2TIMManager.getConversationManager().getConversationList( count: 100, // Number of conversations to fetch per request nextSeq: nextSeq // Cursor for pagination ); } static Future\u0026lt;List\u0026lt;V2TimConversation?\u0026gt;\u0026gt; getConversationList( {String nextSeq = \u0026#34;0\u0026#34;, List\u0026lt;V2TimConversation?\u0026gt;? accumulatedList}) async { // Initialize the accumulated list if it\u0026#39;s null accumulatedList ??= []; // Fetch conversations V2TimValueCallback\u0026lt;V2TimConversationResult\u0026gt; getConversationListRes = await getConversations(nextSeq); if (getConversationListRes.code == 0) { // If fetching is successful, accumulate the conversation list accumulatedList.addAll(getConversationListRes.data?.conversationList ?? []); // Check if the fetching is finished bool? isFinished = getConversationListRes.data?.isFinished; String? nextSeq = getConversationListRes.data?.nextSeq; // If not finished, recursively fetch the next set of conversations if (isFinished != true) { return getConversationList(nextSeq: nextSeq ?? \u0026#34;0\u0026#34;, accumulatedList: accumulatedList); } } // Return the accumulated list of conversations return accumulatedList; } Pin Conversation You can add the callback to handle the next logic action after success.\n1 2 3 4 5 6 7 8 9 10 11 static Future\u0026lt;bool\u0026gt; pinConversation(bool isPinned, String conversationID) async { V2TimCallback callback = await conversationManager.pinConversation(conversationID: conversationID, isPinned: isPinned); if (callback.code == 0) { ToastUtils.showSuccessToast(\u0026#34;success\u0026#34;); return true; } else { ToastUtils.showErrorToast(\u0026#34;fail\u0026#34;); return false; } } Delete Conversation 1 2 3 4 5 6 static Future\u0026lt;void\u0026gt; deleteConversation(String conversationID) async { V2TimCallback deleteConversationRes = await conversationManager.deleteConversation(conversationID: conversationID); if (deleteConversationRes.code == 0) { ToastUtils.showSuccessToast(\u0026#34;delete success\u0026#34;); } } Message Management This is the description of Message https://cloud.tencent.com/document/product/269/75674\nIt provides text messages, image messages, voice messages, video messages, emoji messages, and custom messages.\nIn my project requirements, I need to display these messages using different UIs based on the message type. Another tricky aspect is displaying the sending time. If some messages are sent within one minute of each other, only one timestamp should be displayed. This is similar to how WeChat handles message timestamps.\nView post on imgur.com Send a text Message It\u0026rsquo;s very easy.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 static Future\u0026lt;void\u0026gt; sendTextMessage(String message, Function(V2TimMessage) onMessageSent, {String? receiverId, String? groupId}) async { V2TimValueCallback\u0026lt;V2TimMsgCreateInfoResult\u0026gt; createTextMessageRes = await v2TIMManager.getMessageManager().createTextMessage(text: message); if (createTextMessageRes.code == 0) { // 文本信息创建成功 String? id = createTextMessageRes.data?.id; // 发送文本消息 // 在sendMessage时，若只填写receiver则发个人用户单聊消息 // 若只填写groupID则发群组消息 // 若填写了receiver与groupID则发群内的个人用户，消息在群聊中显示，只有指定receiver能看见 V2TimValueCallback\u0026lt;V2TimMessage\u0026gt; sendMessageRes = await v2TIMManager.getMessageManager().sendMessage( id: id!, // 创建的messageid receiver: receiverId ?? \u0026#34;\u0026#34;, // 接收人id groupID: groupId ?? \u0026#34;\u0026#34;, // 接收群组id priority: MessagePriorityEnum.V2TIM_PRIORITY_DEFAULT, // 消息优先级 onlineUserOnly: false, // 是否只有在线用户才能收到，如果设置为 true ，接收方历史消息拉取不到，常被用于实现“对方正在输入”或群组里的非重要提示等弱提示功能，该字段不支持 AVChatRoom。 isExcludedFromUnreadCount: false, // 发送消息是否计入会话未读数 isExcludedFromLastMessage: false, // 发送消息是否计入会话 lastMessage needReadReceipt: false, // 消息是否需要已读回执（只有 Group 消息有效，6.1 及以上版本支持，需要您购买旗舰版套餐） offlinePushInfo: OfflinePushInfo(), // 离线推送时携带的标题和内容 cloudCustomData: \u0026#34;\u0026#34;, // 消息云端数据，消息附带的额外的数据，存云端，消息的接收者可以访问到 localCustomData: \u0026#34;\u0026#34; // 消息本地数据，消息附带的额外的数据，存本地，消息的接收者不可以访问到，App 卸载后数据丢失 ); print(\u0026#34;sendMessageRes.code ${sendMessageRes.code} ${sendMessageRes.desc}\u0026#34;); if (sendMessageRes.code == 0) { onMessageSent(sendMessageRes.data!); } } } Here is the chat_single_screen calling this method\n1 2 3 4 5 6 void sendMessage(String text) async { await IMHelper.sendTextMessage(text, receiverId: userId, (sentMessage) { Provider.of\u0026lt;MessageProvider\u0026gt;(context, listen: false).clearSearchSection(); insertMessage(sentMessage); }); } Send an image Message In this method, picking an image or taking a photo requires another plugin called image_picker.\nPick image/take photo in chat_single_screen.dart 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 Future\u0026lt;void\u0026gt; openAlbum() async { final pickedFile = await FileHelper.pickImageFromGalleryPath(_picker); if (pickedFile != null) { String path = pickedFile.path; if (FileHelper.isImage(path) == true) { await IMHelper.sendImageMessage(path, (sentMessage) { insertMessage(sentMessage); }, receiverId: userId); } } } Future\u0026lt;void\u0026gt; openCamera() async { String? path = await FileHelper.pickImageFromCameraPath(_picker); if (path != null) { await IMHelper.sendImageMessage(path, (sentMessage) { insertMessage(sentMessage); }, receiverId: userId); } } pickImageFromGalleryPath and pickImageFromCameraPath are two methods I encapsulated for taking a photo or opening the album.\nIMhelper.dart\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 static Future\u0026lt;void\u0026gt; sendImageMessage(String imagePath, Function(V2TimMessage) onMessageSent, {String? receiverId, String? groupId}) async { V2TimValueCallback\u0026lt;V2TimMsgCreateInfoResult\u0026gt; createImageMessageRes = await v2TIMManager.getMessageManager().createImageMessage( imagePath: imagePath, ); if (createImageMessageRes.code == 0) { String? id = createImageMessageRes.data?.id; V2TimValueCallback\u0026lt;V2TimMessage\u0026gt; sendMessageRes = await v2TIMManager .getMessageManager() .sendMessage(id: id!, receiver: receiverId ?? \u0026#34;\u0026#34;, groupID: groupId ?? \u0026#34;\u0026#34;); if (sendMessageRes.code == 0) { onMessageSent(sendMessageRes.data!); } } } Send a voice Message This requirement should take a little time to figure out. Plugins needed for the voice recorder: audioplayers, record\nGenerally, press the button to start the voice recording, release the button to save the voice recording, and get the path to send the voice message.\nIn Flutter, the method to monitor gestures I use is Listener (I have more details when implementing this feature. For example, to imitate WeChat voice recording, also need to monitor the cancel gesture.), but the easiest way is to use GestureDetector.\nIt provides two methods that can be used: onLongPress and onLongPressUp.\nMessageProvider.dart 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 final AudioRecorder _audioRecorder = AudioRecorder(); late int _recordDuration = 0; Timer? _timer; //record voice void startTimer() { _timer?.cancel(); _timer = Timer.periodic(const Duration(seconds: 1), (Timer t) { _recordDuration++; }); notifyListeners(); } // record voice sound ===========start============== Future\u0026lt;void\u0026gt; startRecord() async { _timer?.cancel(); _recordDuration = 0; try { if (await _audioRecorder.hasPermission()) { const encoder = AudioEncoder.aacLc; if (!await AudioHelper.isEncoderSupported(encoder, _audioRecorder)) { return; } const config = RecordConfig(encoder: encoder, numChannels: 1); await AudioHelper.recordFile(_audioRecorder, config); _recordDuration = 0; startTimer(); } } catch (e) { print(\u0026#34;error $e\u0026#34;); } } Future\u0026lt;void\u0026gt; cancelRecord() async { ToastUtils.showSuccessToast(\u0026#34;cancel\u0026#34;); await _audioRecorder.stop(); _timer?.cancel(); _recordDuration = 0; notifyListeners(); } Future\u0026lt;void\u0026gt; stopRecord(Function(String path, int duration) sendVoiceMessage) async { final path = await _audioRecorder.stop(); if (_recordDuration \u0026lt; 1) { ToastUtils.showErrorToast(\u0026#34;too short\u0026#34;); _timer?.cancel(); _recordDuration = 0; return; } if (path != null) { sendVoiceMessage(path, _recordDuration); } _timer?.cancel(); _recordDuration = 0; } // record voice sound ============end=============== After stop recording, then send the voice message.\nchat_single_screen.dart 1 2 3 4 5 6 7 8 Future\u0026lt;void\u0026gt; sendVoiceMessage(String path, int duration) async { ToastUtils.showLoading(); await IMHelper.sendVoiceMessage(path, (sentMessage) { insertMessage(sentMessage); ToastUtils.closeLoading(); }, duration, receiverId: userId); } IMhelper.dart 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 static Future\u0026lt;void\u0026gt; sendVoiceMessage(String soundPath, Function(V2TimMessage) onMessageSent, int duration, {String? receiverId, String? groupId}) async { V2TimValueCallback\u0026lt;V2TimMsgCreateInfoResult\u0026gt; createSoundMessageRes = await v2TIMManager.getMessageManager().createSoundMessage(soundPath: soundPath, duration: duration); if (createSoundMessageRes.code == 0) { String? id = createSoundMessageRes.data?.id; V2TimValueCallback\u0026lt;V2TimMessage\u0026gt; sendMessageRes = await v2TIMManager .getMessageManager() .sendMessage(id: id!, receiver: receiverId ?? \u0026#34;\u0026#34;, groupID: groupId ?? \u0026#34;\u0026#34;); if (sendMessageRes.code == 0) { onMessageSent(sendMessageRes.data!); } } } Send a video Message The video picker also requires the image_picker plugin, and you should choose pickMedia (otherwise, you can only pick images). Another plugin needed is mime, which can get all the information about the video, and video_thumbnail to generate a snapshot that can be used as a preview image.\nFor video messages, need to get the file extension, duration, snapshot path, and video file path.\nfile_helper.dart 1 2 3 4 5 6 7 8 9 10 11 12 static Future\u0026lt;XFile?\u0026gt; pickImageFromGalleryPath(ImagePicker picker) async { // final pickedFile = await picker.pickImage(source: ImageSource.gallery); final pickedFile = await picker.pickMedia( maxWidth: 1920, maxHeight: 1080, ); if (pickedFile != null) { return pickedFile; } else { return null; } } chat_single_screen.dart 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 Future\u0026lt;void\u0026gt; openAlbum() async { final pickedFile = await FileHelper.pickImageFromGalleryPath(_picker); if (pickedFile != null) { String path = pickedFile.path; if (FileHelper.isImage(path) == true) { // send image } else { String? thumbnailPath = await FileHelper.generateSnapshot(path); // get preview image double? duration = await FileHelper.getVideoDuration(path); String? mineType = await FileHelper.getVideoMimetype(path); int intDuration = (duration ?? 0).toInt(); if (thumbnailPath != null) { await IMHelper.sendVideoMessage(path, mineType ?? \u0026#34;mov\u0026#34;, intDuration, thumbnailPath, (sentMessage) { insertMessage(sentMessage); }, receiverId: userId); } } } } IMhelper.dart 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 // video message static Future\u0026lt;void\u0026gt; sendVideoMessage( String videoFilePath, String type, int duration, String snapshotPath, Function(V2TimMessage) onMessageSent, {String? receiverId, String? groupId}) async { V2TimValueCallback\u0026lt;V2TimMsgCreateInfoResult\u0026gt; createVideoMessageRes = await v2TIMManager.getMessageManager().createVideoMessage( videoFilePath: videoFilePath, type: type, duration: duration, snapshotPath: snapshotPath, ); if (createVideoMessageRes.code == 0) { String? id = createVideoMessageRes.data?.id; V2TimValueCallback\u0026lt;V2TimMessage\u0026gt; sendMessageRes = await v2TIMManager .getMessageManager() .sendMessage(id: id!, receiver: receiverId ?? \u0026#34;\u0026#34;, groupID: groupId ?? \u0026#34;\u0026#34;); if (sendMessageRes.code == 0) { onMessageSent(sendMessageRes.data!); } } } Monitor the uploading progress In the Message class, there is a MessageListener. Within this class, onSendMessageProgress will monitor the progress of uploading. This is very useful when uploading videos, as you can use the snapshot and progress to display the uploading progress on the chat screen. Many chat apps do this to inform users about the progress of media uploads.\nMaybe my method is not a perfect solution. I created a custom message type and inserted it into the message list. Once the progress is 100, need to delete this custom message.\nchat_single_screen.dart 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 void setupMessageListener() async { await IMHelper.createMessageListener( .... onSendMessageProgress: (V2TimMessage message, int progress) { print(\u0026#34;文件上传进度回调 $progress\u0026#34;); String messageId = message.msgID!; String path = \u0026#34;\u0026#34;; if (message.elemType == MessageElemType.V2TIM_ELEM_TYPE_VIDEO) { path = message.videoElem!.snapshotPath!; } else if (message.elemType == MessageElemType.V2TIM_ELEM_TYPE_SOUND) { } else if (message.elemType == MessageElemType.V2TIM_ELEM_TYPE_IMAGE) { path = message.imageElem!.path!; } if (path == \u0026#34;\u0026#34;) return; if (progress == 100) { // delete removeMessage(messageId); return; } V2TimCustomElem progressMessage = V2TimCustomElem(data: messageId, desc: path, extension: progress.toString()); V2TimMessage newItem = V2TimMessage( msgID: messageId, sender: message.sender, elemType: MessageElemType.V2TIM_ELEM_TYPE_CUSTOM, customElem: progressMessage, timestamp: message.timestamp); insertMessage(newItem, isUpload: true); }, ); } Handle Time If some messages are sent within the same minute, the time needs to be displayed only once.\nMessage_helper.dart 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 static Future\u0026lt;List\u0026lt;V2TimMessage\u0026gt;\u0026gt; processMessages(List\u0026lt;V2TimMessage\u0026gt; messages) async { if (messages.isEmpty) return messages; List\u0026lt;V2TimMessage\u0026gt; processedMessages = []; for (var i = 0; i \u0026lt; messages.length; i++) { var orgMessage = messages[i]; var message = orgMessage; message = await handleDownloadNetworkMessage(message); processedMessages.add(message); bool isLastMessageInMinuteBlock = (i + 1 == messages.length) || !DateHelper.isSameMinute(message.timestamp!, messages[i + 1].timestamp!); if (isLastMessageInMinuteBlock) { String formatTime = DateHelper.formatTime(message.timestamp!); var timeMessage = V2TimMessage( msgID: \u0026#39;time_${message.msgID}\u0026#39;, timestamp: message.timestamp, sender: null, customElem: V2TimCustomElem(data: \u0026#34;time\u0026#34;, desc: formatTime), elemType: MessageElemType.V2TIM_ELEM_TYPE_CUSTOM, ); // Check if the last added message is a duplicate time message if (processedMessages.isNotEmpty \u0026amp;\u0026amp; processedMessages.last.customElem?.desc == timeMessage.customElem?.desc \u0026amp;\u0026amp; processedMessages.last.elemType == MessageElemType.V2TIM_ELEM_TYPE_CUSTOM) { processedMessages.removeLast(); } processedMessages.add(timeMessage); } } return processedMessages; } date_helper.dart 1 2 3 4 5 6 7 8 9 10 static bool isSameMinute(int a, int b) { DateTime dateTimeA = DateTime.fromMillisecondsSinceEpoch(a * 1000); DateTime dateTimeB = DateTime.fromMillisecondsSinceEpoch(b * 1000); return dateTimeA.year == dateTimeB.year \u0026amp;\u0026amp; dateTimeA.month == dateTimeB.month \u0026amp;\u0026amp; dateTimeA.day == dateTimeB.day \u0026amp;\u0026amp; dateTimeA.hour == dateTimeB.hour \u0026amp;\u0026amp; dateTimeA.minute == dateTimeB.minute; } Conclusion ✊ It\u0026rsquo;s quite a big task and still needs to be polished and improved in terms of performance, not only in functionality but also in UI. The next task is to support grop chat.\nIn this article, I didn\u0026rsquo;t include any UI code. If I have more time, I\u0026rsquo;ll probably write another article about custom UI.\n", 
            "url": "https:\/\/hupochuanbird.github.io\/posts\/tencentim-in-flutter\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/dublin\/": {
            "title": "Dublin",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/dublin\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/gallery\/dublin-mountain\/": {
            "title": "Dublin Mountain",
            "tags": ["Hiking","Dublin",],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/gallery\/dublin-mountain\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/hiking\/": {
            "title": "Hiking",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/hiking\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/categories\/dublin\/": {
            "title": "Dublin",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/categories\/dublin\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/categories\/lgbtq\/": {
            "title": "LGBTQ",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/categories\/lgbtq\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/lgbtq\/": {
            "title": "LGBTQ",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/lgbtq\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/gallery\/pride-month-in-2024\/": {
            "title": "Pride Month in 2024",
            "tags": ["LGBTQ",],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/gallery\/pride-month-in-2024\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/gallery\/dublin-howth\/": {
            "title": "Dublin Howth",
            "tags": ["Hiking","Dublin Howth",],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/gallery\/dublin-howth\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/dublin-howth\/": {
            "title": "Dublin Howth",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/dublin-howth\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/gallery\/": {
            "title": "My Life",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/gallery\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/posts\/make-horizontal-menu-auto-scroll-with-vertical-product-list\/": {
            "title": "Make Horizontal Menu Auto Scroll With Vertical Product List in flutter",
            "tags": ["flutter",],
            "content": " My article is referencing https://stackoverflow.com/questions/67195205/how-to-make-horizontal-menu-auto-scroll-with-vertical-product-list-in-flutter. However, in my case, the width of each category\u0026rsquo;s name and the height of each product card are dynamic and subject to slight changes. Now, let\u0026rsquo;s proceed.\nThe final result My Logic Well, based on that article, I came up with some innovations. In order to explain easily, I have drawn a draft below:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 category1 | category2 | category3 .... category1-section (section1 --\u0026gt; height: 300) ---product1-1 ---product1-2 ---product1-3 ---product1-4 category2-section (section2 --\u0026gt; height: 120) ---product2-1 ---product2-2 category3-section (section4 --\u0026gt; height: 250) ---product3-1 ---product3-2 ---product3-3 . . . The UI looks like this. The basic logic involves calculating the height of each category and its products using the scrollController.addListener function to monitor the current scroll offset. For instance, if the height of the section for category1 is 300 and the height of the section for category2 is 120, when the offset reaches 300, it implies that the currentIndex is 1, and the interface should jump to the position of category2. The currentIndex indicates horizontal menu.\nThe challenge lies in calculating the height of each section. I have set up a unique key for each category-section and know the number of products in each section. The formula is height of category1-section + height of product card * count, the name of each menu is width of text.\nCode Part Initialize Initialize variables 1 2 3 4 final ScrollController _scrollController = ScrollController(); final ScrollController _scrollControllerCategory = ScrollController(); final List\u0026lt;double\u0026gt; _categoryOffsets = \u0026lt;double\u0026gt;[]; late List\u0026lt;double\u0026gt; _productOffsets = \u0026lt;double\u0026gt;[]; Add Listener to know the offset Because horizontal and vertical scrolling need to be synchronized with each other. So there are two ScrollController, one is for horizontal list(product), another is for vertical list(menu)\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 @override void initState() { super.initState(); WidgetsBinding.instance.addPostFrameCallback((_) { if (mounted) { currentIndex = 0; _scrollController.addListener(() { setCategoryOffsets(); setProductOffsets(); final double offset = _scrollController.offset; for (int i = 0; i \u0026lt; _productOffsets.length; i++) { if (offset \u0026lt;= _productOffsets[i]) { if (currentIndex != i) { if (i \u0026gt; 0) { double diff1 = (offset - _productOffsets[i - 1]).abs(); double diff2 = (offset - _productOffsets[i]).abs(); if (diff1 \u0026gt; diff2) return; } double maxOffset = _scrollControllerCategory.position.maxScrollExtent + 100; if (_categoryOffsets[i] \u0026lt;= maxOffset) { _scrollControllerCategory.animateTo( (_categoryOffsets[i]).toDouble(), duration: const Duration(milliseconds: 500), curve: Curves.easeInOut, ); } setState(() =\u0026gt; currentIndex = i); } break; } } }); } }); } Calculate offset(height) of each product\u0026rsquo;s section Here the format of cateProductList roughly looks like 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 [ { \u0026#34;id\u0026#34;: 1, \u0026#34;name\u0026#34;: \u0026#34;category 1\u0026#34;, \u0026#34;key\u0026#34;: \u0026#34;GlobalKeykey1\u0026#34;, \u0026#34;product\u0026#34;: [ { \u0026#34;id\u0026#34;: 1, \u0026#34;name\u0026#34;: \u0026#34;product name1\u0026#34; }, { \u0026#34;id\u0026#34;: 2, \u0026#34;name\u0026#34;: \u0026#34;product name2\u0026#34; }, { \u0026#34;id\u0026#34;: 3, \u0026#34;name\u0026#34;: \u0026#34;product name3\u0026#34; } ] }, { \u0026#34;id\u0026#34;: 2, \u0026#34;name\u0026#34;: \u0026#34;category 2\u0026#34;, \u0026#34;key\u0026#34;: \u0026#34;GlobalKeykey2\u0026#34;, \u0026#34;product\u0026#34;: [ { \u0026#34;id\u0026#34;: 4, \u0026#34;name\u0026#34;: \u0026#34;product name4\u0026#34; }, { \u0026#34;id\u0026#34;: 5, \u0026#34;name\u0026#34;: \u0026#34;product name5\u0026#34; } ] } ] The first offset is 0, the second is first + itself.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 final double _productItemExtent = 122; late double _productItemHeight = 120; void setProductOffsets() { double tmp = !ResponsiveHelper.isMobile() ? 150 : 120; if (_productOffsets.isNotEmpty \u0026amp;\u0026amp; _productItemHeight == tmp) return; _productItemHeight = tmp; _productOffsets = []; WidgetsBinding.instance.addPostFrameCallback((_) { List\u0026lt;CategoryProductsModel\u0026gt; cateProductList = getCateProductList(); for (int i = 1; i \u0026lt;= (cateProductList).length; i++) { CategoryProductsModel categoryProductsModel = cateProductList[i - 1]; final double prevOffset = i == 1 ? _productItemExtent : _productOffsets[i - 2]; _productOffsets.add(prevOffset + (Dimensions.paddingSizeSmall * 2 + Dimensions.paddingSizeLarge * 3 + getHeightOfContainer(GlobalObjectKey(categoryProductsModel.id!)) + (_productItemHeight) * (categoryProductsModel.products ?? []).length)); } }); } double getHeightOfContainer(GlobalKey key) { RenderBox renderBox = key.currentContext!.findRenderObject() as RenderBox; return renderBox.size.height; } Calculate offset(height) of each category Becasue of GlobalKey, It\u0026rsquo;s easier to know category\u0026rsquo; width. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 void setCategoryOffsets() { if (_categoryOffsets.isNotEmpty) return; List\u0026lt;CategoryProductsModel\u0026gt; cateProductList = getCateProductList(); _categoryOffsets.add(0); for (int i = 1; i \u0026lt;= (cateProductList).length; i++) { CategoryProductsModel categoryProductsModel = cateProductList[i - 1]; double cateWidth = getWidthOfContainer(categoryProductsModel.key!); double prevOffset = _categoryOffsets[i - 1]; _categoryOffsets.add(prevOffset + cateWidth); } } double getWidthOfContainer(GlobalKey key) { RenderBox renderBox = key.currentContext!.findRenderObject() as RenderBox; return renderBox.size.width; } Part of UI I delete some not important part, like styles, padding\u0026hellip;.\nCategory List, Horizontal Scroll Just remind: 1 2 3 currentIndex = index; final context = GlobalObjectKey(categoryProductsModel.id!).currentContext!; Scrollable.ensureVisible(context, duration: const Duration(milliseconds: 800), curve: Curves.ease); The code above indicates that clicking the category name will result in jumping to the corresponding product list section.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 // category view SingleChildScrollView( scrollDirection: Axis.horizontal, controller: scrollController, physics: const ScrollPhysics( parent: AlwaysScrollableScrollPhysics(), ), child: Row( mainAxisSize: MainAxisSize.min, mainAxisAlignment: MainAxisAlignment.spaceEvenly, children: List.generate(categories.length, (index) { CategoryProductsModel categoryProductsModel = categories[index]; return Padding( key: categories[index].key!, child: Container( height: 35, padding: const EdgeInsets.all(8.0), decoration: BoxDecoration( borderRadius: BorderRadius.circular(12.0), color: currentIndex == index ? Theme.of(context).primaryColor : Colors.transparent, ), child: InkWell( onTap: () { currentIndex = index; final context = GlobalObjectKey(categoryProductsModel.id!).currentContext!; Scrollable.ensureVisible(context, duration: const Duration(milliseconds: 800), curve: Curves.ease); }, child: Text( categories[index].name!, style: textMedium.copyWith( color: currentIndex == index ? Colors.white : Colors.black, ), ), )), ); }), ), ) Product List Vertical Scroll 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 Column( children: List.generate(categories.length, (index) { CategoryProductsModel categoryProductsModel = categories[index]; int productLen = (categoryProductsModel.products ?? []).length; return Column( children: [ Container( alignment: Alignment.topLeft, child: Column( crossAxisAlignment: CrossAxisAlignment.start, children: [ Container( key: GlobalObjectKey(categoryProductsModel.id!), alignment: Alignment.centerLeft, child: Column( mainAxisAlignment: MainAxisAlignment.start, crossAxisAlignment: CrossAxisAlignment.start, children: [ Text( categoryProductsModel.name ), Text( categoryProductsModel.description, ), ], ), ), // product listview ListView.builder( controller: ScrollController(), physics: const NeverScrollableScrollPhysics(), shrinkWrap: true, itemCount: productLen, itemBuilder: (BuildContext context, int indexProduct) { Product product = categoryProductsModel.products![indexProduct]; return ProductWidget( product: product, ); }, ), ], ), ), ], ); })); Okay, everything has done.\n", 
            "url": "https:\/\/hupochuanbird.github.io\/posts\/make-horizontal-menu-auto-scroll-with-vertical-product-list\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/categories\/hugo\/": {
            "title": "Hugo",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/categories\/hugo\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/hugo\/": {
            "title": "Hugo",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/hugo\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/lunr.js\/": {
            "title": "Lunr.js",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/lunr.js\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/search-index\/": {
            "title": "Search-Index",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/search-index\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/posts\/setup-search-in-hugo\/": {
            "title": "Setup Search in Hugo",
            "tags": ["search-index","hugo","lunr.js",],
            "content": " In this article, I will show you how to implement search in Hugo by using Lunr.js, a lightweight JavaScript search engine. Adding search functionality to your Hugo website enhances user experience and makes it easier for visitors to find relevant content. We will explore the steps involved in integrating Lunr.js, creating a search index from your Hugo content, and incorporating the search feature into your website.\nRefer link Every step I was following this useful article. https://victoria.dev/blog/add-search-to-hugo-static-sites-with-lunr/ But I also did some changes, like real-time search without refreshing the page.\nImport lunr.js Firstly, import lunr.js or you can run npm install it. Here I chose import lunr.js cdn.\n1 \u0026lt;script src=\u0026#34;https://unpkg.com/lunr/lunr.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; Create a search form partial To conveniently position your search form on any desired location within your website, generate the form as a partial template. Save this template as search-form.html within the layouts/partials/ directory.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 \u0026lt;style\u0026gt; .input-container { width: 220px; position: relative; } .icon { position: absolute; right: 10px; top: calc(50% + 5px); transform: translateY(calc(-50% - 5px)); } .input { width: 100%; height: 40px; padding: 10px; transition: .2s linear; border: 2.5px solid black; font-size: 14px; letter-spacing: 2px; } .input:focus { outline: none; border: 0.5px solid black; box-shadow: -5px -5px 0px black; } .input-container:hover \u0026gt; .icon { animation: anim 1s linear infinite; } @keyframes anim { 0%, 100% { transform: translateY(calc(-50% - 5px)) scale(1); } 50% { transform: translateY(calc(-50% - 5px)) scale(1.1); } } \u0026lt;/style\u0026gt; \u0026lt;div class=\u0026#34; hidden sm:flex input-container ml-12\u0026#34;\u0026gt; \u0026lt;input type=\u0026#34;text\u0026#34; name=\u0026#34;text\u0026#34; id=\u0026#34;search-input\u0026#34; class=\u0026#34;input\u0026#34; placeholder=\u0026#34;search anything...\u0026#34;\u0026gt; \u0026lt;button type=\u0026#34;submit\u0026#34;\u0026gt; \u0026lt;span class=\u0026#34;icon\u0026#34;\u0026gt; \u0026lt;svg width=\u0026#34;19px\u0026#34; height=\u0026#34;19px\u0026#34; viewBox=\u0026#34;0 0 24 24\u0026#34; fill=\u0026#34;none\u0026#34; xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34;\u0026gt;\u0026lt;g id=\u0026#34;SVGRepo_bgCarrier\u0026#34; stroke-width=\u0026#34;0\u0026#34;\u0026gt;\u0026lt;/g\u0026gt;\u0026lt;g id=\u0026#34;SVGRepo_tracerCarrier\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34;\u0026gt;\u0026lt;/g\u0026gt;\u0026lt;g id=\u0026#34;SVGRepo_iconCarrier\u0026#34;\u0026gt; \u0026lt;path opacity=\u0026#34;1\u0026#34; d=\u0026#34;M14 5H20\u0026#34; stroke=\u0026#34;#000\u0026#34; stroke-width=\u0026#34;1.5\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34;\u0026gt;\u0026lt;/path\u0026gt; \u0026lt;path opacity=\u0026#34;1\u0026#34; d=\u0026#34;M14 8H17\u0026#34; stroke=\u0026#34;#000\u0026#34; stroke-width=\u0026#34;1.5\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34;\u0026gt;\u0026lt;/path\u0026gt; \u0026lt;path d=\u0026#34;M21 11.5C21 16.75 16.75 21 11.5 21C6.25 21 2 16.75 2 11.5C2 6.25 6.25 2 11.5 2\u0026#34; stroke=\u0026#34;#000\u0026#34; stroke-width=\u0026#34;2.5\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34;\u0026gt;\u0026lt;/path\u0026gt; \u0026lt;path opacity=\u0026#34;1\u0026#34; d=\u0026#34;M22 22L20 20\u0026#34; stroke=\u0026#34;#000\u0026#34; stroke-width=\u0026#34;3.5\u0026#34; stroke-linecap=\u0026#34;round\u0026#34; stroke-linejoin=\u0026#34;round\u0026#34;\u0026gt;\u0026lt;/path\u0026gt; \u0026lt;/g\u0026gt;\u0026lt;/svg\u0026gt; \u0026lt;/span\u0026gt; \u0026lt;/button\u0026gt; \u0026lt;/div\u0026gt; Create a search index Create the search folder in layouts/partials/ path, and create a page named list.html. Include the search form in list.htm, also you can use in any other templates. 1 {{ partial \u0026#34;search-form.html\u0026#34; . }} For example: 1 2 3 4 5 6 7 8 9 10 11 12 13 \u0026lt;!-- In layouts/partials/search/list.html --\u0026gt; {{ define \u0026#34;main\u0026#34; }} \u0026lt;section class=\u0026#34;s:mt-10 mt-20\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;container sm:my-14\u0026#34; \u0026gt; \u0026lt;div class=\u0026#34;mt-20\u0026#34;\u0026gt; {{ partial \u0026#34;search-form.html\u0026#34; . }} \u0026lt;/div\u0026gt; \u0026lt;div id=\u0026#34;results\u0026#34;\u0026gt; Enter a keyword above to search this site. \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/section\u0026gt; {{ end }} Create a search page Navigate to content folder, create a folder name search, and a file _index.md\nBuild your search index In layouts/partials/ folder, create another html file search-index.html Import lunr.js cdn and search.js, I haven\u0026rsquo;t created search.js so far.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 {{ define \u0026#34;main\u0026#34; }} \u0026lt;script src=\u0026#34;https://unpkg.com/lunr/lunr.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script src=\u0026#34;/js/search.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script\u0026gt; window.store = { {{ range .Site.Pages}} \u0026#34;{{ .Permalink }}\u0026#34;: { \u0026#34;title\u0026#34;: \u0026#34;{{ .Title }}\u0026#34;, \u0026#34;tags\u0026#34;: [{{ range .Params.Tags }}\u0026#34;{{ . }}\u0026#34;,{{ end }}], \u0026#34;content\u0026#34;: {{ .Content | plainify }}, \u0026#34;url\u0026#34;: \u0026#34;{{ .Permalink }}\u0026#34; }, {{ end }} } \u0026lt;/script\u0026gt; Implement search.js Compare to this https://victoria.dev/blog/add-search-to-hugo-static-sites-with-lunr/#build-your-search-index article, I did a minor change, no need to refersh the page and get results directly.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 function displayResults (results, store) { const searchResults = document.getElementById(\u0026#39;results\u0026#39;) if (results.length) { let resultList = \u0026#39;\u0026#39; // Iterate and build result list elements for (const n in results) { const item = store[results[n].ref] resultList += \u0026#39;\u0026lt;li\u0026gt;\u0026lt;p\u0026gt;\u0026lt;a href=\u0026#34;\u0026#39; + item.url + \u0026#39;\u0026#34;\u0026gt;\u0026#39; + item.title + \u0026#39;\u0026lt;/a\u0026gt;\u0026lt;/p\u0026gt;\u0026#39; resultList += \u0026#39;\u0026lt;p\u0026gt;\u0026#39; + item.content.substring(0, 150) + \u0026#39;...\u0026lt;/p\u0026gt;\u0026lt;/li\u0026gt;\u0026#39; } searchResults.innerHTML = resultList } else { searchResults.innerHTML = \u0026#39;No results found.\u0026#39; } } document.addEventListener(\u0026#39;DOMContentLoaded\u0026#39;, function () { var searchInput = document.getElementById(\u0026#39;search-input\u0026#39;); if (searchInput) { searchInput.addEventListener(\u0026#39;input\u0026#39;, function () { var query = searchInput.value.toLowerCase(); // real-time print out console.info(\u0026#34;query \u0026#34;,query) if (query) { document.getElementById(\u0026#39;search-input\u0026#39;).setAttribute(\u0026#39;value\u0026#39;, query) const idx = lunr(function () { this.ref(\u0026#39;id\u0026#39;) this.field(\u0026#39;title\u0026#39;, { boost: 15 }) this.field(\u0026#39;tags\u0026#39;) this.field(\u0026#39;content\u0026#39;, { boost: 10 }) for (const key in window.store) { this.add({ id: key, title: window.store[key].title, tags: window.store[key].category, content: window.store[key].content }) } }) const results = idx.search(query) // Update the list with results displayResults(results, window.store) }else{ const searchResults = document.getElementById(\u0026#39;results\u0026#39;) searchResults.innerHTML = \u0026#39;Enter a keyword above to search this site.\u0026#39; } }); } }) Here is the result.\n", 
            "url": "https:\/\/hupochuanbird.github.io\/posts\/setup-search-in-hugo\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/cloud\/": {
            "title": "Cloud",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/cloud\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/categories\/flarum\/": {
            "title": "Flarum",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/categories\/flarum\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/php\/": {
            "title": "PHP",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/php\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/posts\/chinese-search-in-flarum\/": {
            "title": "Ubuntu 22.04.3: Chinese Search in Flarum and How to fix \u0027PHP Notice: fwrite(): send failed with errno=32 Broken pipe\u0027 error in my case",
            "tags": ["Tutorial","Cloud","AWS","PHP",],
            "content": " The main content of this article is to use the Sonic engine to enable Flarum to search Chinese as well.\nIn my Flarum, the search module isn\u0026rsquo;t perfect enough so far, almost all the discussions are using Chinese, so the default search module doesn\u0026rsquo;t work. Here, in this section, I primarily focus on utilizing the Sonic extension to implement Chinese text search. In my case, the server-side encounters some errors. I will list how I can debug and fix them.\nExtensions Here is the plugin link.\nhttps://discuss.flarum.org/d/28826-flarum-sonic\nInstall Sonic env in Ubuntu 22.04.3 My sever is micro tier, so I will choose docker to install sonic env. If you are unfamiliar with docker, you can consider it\u0026rsquo;s a standalone container/server. In this container, you can install everything just as you would on a server.\nInstall Docker To install Docker on Ubuntu, you can follow these steps:\nUpdate your system\u0026rsquo;s package index Install the required dependencies Add the official Docker GPG key Set up the stable Docker repository (Replace $(lsb_release -cs) with the codename of your Ubuntu release if it\u0026rsquo;s not automatically detected.) Install Docker Verify that Docker is installed 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 sudo apt update sudo apt install apt-transport-https ca-certificates curl software-properties-common curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg echo \u0026#34;deb [signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable\u0026#34; | sudo tee /etc/apt/sources.list.d/docker.list \u0026gt; /dev/null # here replace $(lsb_release -cs) # for example # echo \u0026#34;deb [signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu focal stable\u0026#34; | sudo tee /etc/apt/sources.list.d/docker.list \u0026gt; /dev/null sudo apt install docker-ce docker-ce-cli containerd.io sudo docker --version when run sudo docker --version you will see the version in the terminal\nInstall Sonic in docker v1.4.8 is the latest version so far, you can replace any version you want\n1 docker pull valeriansaliou/sonic:v1.4.8 Now, create a config file for snoic, I set up config.cfg under my home folder, the path it\u0026rsquo;s up to you.\nyou need root permission.\n1 2 3 4 5 6 7 8 9 10 cd /home # create sonic folder under home path mkdir sonic sudo vim /home/sonic/config.cfg # or cd sonic sudo vim config.cfg in the config.cfg, just copy paste the default content the developer provided 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 [server] log_level = \u0026#34;error\u0026#34; [channel] inet = \u0026#34;0.0.0.0:1491\u0026#34; tcp_timeout = 30 auth_password = \u0026#34;SecretPassword\u0026#34; [channel.search] query_limit_default = 10 query_limit_maximum = 100 query_alternates_try = 4 suggest_limit_default = 5 suggest_limit_maximum = 20 [store] [store.kv] path = \u0026#34;/var/lib/sonic/store/kv/\u0026#34; retain_word_objects = 1000 [store.kv.pool] inactive_after = 1800 [store.kv.database] flush_after = 900 compress = true parallelism = 2 max_files = 100 max_compactions = 1 max_flushes = 1 write_buffer = 16384 write_ahead_log = true [store.fst] path = \u0026#34;/var/lib/sonic/store/fst/\u0026#34; [store.fst.pool] inactive_after = 300 [store.fst.graph] consolidate_after = 180 max_size = 2048 max_words = 250000 Then, save the file and exit.\nInstall Sonic extension 1 composer require ganuonglachanh/sonic Navigate to you admin panel, switch on the extension, no need to change anything, just save it.\nRunning Sonic In the server, switch to root permission to run:\n1 docker run -p 1491:1491 -v /home/sonic/config.cfg:/etc/sonic.cfg -v ~/sonic/store/:/var/lib/sonic/store/ valeriansaliou/sonic:v1.4.8 Then, navigate to fluarm folder run:\n1 php flarum sonic:addtoindex If it prints the \u0026ldquo;xxx successfully!\u0026rdquo;, you are lucky, all the steps have done! We can highlight the keyword\n1 2 3 .DiscussionListItem-main mark { background: #ffff80 !important; } Error: PHP Notice: fwrite(): send failed with errno=32 Broken pipe If there are tons of error print it out, like this, well, let\u0026rsquo;s debug it.\n✨ Copy same env It\u0026rsquo;s quite complex, to be honest. I created another instance and RDS to test whether the issue is due to my server environment or something else. Additionally, I don\u0026rsquo;t want to impact my current production environment.\nOh, also need to create a new security group, and open port 80, 22(If you don\u0026rsquo;t mind the security issue in test env, also can allow all traffic)\nJust make the version is the same as the production env.\nFollow my previous blog, I installed php env, composer, and flarum.\nDon\u0026rsquo;t forget to edit composer.json file, and delete composer.lock. Then install again. The CLI is 1 composer install After that, In RDS section, need to set up EC2 connection.\nAlso I exported my sql from RDS, and imported my test mysql env.\nDebug in Test env Now, follow the snoic installation. In snoic source code, we can find the entry. I don\u0026rsquo;t understand PHP code, but I know where the error is printed out. The logic is to retrieve all the public posts and push them somewhere. In this code, I need to find where the first error occurs.\nI changed the code directly, added a break inside the loop, and printed every content retrieved. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 foreach ($posts as $post) { $start = microtime(true); $content = strip_tags($post-\u0026gt;content); if (trim($content) !== \u0026#39;\u0026#39;) { try { $this-\u0026gt;info(\u0026#34;Post ID: {$post-\u0026gt;id}, Content: $content\u0026#34;); $ingest-\u0026gt;push(\u0026#39;postCollection\u0026#39;, \u0026#39;flarumBucket\u0026#39;, $post-\u0026gt;id, $content, $locale); } catch (\\Throwable $e) { $this-\u0026gt;info(PHP_EOL); $this-\u0026gt;error(\u0026#34;Post id {$post-\u0026gt;id} with \u0026#34; . strlen($content) . \u0026#39; bytes of content failed after \u0026#39; . round((microtime(true) - $start) * 1000, 2) . \u0026#39;ms\u0026#39;); break; // Break out of the loop on exception } } $progress-\u0026gt;advance(); } I received 700 normal contents, and then it jumped out of the loop. Now I see that the error part is very long and large because one of the users typed a lot of content in one section.\nI have two solutions: split the content or simply ignore long content. I choose the latter one, as it is easier, albeit at the cost of some search accuracy\n1 2 3 4 5 6 7 8 $posts = Post::select(\u0026#39;id\u0026#39;, \u0026#39;content\u0026#39;) -\u0026gt;where(\u0026#39;type\u0026#39;, \u0026#39;=\u0026#39;, \u0026#39;comment\u0026#39;) -\u0026gt;where(\u0026#39;is_approved\u0026#39;, 1) -\u0026gt;where(\u0026#39;is_private\u0026#39;, 0) -\u0026gt;whereNull(\u0026#39;hidden_at\u0026#39;) -\u0026gt;whereBetween(\u0026#39;id\u0026#39;, [1, 1130]) -\u0026gt;orWhereBetween(\u0026#39;id\u0026#39;, [1134, 1172]) -\u0026gt;get(); I already know the post ID for the long content, so I skipped those. Then, I ran the CLI in the Flarum path: 1 php flarum sonic:addtoindex All the test pass!\nI also try to split the content, but didn\u0026rsquo;t work😭😭😭, can anyone tell me the reason?\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 $chunkSize = 10000; // Set your desired chunk size foreach ($posts as $post) { $this-\u0026gt;info(\u0026#34;Post ID: {$post-\u0026gt;id}, Content: {$post-\u0026gt;content}\u0026#34;); $start = microtime(true); $content = strip_tags($post-\u0026gt;content); // Split the content into chunks $contentChunks = str_split($content, $chunkSize); foreach ($contentChunks as $chunk) { if (trim($chunk) !== \u0026#39;\u0026#39;) { try { $ingest-\u0026gt;push(\u0026#39;postCollection\u0026#39;, \u0026#39;flarumBucket\u0026#39;, $post-\u0026gt;id, $chunk, $locale); } catch (\\Throwable $e) { $this-\u0026gt;info(PHP_EOL); $this-\u0026gt;error(\u0026#34;Post id {$post-\u0026gt;id} with \u0026#34; . strlen($chunk) . \u0026#39; bytes of content failed after \u0026#39; . round((microtime(true) - $start) * 1000, 2) . \u0026#39;ms\u0026#39;); break 2; // Break out of both inner and outer loops on exception } } } $progress-\u0026gt;advance(); } ", 
            "url": "https:\/\/hupochuanbird.github.io\/posts\/chinese-search-in-flarum\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/gallery\/bohernabreena-reservoir-park\/": {
            "title": "Bohernabreena Reservoir Park",
            "tags": ["Cycling",],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/gallery\/bohernabreena-reservoir-park\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/cycling\/": {
            "title": "Cycling",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/cycling\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/posts\/flarum-connects-to-aws-rds\/": {
            "title": "Flarum Connects to AWS RDs",
            "tags": ["Tutorial","Cloud","AWS","RDs",],
            "content": " For the majority tutorial, the flarum always connects with the localhost db directly. However, base on my knowledge, once the server shutdown or reboot, the data could be lost, also it\u0026rsquo;s not easy to debug(although flaurm has logs files to record all errors). So I suppose that separate db and flaurm server.\nIn this section, I use AWS EC2 and RDs to implement my solution.\nFor how to deploy the Flarum in EC2, I will write author article, but to be honest, it\u0026rsquo;s the common way for deploying to any other Linux server.\nPreparation Creating a Database Setting the security group Testing locally(I use navicat) Updating the config.php in Flarum Creating a Database Here I choose the free tier of RDs which only for the new register user in 12 months.\n1. Navigate to RDS 2. Create a DB Here is my choice, I use mysql and free tier type.\nHere I select public access directly, because I need to test the connection and create flarum_db locally. (If you forget, just click [modify] button to select the option)\n3. Waiting for initialization Then the new record has created now.\nIn the Connectivity \u0026amp; security , Endpoint is the connection link.\nUpdate the security group Although, It can be accessed publicly, but might show [1002 fail connect to db ] error.\nClick [VPC security groups] to navigate to the Security Groups panel. Edit the Inbound rule.\nTurn on 3360 port is necessary, and I allow all the traffic to access(In production env, need to delete)\nTesting locally 1. Create a new connection Paste the Endpoint and the username/password, and test connection. In my case, it connects to RDs expectly.\nFlarum part If You have deployed Flarum before, just change the config.php. If You are in the initialization step, just directly fill in RDs.\nHere is the CLI to the folder I deploy the flarum.\n1 2 3 4 5 6 7 8 cd /var/www/html/forum/ // admin role sudo su ls vim config.php //exist and save :wq Thanks!\n", 
            "url": "https:\/\/hupochuanbird.github.io\/posts\/flarum-connects-to-aws-rds\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/rds\/": {
            "title": "RDs",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/rds\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/categories\/cloud\/": {
            "title": "Cloud",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/categories\/cloud\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/database\/": {
            "title": "Database",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/database\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/posts\/flarum-connect-to-clouddb\/": {
            "title": "Flarum框架如何连接云端数据库，保证数据一致性",
            "tags": ["database",],
            "content": "本文基于作者的理解，如有错误，欢迎指正\n考虑到未来数据量过大的情况下，数据迁移会很麻烦，本地部署每次都是重新创建。所以本地和云端必须要保持数据一致，并且定期做整个数据库的备份。\n简单的思路就是，在本地搭建一个新的框架并且运行起来 (本地搭建), 连接云端数据库或者吧云端数据库拷贝本地运行。并且需要把插件包本地安装一遍，来保证云端和本地的数据一致性。 连接云端数据库 同步插件库 云端数据库下载到本地运行 为了简化操作才直接连云端数据库的，实际上在开发环境不允许直接操作生产环境的数据。所以可以省略第一步。\n1️⃣ Connect CloudDB 根据上文，在首页输入数据库信息，flarum框架会自动创建默认的所有表。在项目文件中，config.php就是存放数据库信息的配置文件。\n默认生成的配置文件 要连接Flarum到云数据库，你需要进行以下步骤：\n获取云数据库的连接信息，包括主机名（IP地址或域名）、端口号、数据库名称、用户名和密码。 打开Flarum的配置文件。默认情况下，该文件位于Flarum根目录下的config.php文件。 在配置文件中，找到数据库相关的配置部分。这是默认的结构： 1 2 3 4 5 6 7 8 9 10 11 \u0026#39;database\u0026#39; =\u0026gt; [ \u0026#39;driver\u0026#39; =\u0026gt; \u0026#39;mysql\u0026#39;, \u0026#39;host\u0026#39; =\u0026gt; \u0026#39;localhost\u0026#39;, \u0026#39;database\u0026#39; =\u0026gt; \u0026#39;flarum\u0026#39;, \u0026#39;username\u0026#39; =\u0026gt; \u0026#39;root\u0026#39;, \u0026#39;password\u0026#39; =\u0026gt; \u0026#39;\u0026#39;, \u0026#39;charset\u0026#39; =\u0026gt; \u0026#39;utf8mb4\u0026#39;, \u0026#39;collation\u0026#39; =\u0026gt; \u0026#39;utf8mb4_unicode_ci\u0026#39;, \u0026#39;prefix\u0026#39; =\u0026gt; \u0026#39;\u0026#39;, \u0026#39;strict\u0026#39; =\u0026gt; false, ], 根据云数据库提供的连接信息，将上述代码中的主机名、数据库名称、用户名和密码等信息进行相应的更改。 1 2 3 4 5 6 7 8 9 10 11 \u0026#39;database\u0026#39; =\u0026gt; [ \u0026#39;driver\u0026#39; =\u0026gt; \u0026#39;mysql\u0026#39;, \u0026#39;host\u0026#39; =\u0026gt; \u0026#39;your-cloud-db-hostname\u0026#39;, \u0026#39;database\u0026#39; =\u0026gt; \u0026#39;your-cloud-db-name\u0026#39;, \u0026#39;username\u0026#39; =\u0026gt; \u0026#39;your-cloud-db-username\u0026#39;, \u0026#39;password\u0026#39; =\u0026gt; \u0026#39;your-cloud-db-password\u0026#39;, \u0026#39;charset\u0026#39; =\u0026gt; \u0026#39;utf8mb4\u0026#39;, \u0026#39;collation\u0026#39; =\u0026gt; \u0026#39;utf8mb4_unicode_ci\u0026#39;, \u0026#39;prefix\u0026#39; =\u0026gt; \u0026#39;\u0026#39;, \u0026#39;strict\u0026#39; =\u0026gt; false, ], 配置完成后重启apache本地服务器就能看到你在云端的一些修改。\n2️⃣ Sync plugin 光连接数据库访问主页也许会出错，特别是在项目已经很大的情况下，所以必须同步插件库。\n在云端Flarum根目录中，找到以下两个文件 ：composer.json \u0026amp; composer.lock 将这两个文件复制到本地Flarum的根目录中。 打开命令行终端，进入本地Flarum的根目录。\n运行以下命令，以安装或更新本地Flarum所需的文件包：\n1 composer install 同步完成后刷新页面，此时云端和本地的数据保持一致。\n3️⃣ download cloud DB and run locally 直接在本地连接数据库是有风险的，比如端口暴露，防火墙关闭，不安全操作数据等。所以最好的办法就是把数据库下载下来。\n❌ Mysql error 2002 不出意外，使用navicat连接云端失败。 MySQL远程连接报错：ERROR 2002 (HY000): Can‘t connect to server on ‘ip‘\n显然，访问被拦截。 这篇文章可以完美的解决这个问题。\n🍀 .sql to loacalDB 我用navicat来连接数据库，直接export数据和结构的sql文件。\n再在进入XMAPP数据库界面，运行即可。⚠️注意，别忘记修改conf.php数据库配置文件。\n", 
            "url": "https:\/\/hupochuanbird.github.io\/posts\/flarum-connect-to-clouddb\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/categories\/apache\/": {
            "title": "Apache",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/categories\/apache\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/localdepoly\/": {
            "title": "LocalDepoly",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/localdepoly\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/macos\/": {
            "title": "MacOS",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/macos\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/posts\/depoly-locally-macos-apache2\/": {
            "title": "使用XAMPP本地部署Flarum在MAC环境中",
            "tags": ["MacOS","LocalDepoly",],
            "content": "简单的流程只有三个，不过部署会遇到很多问题，mac自带apache的配置我实在是没弄好，还是下载了XAMPP来部署。\n下载XAMPP 下载composer 下载Flarum 1️⃣ Download XAMPP 进入官网，选择OS X操作系统。 双击dmg可能会出现不允许安装的情况。如果出现这种情况需要进入安全\u0026amp;隐私，输入密码点击同意就可以继续安装了。\n傻瓜安装，完成后运行。\n🌲Config in XAMPP 也许你的电脑已经运行了mysql，那么在XAMPP中，数据库就不会运行。\n如果出现这种情况，点击数据库的配置，把端口号修改为4306， 另外点击【Open Conf File】，修改端口号。 保存退出后，点击start即可。\n做完上面两个步骤，Apache和数据库都是运行状态，点击本地运行链接，如果能看到XAMPP主页说明目前没有问题。\n点击phpmyadmin，进入数据库配置。前一篇文章的数据库信息直接搬过来，直接运行sql语句创建数据库以及用户。 1 2 3 4 CREATE DATABASE flarum_db; CREATE USER \u0026#39;flarum_user\u0026#39;@\u0026#39;localhost\u0026#39; IDENTIFIED BY \u0026#39;flarum_pass\u0026#39;; GRANT ALL PRIVILEGES ON flarum_db.* TO \u0026#39;flarum_user\u0026#39;@\u0026#39;localhost\u0026#39;; FLUSH PRIVILEGES; 创建完成后可以在左侧看到相关的数据库，只不过这个时候，数据库是空的。 到目前为止，XAMPP基础部署已经完成，接下来需要下载Composer。如果已经下载过那么就跳过这一步。\n2️⃣ Download Composer 点击主页，直接跟着命令走一遍就可以了。 输入命令查看是否安装成功 1 composer -v 3️⃣ Download Flarum 首先，这个框架放在哪里，apache服务器怎么配置需要弄明白。找到XAMPP的安装路径，在MAC中，此路径是 /Applications/XAMPP\n命令pwd查看路径。\n👉 Download Flarum in correct path Flarum框架下载的位置在 /Applications/XAMPP/xamppfiles/htdocs/flarum，htdocs文件夹下没有flarum这个文件夹，所以需要创建一个。\n1 2 cd /Applications/XAMPP/xamppfiles/htdocs/ mkdir flarum 创建完成后，进入此文件夹，输入下载命令。 1 2 3 4 5 cd /flarum // 检查路径是否正确 pwd // 下载 composer create-project flarum/flarum . --stability=beta 👉Apache config edit 返回XAMPP界面，点击Apache服务配置，点击【Open Config File】，找到 「\u0026lt;Directory」标签，默认的路径是“/Applications/XAMPP/xamppfiles/htdocs”\n1 2 3 4 5 \u0026lt;Directory \u0026#34;/Applications/XAMPP/xamppfiles/htdocs\u0026#34;\u0026gt; Options Indexes FollowSymLinks ExecCGI Includes AllowOverride All Require all granted \u0026lt;/Directory\u0026gt; 你可以选择不修改，因为Flarum文件夹就在htdocs文件下下面，那这样子的访问路径就是“http://localhost/flarum/public/”。如果Flarum框架的下载地址不在htdocs文件夹下，那么需要指定正确的文件夹路径。 如果你没有出现这个界面，而是出现了xxx权限不够情况是非常正常的。\n需要给Flarum文件夹赋予读写权限。 进入flarum文件夹下，给定777权限。 注意777是危险操作！如果在本地不考虑安全因素可以完全赋予777权限。 1 2 3 4 5 cd /Applications/XAMPP/xamppfiles/htdocs/flarum // . 的意思是该文件夹下所有的文件都有读写权限 sudo chmod -R 777 . // 或者根据提示文件夹赋予权限 sudo chmod -R 777 [文件夹名/文件名] 重启服务器，刷新页面就能看到一个全新的flarum界面。如上图，数据库的信息就是之前配置的（和云端部署的信息最好保持一致） 1 2 // 重启服务器 sudo apachectl restart 输入好之前创建的数据库用户名这类的就成功啦。\nCommon Apache CLI 1 2 3 4 5 6 7 8 // 启动服务器 sudo apachectl start // 重启服务器 sudo apachectl restart // 停止服务器 sudo apachectl stop 🍀 Summary 虽然在本地部署的是一个全新的flarum框架，在实际开发过程中大概率是不能次次重新部署的，所以下一步的计划就是云端和本地的来回迁移，更新。 另外，考虑将数据库与服务器分开部署。也许会增加一些费用，但灵活性更高。\n", 
            "url": "https:\/\/hupochuanbird.github.io\/posts\/depoly-locally-macos-apache2\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/posts\/flarum-deploy-to-cloud\/": {
            "title": "Flarum:部署到云端(ubuntu 22.04)",
            "tags": ["Tutorial","Cloud","Linux","Ubuntu",],
            "content": " 关于如何部署Flarum这个论坛框架有多种方法，1）直接linux命令 2）Docker部署 3）宝塔。 本文选第一种方法，因为简单，省内存。另外，建议所有的版本号最好都做记录，便于未来迁移。此配置不包含SSL\n1️⃣ Deployment preparation 一台服务器，选择ubuntu系统。 域名（可选，如果没有域名可以直接用ip访问）。 2️⃣ Login to the server 不论用什么服务商，点击连接到服务器。请直接输入一下命令，如果出现permission deny错误，请用 sudo命令。\n👉 Environment configuration 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 sudo apt update sudo apt upgrade -y sudo apt install wget unzip curl nano git -y sudo apt install apache2 -y sudo systemctl enable --now apache2 sudo a2enmod rewrite sudo systemctl restart apache2 # php 环境 sudo apt install php php-curl sudo apt install php php-dom sudo apt install php php-gd sudo apt install php php-json sudo apt install php php-mbstring sudo apt install php php-mysql sudo apt install php php-tokenizer sudo apt install php php-zip # 数据库， 当然也可以安装mysql sudo apt install mariadb-server -y sudo systemctl enable --now mariadb sudo mysql_secure_installation # 登陆数据库，创建schema，数据库名flarum_db，可以自定义 sudo mysql # 以下 是数据库sql CREATE DATABASE flarum_db; CREATE USER \u0026#39;flarum_user\u0026#39;@\u0026#39;localhost\u0026#39; IDENTIFIED BY \u0026#39;flarum_pass\u0026#39;; GRANT ALL PRIVILEGES ON flarum_db.* TO \u0026#39;flarum_user\u0026#39;@\u0026#39;localhost\u0026#39;; FLUSH PRIVILEGES; exit 以上就是php以及数据库必要环境，接下来是下载Composer，Composer是一个在PHP中进行依赖性管理的工具。\n👉 Composer download 1 2 3 4 5 curl -sS https://getcomposer.org/installer -o composer-setup.php sudo php composer-setup.php --install-dir=/usr/local/bin --filename=composer # 查看版本 composer -V 👉 Flarum Framework download 首先创建一个文件夹，在 /var/www/html/forum/ 路径下 1 2 3 4 5 6 7 8 9 10 sudo mkdir /var/www/html/forum/ # 跳转到此路径下进行下载 cd /var/www/html/forum/ sudo composer create-project flarum/flarum . --stability=beta # 此命令是给予Read权限 sudo chown -R www-data:www-data /var/www/html/forum/ sudo chmod -R 755 /var/www/html/forum/ 👉 Apache configuration 此配置的目的是为了指定域名，已经框架部署路径，在Ubuntu环境下，操作文件的命令是nano（Linux下是Vim）\n1 2 # 跳转到此路径下进行创建 flarum.conf 文件 sudo nano /etc/apache2/sites-available/flarum.conf 因为是新的文件，打开后切换编辑状态，复制以下内容： 主要改动的地方是 DocumentRoot 和 ServerName\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 \u0026lt;VirtualHost *:80\u0026gt; ServerAdmin admin@example.com DocumentRoot /var/www/html/forum/public ServerName www.youngbird97.top DirectoryIndex index.php \u0026lt;Directory /var/www/html/forum/public/\u0026gt; Options +FollowSymLinks AllowOverride All Order allow,deny allow from all \u0026lt;/Directory\u0026gt; ErrorLog /var/log/apache2/flarum-error_log CustomLog /var/log/apache2/flarum-access_log common \u0026lt;/VirtualHost\u0026gt; 保存文件并且退出。\n接下来，启用Flarum虚拟主机。 1 sudo a2ensite flarum 启用Apache重写模块，并且重启Apache服务。 1 2 3 4 5 sudo a2enmod rewrite sudo systemctl restart apache2 # 检查一下apache服务状态 systemctl status apache2 到目前为止，必要配置已经完成✅\n👉 Enabling the Ubuntu Firewall 启用 Ubuntu 防火墙 1 sudo ufw enable 检查防火墙的状态。确保你将使用的端口（SSH - 端口 22, HTTP - 端口 80）是允许的。 1 sudo ufw status 如果返回内容只有active，请输入一下命令: 1 sudo ufw allow 22,80/tcp 3️⃣ Check that all installations are successful 输入自己配置域名或者ip，正常情况下会看到这个页面，输入之前配置的数据库名称和密码， 再创建一个论坛账户（此账户是管理员账户）进行登陆。\n如果一切顺利，会直接进去到论坛首页。下图实际上已经配置了很多组建，特别是配置了中文插件，总之大概是这个样子。 如果出现访问不了的情况，请检查安全组是否开放了80端口\n参考 https://www.vultr.com/docs/how-to-install-flarum-forum-on-ubuntu-20-04/ 配置文档 https://extiverse.com/ 组件库 https://builtwithflarum.com/ 模板 此配置文档也许会在某一天因版本更新而失效，仅供参考（2023）。\n", 
            "url": "https:\/\/hupochuanbird.github.io\/posts\/flarum-deploy-to-cloud\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/linux\/": {
            "title": "Linux",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/linux\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/ubuntu\/": {
            "title": "Ubuntu",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/ubuntu\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/posts\/flarum-learn\/": {
            "title": "Flarum backup",
            "tags": ["Tutorial",],
            "content": "插件address https://extiverse.com/\n记录一下可能需要使用到的插件 https://extiverse.com/extension/acpl/mobile-tab\nhttps://extiverse.com/extension/fof/custom-footer\nhttps://extiverse.com/extension/askvortsov/flarum-categories\nhttps://extiverse.com/extension/fof/stopforumspam\nhttps://extiverse.com/extension/v17development/flarum-blog\nhttps://extiverse.com/extension/blomstra/usercard-stats\nhttps://extiverse.com/extension/justoverclock/custom-html-widget\nhttps://extiverse.com/extension/nearata/flarum-ext-signup-confirm-password\nhttps://extiverse.com/extension/sycho/flarum-advanced-extension-categories https://extiverse.com/extension/swaggymacro/only-starter\nhttps://extiverse.com/extension/datlechin/flarum-scroll-buttons\nhttps://extiverse.com/extension/pattinsonfuture/lang-traditional-chinese\nhttps://extiverse.com/extension/moerio/mixture\nhttps://extiverse.com/extension/askvortsov/flarum-categories\nhttps://extiverse.com/extension/fof/byobu https://extiverse.com/extension/v17development/flarum-user-badges\n测试地址 http://www.youngbird97.top/\n教程正在updating，此篇仅为备忘录\n", 
            "url": "https:\/\/hupochuanbird.github.io\/posts\/flarum-learn\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/format-date\/": {
            "title": "Format Date",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/format-date\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/posts\/format-dates-in-flutter\/": {
            "title": "Format Dates in Flutter",
            "tags": ["Format Date",],
            "content": "The article from geeksforgeeks\nThe Dart in-built method, for formatting, dates in Flutter according to the requirements is very limited and restrictive. While dealing with dates it should be in human-readable format but unfortunately, there’s no way of formatting dates in flutter unless you make use of a third-party package.\nIn this article, we will look into one such package known as the intl package.\nintl package Using intl package Add the following dependencies to your pubspec.yaml file, you can find the latest dependencies here.\n1 2 dependencies: intl: ^0.17.0 Add using terminal You can also get the latest intl library using terminal easily:\n1 flutter pub add intl Import it: That’s it now import intl package in your Dart code:\n1 import \u0026#39;package:intl/intl.dart\u0026#39;; Still, if you face any error using intl, simply use the following command:\n1 flutter pub get Now let’s take a look at the below example.\nExample In the below code we will not be using the intl package for formatting. Also, take a look at the output of the below code.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 import \u0026#39;package:flutter/material.dart\u0026#39;; void main() { runApp(dateDemo()); } class dateDemo extends StatelessWidget { @override Widget build(BuildContext context) { return MaterialApp( // browser tab title title: \u0026#34;Geeksforgeeks\u0026#34;, // Body home: Scaffold( // AppBar appBar: AppBar( // AppBar color backgroundColor: Colors.green.shade900, // AppBar title title: Text(\u0026#34;Geeksforgeeks\u0026#34;),\t), // Container or Wrapper body: Container(\tmargin: EdgeInsets.fromLTRB(95, 80, 0, 0), // printing text on screen child: Text(\t// Formatted Date // Builtin format / without formatting DateTime.now().toString(),\tstyle: TextStyle( // Styling text fontWeight: FontWeight.bold, fontSize: 30), ), )), ); } } More DateFormat Functions Use Description Example DateFormat.yMMMEd().format(date) Day Name ,Month Name ,Date,Year Fri, Sep 3, 2021 DateFormat.MEd().format(date) Day Name,Month/Date in Numbers Fri , 9/3 DateFormat.MMMMEEEEd().format(date)) DayName,MonthName Date Friday ,September 3 DateFormat.yMMMMEEEEd().format(date)) DayName ,MonthName Date,Year Friday ,September 3,2021 DateFormat.EEEE().format(date) Full DayName only Friday DateFormat.E().format(date) Short DayName Fri DateFormat.M().format(date) Month-Number 9 DateFormat.MMM().format(date) Short MonthName Sep DateFormat.LLLL().format(date) Full MonthName September DateFormat.j().format(date) Current Time only 4 PM ", 
            "url": "https:\/\/hupochuanbird.github.io\/posts\/format-dates-in-flutter\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/categories\/hibernate\/": {
            "title": "Hibernate",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/categories\/hibernate\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/hibernate\/": {
            "title": "Hibernate",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/hibernate\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/posts\/hibernate-initapi-slow\/": {
            "title": "Hibernate-FIX: Why request the initial POST\/PUT API takes long time in Hibernate Springboot",
            "tags": ["Hibernate","RESTful",],
            "content": "Discover Our project is Springboot + hibernate, each time I deploy the project to the cloud(not only the cloud, but also in the local dev), the first POST/PUT API need long time to execute.\nWe make several assumptions:\nDNS lookup TCP Handshake and SSL Handshake AWS RDS performance Code problem Assumption Assumption 1 \u0026mdash; DNS lookup In Postman, obviously it\u0026rsquo;s an ideal time. So, move to the next.\nAssumption 2 \u0026mdash;TCP/SSL Handshake Check the speed of handshake. Here is CLI, there is no any exception. So, move to the next.\n1curl -w \u0026#34;TCP handshake: %{time_connect}, SSL handshake: %{time_appconnect}\\n\u0026#34; -so /dev/null https://{your domain} 2 3TCP handshake: 0.057688, SSL handshake: 0.100967 Assumption 3 \u0026mdash; AWS RDS How to troubleshoot this problem? I run the server locally and connect to the AWS RDS as a DB source. as long as the server run locally, there is no any delay between RDS and backend, in other words, the problem is not related to RDS. Definitely code leads to potential bugs.\nAssumption 4 This screenshot already told me where is the problem happend there.\nHowever, troubleshooting in the backend is tedious.\nFirstly, Warping the execution code:\n1 2 3 long start = System.currentTimeMillis(); long end = System.currentTimeMillis(); log.error(\u0026#34;Elapsed Time in milli seconds: \u0026#34;+ (end-start)); For example:\nIn controller:\n1 2 3 4 5 6 7 8 9 10 11 @PostMapping(produces = \u0026#34;application/json\u0026#34;) public ResponseEntity\u0026lt;SupplierOrderDTO\u0026gt; createSupplierOrder( @Valid @RequestBody SupplierOrderDTO supplierOrderDTO) { long start = System.currentTimeMillis(); SupplierOrder savedSupplierOrder = supplierOrderService.createOrder( supplierOrderMapper.toEntity(supplierOrderDTO)); long end = System.currentTimeMillis(); log.error(\u0026#34;Elapsed Time in milli seconds: \u0026#34;+ (end-start)); return new ResponseEntity\u0026lt;\u0026gt;(supplierOrderMapper.toDTO(savedSupplierOrder), HttpStatus.CREATED); } In service :\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 public SupplierOrder createOrder(SupplierOrder newSupplierOrder) { long start = System.currentTimeMillis(); SupplierOrder savedSupplierOrder = saveOrder(newSupplierOrder); long end = System.currentTimeMillis(); log.error(\u0026#34;Elapsed Time in milli seconds: \u0026#34;+ (end-start)); return savedSupplierOrder; } private SupplierOrder saveOrder(SupplierOrder supplierOrderToSave) { long start = System.currentTimeMillis(); SupplierOrder supplierOrder = supplierOrderRepository.save(supplierOrderToSave); long end = System.currentTimeMillis(); log.error(\u0026#34;Elapsed Time in milli seconds: \u0026#34;+ (end-start)); return supplierOrder; } Print all the sql statement, we need to change some configuration in yml file:\n1 2 3 4 5 6 7 8 9 10 jpa: database-platform: org.hibernate.dialect.MySQL5InnoDBDialect database: MYSQL show-sql: true #show sql properties: hibernate.id.new_generator_mappings: true hibernate.cache.use_second_level_cache: false hibernate.cache.use_query_cache: false hibernate.format_sql: true #show sql hibernate.generate_statistics: true #show sql Then package the project run in inbuilt tomcat. Run this CLI in terminal under the target folder.\n1 java -jar (warname).war After the program start, head to Postman, run \u0026ldquo;create an order api\u0026rdquo;.\nIt takes 17s!!!!! insert method takes 16s, so let\u0026rsquo;s head to source code.\nIn the save method, before execute the creaete an order(add a new record to DB), the inner method will check the entity is already in the DB or not, so it will query in the DB. In fact, when I execute [persist] method. It faster than before. So I suppose, something happened in isNew function.\nI found a solution finally. Just overwrite the isNew function in each entity class.\nhttps://stackoverflow.com/questions/27573023/how-spring-data-jpa-decides-to-call-entitymanager-persist-or-entitymanager-me\nWhen I depoly to the cloud and execute the create function, it only takes 1s in the initial request!\nI am not sure it is a temporary fix or not\u0026hellip;..\n", 
            "url": "https:\/\/hupochuanbird.github.io\/posts\/hibernate-initapi-slow\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/categories\/java\/": {
            "title": "Java",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/categories\/java\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/categories\/jpa\/": {
            "title": "JPA",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/categories\/jpa\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/restful\/": {
            "title": "RESTful",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/restful\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/posts\/customize-search-in-flutter\/": {
            "title": "Customize search bar in Flutter",
            "tags": ["riverpod","state-management",],
            "content": "What\u0026rsquo;s effect we can realise? Custom search bar The search bar can be used in any listview page,when user texts something in different page should list the correct outcome. Customise text input ✨ Encapsulate TextFormField TextFormField widget is used to take input from the user in flutter. This is a simple and easy user input widget in flutter.\nWe can perform any operation on that user input data using TextFormField. You can use that user input, can send and show that input. You can store it into a TextEditingController type object.\nIn TextFormField, controller is important to monitor the text user input. focusNode is to monitor user wheater click the text bar.\nIn this search bar, when the text is empty, the suffix icon is \u0026ldquo;search\u0026rdquo;, whereas should be \u0026ldquo;close\u0026rdquo; icon.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 class CustomInputSearch extends ConsumerWidget { final TextEditingController controller = TextEditingController(); final FocusNode? focusNode; CustomInputSearch({key, this.focusNode }); @override Widget build(BuildContext context, WidgetRef ref) { final size = Applayout.getSize(context); final searchNotifier = ref.watch(searchProvider); print(\u0026#34;CustomInputSearch ${controller.text}\u0026#34;); return Container( height: Applayout.getHeight(50), width: Applayout.getHeight(size.width * .8), margin: EdgeInsets.symmetric( horizontal: size.width * 0.1, vertical: Applayout.getHeight(10), ), decoration: BoxDecoration( borderRadius: BorderRadius.circular(Applayout.getHeight(10)), color: Styles.bgColor2, ), child: TextFormField( focusNode: focusNode?? FocusNode(), onChanged: (value){ searchNotifier.setSearchValue(value); }, controller: controller, autofocus: false, decoration: InputDecoration( contentPadding: EdgeInsets.symmetric( horizontal: Applayout.getWidth(20), vertical: Applayout.getHeight(14), ), alignLabelWithHint: true, floatingLabelAlignment: FloatingLabelAlignment.start, suffixIcon: controller.text.trim().isNotEmpty ? IconButton( icon: Icon(Icons.clear_rounded, color: Styles.orangeColor), onPressed: () { controller.clear(); FocusManager.instance.primaryFocus?.unfocus(); searchNotifier.clearSearch(); },) : IconButton( icon: Icon(Icons.search, color: Styles.whiteColor), onPressed: null,), border: InputBorder.none, hintText: \u0026#39;Search ...\u0026#39;, hintStyle: Styles.textStyle, ), ), ); } } 📍 Use it in anywhere It\u0026rsquo;s very simple to use it. beacuse we use riverpod to monitor the textinput, we don\u0026rsquo;t need to pass textcontroller to watch value changes. 1 2 3 4 5 6 7 8 9 10 11 12 final FocusNode _searchFocusNode = FocusNode(); ..... // general use CustomInputSearch( focusNode: _searchFocusNode, ) // using in riverpod. ProviderScope(child: CustomInputSearch( focusNode: _searchFocusNode, ),), 👉 Monitor text changes and filter the target data by using Riverpod Riverpod is a state management library for Flutter developed by the same team behind the Provider library. Riverpod is designed to provide an improved API for managing state in Flutter apps, with a focus on performance, simplicity, and flexibility. Riverpod uses a concept called \u0026ldquo;Scoped Providers\u0026rdquo; to manage state within an app. A Scoped Provider is a function that takes a context and returns an object. The Scoped Provider is responsible for creating and managing the state for that object within the scope of the widget tree.\nImport riverpod plugin Here is riverpod offical website.\n1 2 3 4 5 6 7 8 environment: sdk: \u0026#34;\u0026gt;=2.17.0 \u0026lt;3.0.0\u0026#34; flutter: \u0026#34;\u0026gt;=3.0.0\u0026#34; dependencies: flutter: sdk: flutter flutter_riverpod: ^2.3.6 watch(provider) \u0026amp; read(provider) In Riverpod, watch and read are two ways to access the state of a provider. Here\u0026rsquo;s what they do:\nwatch(provider) Returns a value that will rebuild the widget tree whenever the state of the provider changes. Should be used inside a widget's build method to subscribe to changes in state. Returns a T object that can be accessed using the .state property. For example: watch(counterProvider).state Here's an example of how to use watch to subscribe to changes in a counter: 1 2 3 4 5 6 7 class MyCounterWidget extends StatelessWidget { @override Widget build(BuildContext context) { final counter = context.watch(counterProvider).state; return Text(\u0026#39;Counter: $counter\u0026#39;); } } read(provider): Returns the current value of the provider without subscribing to future changes. Should be used outside of a widget\u0026rsquo;s build method, such as in a button press or event handler. Returns a T object that can be accessed using the .state property. For example: final counter = context.read(counterProvider).state Here\u0026rsquo;s an example of how to use read to get the current value of a counter and update it:\n1 2 3 4 5 6 7 8 9 10 11 12 class MyButtonWidget extends StatelessWidget { @override Widget build(BuildContext context) { return RaisedButton( child: Text(\u0026#39;Increment Counter\u0026#39;), onPressed: () { final counter = context.read(counterProvider); counter.state++; }, ); } } It\u0026rsquo;s important to note that you should use watch inside a widget\u0026rsquo;s build method and read outside of it. Using read inside a build method can lead to unnecessary widget rebuilds and performance issues. Additionally, it\u0026rsquo;s generally recommended to use watch over read whenever possible, as watch provides a more reactive and efficient approach to managing state in Riverpod.\nCreate a SearchNotifier.dart file 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 import \u0026#39;package:flutter/cupertino.dart\u0026#39;; import \u0026#39;package:flutter_riverpod/flutter_riverpod.dart\u0026#39;; class SearchNotifier extends ChangeNotifier { Ref ref; String state = \u0026#34;\u0026#34;; SearchNotifier(this.ref) { state = \u0026#34;\u0026#34;; } void setSearchValue(String value) { state = value; notifyListeners(); } String get searchValue =\u0026gt; state; set searchValue(String value) { setSearchValue(value); notifyListeners(); } void clearSearch() { state = \u0026#34;\u0026#34;; notifyListeners(); } } final searchProvider = ChangeNotifierProvider.autoDispose\u0026lt;SearchNotifier\u0026gt;((ref) { return SearchNotifier(ref); }); In search bar, \u0026ldquo;watch\u0026rdquo; means when the value changed, the lasted value can be catched.\n1 final searchNotifier = ref.watch(searchProvider); Filter data based on text value In the listview page, \u0026ldquo;watch\u0026rdquo; the value in the real time. \u0026ldquo;cartListProvider\u0026rdquo; is another part to access data using RESTful api. We can define a function call \u0026ldquo;filterOrders\u0026rdquo; to filter the data.\n1 2 3 final value = ref.watch(searchProvider).state; filteredData = ref.read(cartListProvider(supplierId)).filterOrders(value); In cartListProvider.dart. 1 2 3 4 5 6 7 List\u0026lt;SupplierProductModel\u0026gt; filterOrders(String _searchString) { String lowerValue = _searchString.toLowerCase(); final filteredData = list.where((item) =\u0026gt; item.productName!.toLowerCase().contains(lowerValue) ).toList(); return filteredData; } Thanks.\n", 
            "url": "https:\/\/hupochuanbird.github.io\/posts\/customize-search-in-flutter\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/categories\/riverpod\/": {
            "title": "Riverpod",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/categories\/riverpod\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/riverpod\/": {
            "title": "Riverpod",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/riverpod\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/state-management\/": {
            "title": "State-Management",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/state-management\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/tailand\/": {
            "title": "Tailand",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/tailand\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/categories\/travle\/": {
            "title": "Travle",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/categories\/travle\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/travle\/": {
            "title": "Travle",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/travle\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/videos\/": {
            "title": "Videos",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/videos\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/videos\/thailand2020\/": {
            "title": "泰国旅行🇹🇭2020-怀念没有疫情的日子",
            "tags": ["Travle","Tailand",],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/videos\/thailand2020\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/categories\/reading\/": {
            "title": "Reading",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/categories\/reading\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/%E6%9D%B1%E9%87%8E%E5%9C%AD%E5%90%BE\/": {
            "title": "東野圭吾",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/%E6%9D%B1%E9%87%8E%E5%9C%AD%E5%90%BE\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/%E9%80%8F%E6%98%8E%E3%81%AA%E8%9E%BA%E6%97%8B\/": {
            "title": "透明な螺旋",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/%E9%80%8F%E6%98%8E%E3%81%AA%E8%9E%BA%E6%97%8B\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/posts\/%E9%80%8F%E6%98%8E%E3%81%AA%E8%9E%BA%E6%97%8B\/": {
            "title": "透明な螺旋 阅读感受",
            "tags": ["透明な螺旋","東野圭吾",],
            "content": "Intro 昨天在网上翻阅此书，这是东野圭吾2021的作品，算得上比较新，而且阅读十分顺畅，一口气读完，一如既往的贴合实际生活。自《嫌疑人X的献身》后，汤川教授再一次出现在我的记忆里。故事背景主要设定在现代日本的都市环境中，还结合了疫情口罩的情节（但不多）。\n「园香的男友死了，就在她报警称他失踪的一周后。他曾是她温暖的堡垒，如今却成了海上冰冷的浮尸。是谋殺。 案发时，园香正与友人在遥远的京都旅行。她有完美的不在场证明，没有作案动机，却在报警后选择了逃亡。 与此同时，另一个嫌疑人出现在警方视野中。那人的轮廓一点点变得清晰，真相仿佛呼之欲出。」\n最近几年，似乎女性题材变得更受欢迎，也许是更赚钱了吧，男作家对家暴的描述太写实了，即便是被打得遍体凌伤，女人永远是原谅，\n", 
            "url": "https:\/\/hupochuanbird.github.io\/posts\/%E9%80%8F%E6%98%8E%E3%81%AA%E8%9E%BA%E6%97%8B\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/posts\/how-to-use-this-theme-in-your-project\/": {
            "title": "How to Use This Theme in Your Project",
            "tags": ["installation",],
            "content": "Downlaod vscode Navigate to VsCode website, just download in your pc.\nInstall Hugo environment In hugo offical website, there are four options to install hugo env which depends on your operation system(OS).\nInstall Git Install Go version 1.18 or later Update your PATH environment variable as described in the Go documentation Hugo CLI Create a new site 1 2 3 4 hugo new site mywebsiteName # naviagate to the new folder, open in VScode cd mywebsiteName Download theme and import to themes folder You can clone theme project or download zip directly.\nAfter move the \u0026ldquo;dark-theme\u0026rdquo; to themes folder, don\u0026rsquo;t forget setting in config.toml 1 theme=\u0026#34;theme\u0026#39;s name\u0026#34; Run project 1 hugo server -D If the project runs successfully, you will see these info below:\nhttp://localhost:1313/ is your loacal running port.\nCreate a post If you want to write a blog, the command line is: 1 hugo new posts/xxxxx.md Then, you can notice hugo help you create a blog in posts folder.\nCompile and Upload to the cloud If it\u0026rsquo;s your first time to commit your changes. 1 2 3 4 5 6 7 8 9 hugo cd public git init git add ./ git commit -m \u0026#34;inital commit\u0026#34; git checkout -b master git branch -M master git remote add origin https://xxxx.git git push - u origin master otherwise, you just commit and push again\n1 2 3 4 5 6 hugo cd public git add ./ git commit -m \u0026#34;xx update\u0026#34; git checkout master git push - Here is tutorial about how to deploy to the github\n", 
            "url": "https:\/\/hupochuanbird.github.io\/posts\/how-to-use-this-theme-in-your-project\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/installation\/": {
            "title": "Installation",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/installation\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/categories\/github\/": {
            "title": "Github",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/categories\/github\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/github\/": {
            "title": "Github",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/github\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/posts\/how-to-deploy-to-github\/": {
            "title": "How to Deploy to Github",
            "tags": ["github","cloud",],
            "content": "How to Deploy to Github To deploy your Hugo site to GitHub Pages, you can follow these steps:\nFirst update baseURL in config.yaml baseURL: https://www.username.github.io Then compile with hugo 1 hugo Go to public folder 1 cd piblic Second, create a new repository on GitHub that will hold your website files. Make sure to name the repository in the format yourusername.github.io, where yourusername is your GitHub username. Don\u0026rsquo;t forget add github.io create a new repo for your personal website Setting: GitHub Pages site to master branch Next, navigate to the root of your Hugo project directory in a terminal window or command prompt. (we already in public folder) Initialize a new Git repository by running the command: 1 git init Add all the files in your Hugo project directory to the new Git repository by running the command: 1 git add ./ Commit the changes to the Git repository by running the command: 1 git commit -m \u0026#34;Initial commit\u0026#34; Set the remote repository to your new GitHub Pages repository by running the command: 1 2 git remote add origin https://github.com/yourusername/yourusername.github.io.git Replace \u0026lsquo;yourusername\u0026rsquo; with your actual GitHub username.\nHere we need to notice, if the default branch is not the master, please use this command first: 1 git checkout -b master Finally, push the changes to the remote repository by running the command: 1 git push -u origin master This will push the changes in your local Git repository to the remote repository on GitHub. You should now see your website files in the GitHub repository.\nTo make your website live, go to your repository settings on GitHub and scroll down to the GitHub Pages section. Select the master branch as your source and click on Save. Your website should now be accessible at https://yourusername.github.io. Note that it may take a few minutes for GitHub Pages to update and display your website after you have deployed it.\nThe full command 1 2 3 4 5 6 7 8 9 10 11 git init git checkout -b master git add ./ git commit -m \u0026#34;Initial commit\u0026#34; git branch -M master git remote add origin https://github.com/yourusername/yourusername.github.io.git git push -u origin master Visit your site Update your website When you change some files or write a new blog, you need push your change to github, the command is: 1 2 3 git add ./ git commit -m \u0026#34;commentxxxx\u0026#34; git push Problem you might meet yourname.github.io is 404 If you\u0026rsquo;re experiencing a 404 error after deploying your Hugo site to GitHub Pages, there are a few things you can try:\nCheck the spelling and capitalization of your repository name. Make sure it matches the URL you\u0026rsquo;re using to access your site. For example, if your repository is named my-hugo-site, your site should be accessible at https://yourusername.github.io/my-hugo-site/.\nVerify that you have set the correct repository source in your GitHub Pages settings. If you have multiple branches in your repository, make sure you\u0026rsquo;ve selected the correct one as the source for your GitHub Pages site. You can check this in your repository settings under the \u0026ldquo;GitHub Pages\u0026rdquo; section.\nCheck that you\u0026rsquo;ve pushed your Hugo site\u0026rsquo;s content to the correct branch. By default, GitHub Pages serves content from the gh-pages branch, so make sure you\u0026rsquo;ve pushed your site\u0026rsquo;s files to that branch. Alternatively, you can configure GitHub Pages to use a different branch or directory by changing the settings in your repository.\nVerify that your site\u0026rsquo;s content has been built correctly by running the hugo command locally and checking the generated files in the public/ directory. If the files are missing or incomplete, you may need to troubleshoot your Hugo configuration.\nIf you\u0026rsquo;re using a custom domain, make sure it\u0026rsquo;s set up correctly and that your DNS settings are configured properly. This can sometimes cause issues with GitHub Pages sites.\nWait a few minutes and try accessing your site again. It can sometimes take a few minutes for changes to propagate through GitHub Pages.\nIf none of these solutions work, you may need to consult the Hugo documentation or reach out to the GitHub support team for further assistance.\n", 
            "url": "https:\/\/hupochuanbird.github.io\/posts\/how-to-deploy-to-github\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/busuanzi\/": {
            "title": "Busuanzi",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/busuanzi\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/posts\/how-to-calculate-the-number-of-views\/": {
            "title": "How to Calculate the Number of Views",
            "tags": ["busuanzi","plugin",],
            "content": "How to Calculate the Number of Views Busuanzi is a third-party visitor counter and statistics tool that you can use with Hugo to track visitor traffic to your site. Here\u0026rsquo;s how to set up Busuanzi in Hugo:\nFirst, go to the Busuanzi website (https://busuanzi.ibruce.info/) and choose the style of the visitor counter you want to use. You can choose from several different styles and customize the text that appears alongside the counter.\nOnce you\u0026rsquo;ve selected your counter style, copy the HTML code provided by Busuanzi. This code should look something like this:\n1 2 \u0026lt;span id=\u0026#34;busuanzi_container_site_pv\u0026#34;\u0026gt; Views \u0026lt;span id=\u0026#34;busuanzi_value_site_pv\u0026#34;\u0026gt;\u0026lt;/span\u0026gt;times\u0026lt;/span\u0026gt; In your Hugo project, open the layout file where you want to add the Busuanzi counter. For example, if you want to add the counter to your site\u0026rsquo;s footer, you might open the footer.html layout file.\nPaste the Busuanzi HTML code into the layout file where you want the counter to appear. Be sure to replace any existing code in that location, or add it to a new location if you\u0026rsquo;re creating a new element.\nSave the layout file and rebuild your Hugo site. The Busuanzi counter should now appear on your site.\nNote that Busuanzi is a third-party tool and may have limitations or restrictions on usage depending on your site\u0026rsquo;s traffic volume. Be sure to read the Busuanzi documentation carefully and follow any usage guidelines or restrictions to avoid any issues with your site\u0026rsquo;s performance or reliability.\nAdd busuanzi in Config.toml 1 2 3 4 5 [params.busuanzi_count] enable = true site_uv = true site_pv = true page_pv = true Where to use it? In footer.html Go the the footer.html, we add the default html in our custom footer.\n1 2 3 4 5 6 7 8 9 \u0026lt;span id=\u0026#34;busuanzi_container_site_uv\u0026#34; class=\u0026#34;busuanzi_container_site_uv\u0026#34;\u0026gt; \u0026lt;i class=\u0026#34;fa-solid fa-chart-simple\u0026#34;\u0026gt;\u0026lt;/i\u0026gt; TotalView\u0026amp;nbsp; \u0026lt;span id=\u0026#34;busuanzi_value_site_uv\u0026#34; class=\u0026#34;busuanzi_value_site_uv\u0026#34;\u0026gt;\u0026lt;/span\u0026gt; \u0026lt;/span\u0026gt;| \u0026lt;span id=\u0026#34;busuanzi_container_site_pv\u0026#34; class=\u0026#34;busuanzi_container_site_pv\u0026#34;\u0026gt; \u0026lt;i class=\u0026#34;fa-solid fa-eye\u0026#34;\u0026gt;\u0026lt;/i\u0026gt;Visitor\u0026amp;nbsp; \u0026lt;span id=\u0026#34;busuanzi_value_site_pv\u0026#34; class=\u0026#34;busuanzi_value_site_pv\u0026#34;\u0026gt;\u0026lt;/span\u0026gt; \u0026lt;/span\u0026gt; Note id and class you cannot define by yourself, but you can change the icon.\nImplement pulgin successfully In post page (post_meta.html) In blog page, we need to know how many users view our article. Go the post_meta.html, Just add only one line.\n1 \u0026lt;span id=\u0026#34;busuanzi_value_page_pv\u0026#34;\u0026gt; \u0026lt;/span\u0026gt; ", 
            "url": "https:\/\/hupochuanbird.github.io\/posts\/how-to-calculate-the-number-of-views\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/plugin\/": {
            "title": "Plugin",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/plugin\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/posts\/how-to-write-a-blog\/": {
            "title": "How to Write a Blog in Hugo",
            "tags": ["write a blog",],
            "content": "How to Write a Blog in Hugo In hugo, the blogs/articles/posts all store in the content/posts/ folder.\nPath of Posts folder 1 2 3 4 hugo new posts/xxxmd # such as I create this post hugo new posts/How-to-write-a-blog.md # don\u0026#39;t use space in filename!!! \u0026ldquo;posts\u0026rdquo; means, create a md file under the posts folder(is also default blog folder)\nStructure of Post page Structure of Post/blog page This page is like a jigsaw puzzle with several chapters combined, this is done so that the code can call on different structures on other pages, reducing code repetition.\nCount how many words in your blog This is built-in function countwords.\n1 2 # allow md file shows HTML format \u0026lt;i class=\u0026#34;fa fa-book\u0026#34;\u0026gt;\u0026lt;/i\u0026gt;\u0026amp;nbsp;\u0026lt;span\u0026gt;{{ .Content | countwords }} Words\u0026lt;/span\u0026gt; What\u0026rsquo;s the markdowm(MD) file? In Hugo, Markdown (often abbreviated as MD) is a lightweight markup language used to create content for web pages. It allows you to write content using plain text and simple syntax that can be easily converted to HTML by Hugo. Markdown is a popular format for creating web content because it is easy to learn and write, and can be easily converted to HTML without the need for complex formatting tools. In Hugo, you can create Markdown files to define the content of your website. Each Markdown file typically represents a single page or blog post on your site, and contains the content of that page in Markdown format. For example, if you wanted to create a blog post about a topic, you would create a Markdown file with the post\u0026rsquo;s content in it. Markdown files in Hugo typically have a .md extension and are stored in the content directory of your Hugo project. When Hugo builds your website, it processes each Markdown file and converts it to HTML, which can then be served to visitors of your site. Markdown files in Hugo can include additional metadata in the form of front matter, which is written in YAML, TOML or JSON format and placed at the beginning of the Markdown file. This metadata can be used to provide additional information about the content, such as the page\u0026rsquo;s title, author, and publication date. Using HTML tags in MD file In hugo, you also can write HTML in MD file. Yeah, super convenient, right? As I mentioned in my first post, to display HTML tags in the md file requires configuration in the configuration file(config.toml). 1 2 3 4 5 6 7 # allow md file shows HTML format [markup] [markup.goldmark] [markup.goldmark.renderer] unsafe= true hardWraps = false xhtml = false In hugo offical website, you also can find this configuration.\nOutput format of post 1 2 3 4 5 6 7 8 [permalinks] post = \u0026#34;/:year/:month/:title/\u0026#34; [frontmatter] date = [\u0026#34;date\u0026#34;, \u0026#34;publishDate\u0026#34;, \u0026#34;lastmod\u0026#34;] lastmod = [\u0026#34;lastmod\u0026#34;, \u0026#34;:git\u0026#34;, \u0026#34;date\u0026#34;, \u0026#34;publishDate\u0026#34;] publishDate = [\u0026#34;publishDate\u0026#34;, \u0026#34;date\u0026#34;] expiryDate = [\u0026#34;expiryDate\u0026#34;] Permalinks In your site configuration, set a URL pattern for regular pages within a top-level section. This is recursive, affecting descendant regular pages. The permalinks defined in your site configuration do not apply to section pages. To adjust the URL for section pages, set url in front matter.\nHugo offical doc More Information you can visit to hugo offical website\nMarkdowm file editor recommended Typora is a great md editor, you can write or organise blog using general format like microsoft word. After you finish the article, just copy paste to the md file.\n(Note: free version you can ask for the author)", 
            "url": "https:\/\/hupochuanbird.github.io\/posts\/how-to-write-a-blog\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/write-a-blog\/": {
            "title": "Write a Blog",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/write-a-blog\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/posts\/add-icon-menu\/": {
            "title": "Add Icon\/Active class In Menu",
            "tags": ["hugo","menu",],
            "content": "How to custom Icon in menu In the [Hugo introduction] blog, I have shown how the menu is added in hugo. Following the previous article on how to customize social media, did you think that to display the menu you would need to add an icon property? 😂😂😂 Head to config.toml file, 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 # setup menu sectionPagesMenu = \u0026#34;main\u0026#34; [menu] [[menu.main]] name = \u0026#34;Home\u0026#34; pre = \u0026#39;\u0026lt;i class=\u0026#34;fa-solid fa-house\u0026#34;\u0026gt;\u0026lt;/i\u0026gt;\u0026#39; url = \u0026#34;/\u0026#34; weight = 1 [[menu.main]] name = \u0026#34;My Blog\u0026#34; pre = \u0026#39;\u0026lt;i class=\u0026#34;fa-solid fa-paper-plane\u0026#34;\u0026gt;\u0026lt;/i\u0026gt;\u0026#39; url = \u0026#34;/posts/\u0026#34; identifier = \u0026#34;posts\u0026#34; weight = 2 [[menu.main]] name = \u0026#34;Tags\u0026#34; pre = \u0026#39;\u0026lt;i class=\u0026#34;fa-solid fa-tag\u0026#34;\u0026gt;\u0026lt;/i\u0026gt;\u0026#39; identifier = \u0026#34;tags\u0026#34; url = \u0026#34;/tags/\u0026#34; weight = 3 [[menu.main]] name = \u0026#34;Abouts\u0026#34; pre = \u0026#39;\u0026lt;i class=\u0026#34;fa-sharp fa-solid fa-medal\u0026#34;\u0026gt;\u0026lt;/i\u0026gt;\u0026#39; identifier = \u0026#34;about\u0026#34; url = \u0026#34;/about/\u0026#34; weight = 4 We add icon in \u0026ldquo;pre\u0026rdquo;. The icon library I use is the common fontawesome. In the menu.html, just using hugo syntax {{.Pre}} to display icon. 1 2 3 4 5 6 7 8 {{ range .Site.Menus.main }} \u0026lt;a href=\u0026#34;{{ .URL }}\u0026#34; title=\u0026#34;{{ .Name }}\u0026#34;\u0026gt; \u0026lt;li class=\u0026#34;hover\u0026#34;\u0026gt; {{ .Pre }} {{ .Name }} \u0026lt;/li\u0026gt; \u0026lt;/a\u0026gt; {{ end }} How to add active class in menu This is an additional attribute that highlights a menu when it is clicked on.\nWe need to use the built-in syntax, such as \u0026ldquo;eq\u0026rdquo; \u0026ldquo;delimit\u0026rdquo; \u0026ldquo;split\u0026rdquo;. More infomation 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 {{ $currentPage := . }} {{ range .Site.Menus.main }} {{ $menu_item_url := .URL | relLangURL }} {{ $page_url:= $currentPage.RelPermalink | relLangURL }} {{ $segments1 := delimit (split $menu_item_url \u0026#34;/\u0026#34;) \u0026#34;/\u0026#34; }} {{ $segments2 := delimit (split $page_url \u0026#34;//\u0026#34;) \u0026#34;/\u0026#34; }} {{ $section1 := first 6 $segments1 }} {{ $section2 := first 6 $segments2 }} \u0026lt;!-- {{ printf \u0026#34;segments1 = %s \u0026#34; $section1 }} {{ printf \u0026#34;segments2 = %s \u0026#34; $section2 }} --\u0026gt; \u0026lt;a href=\u0026#34;{{ $menu_item_url }}\u0026#34; title=\u0026#34;{{ .Name }}\u0026#34;\u0026gt; \u0026lt;li class=\u0026#34;hover {{if eq $section2 $section1 }} active {{end}}\u0026#34;\u0026gt; {{ .Pre }} {{ .Name }} \u0026lt;/li\u0026gt; \u0026lt;/a\u0026gt; {{ end }} In tailwind.css, I add a new class name active. You can overwrite your active attributes, such as color, box-shadow, size and so on. 1 2 3 4 #menu .active { color: #ffb703; font-size: 1.15rem; } ", 
            "url": "https:\/\/hupochuanbird.github.io\/posts\/add-icon-menu\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/menu\/": {
            "title": "Menu",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/menu\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/posts\/add-social-media\/": {
            "title": "Add Social Media in hugo",
            "tags": ["custom","hugo",],
            "content": "Add your social media in config.toml You can add social media in HTML directly, also, can use config file which is easy to change every time you want to update.\n1 2 3 4 5 6 7 8 9 10 11 12 13 [params] [[params.social]] url = \u0026#34;https://twitter.com/\u0026#34; icon = \u0026#34;fa-brands fa-twitter fa-lg\u0026#34; [[params.social]] url = \u0026#34;https://facebook.com/\u0026#34; icon = \u0026#34;fa-brands fa-facebook fa-lg\u0026#34; [[params.social]] url = \u0026#34;https://linkedin.com/\u0026#34; icon = \u0026#34;fa-brands fa-linkedin fa-lg\u0026#34; [[params.social]] url = \u0026#34;https://linkedin.com/\u0026#34; icon = \u0026#34;fa-brands fa-instagram fa-lg\u0026#34; Using in HTML page Because header and footer both show social media, we just write a singe HTML, them import to some places you want to display. 1 2 3 4 5 6 7 {{ with $.Site.Params.social }} {{ range . }} \u0026lt;a href=\u0026#34;{{ .url }}\u0026#34;\u0026gt; \u0026lt;i class=\u0026#34;{{ .icon}}\u0026#34;\u0026gt;\u0026lt;/i\u0026gt; \u0026lt;/a\u0026gt; {{ end }} {{ end }} Import to somewhere How to import social-media template to header In hugo, if you want to use global var, the synatx is $.Site.xxx. In this case is [$.Site.Params.social ]; Range is the loop function. Icon Source In this project, I choose fontawesome as the icon source. You also can determine which icon library you want to use. Popular choices include Font Awesome, Material Icons, and Bootstrap Icons. You can either download the icon library and include it in your Hugo project or use a CDN link.\n", 
            "url": "https:\/\/hupochuanbird.github.io\/posts\/add-social-media\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/custom\/": {
            "title": "Custom",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/custom\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/posts\/whats-the-taxonomy\/": {
            "title": "Taxonomy",
            "tags": ["taxonomy",],
            "content": "👀 What\u0026rsquo;s the Taxonomy? In Hugo, a taxonomy is a way of organizing your content based on specific attributes or categories. Taxonomies are used to create grouping mechanisms for your content, allowing you to easily organize, sort, and filter your pages based on common characteristics.\nHugo supports several types of taxonomies, including:\nTags: A list of keywords or phrases that describe the content of a page. Tags are typically used to group related content together, regardless of the page\u0026rsquo;s location or content type.\nCategories: A hierarchical grouping of pages based on their subject matter. Categories are typically used to group pages within a specific content type, such as blog posts or documentation pages.\nSeries: A grouping of related pages that are part of a larger series or sequence. Series are typically used to organize content that is meant to be read in a specific order, such as chapters of a book or episodes of a podcast.\nTo create a taxonomy in Hugo, you need to define it in your site\u0026rsquo;s configuration file and specify the content types that it applies to. You can then add taxonomy terms to your content files using front matter or other methods, allowing you to categorize and organize your content according to your desired taxonomy.\n1 2 3 4 [taxonomies] tag = \u0026#34;tags\u0026#34; category = \u0026#34;categories\u0026#34; archive = \u0026#34;archives\u0026#34; Once you have created a taxonomy and assigned terms to your content, you can use Hugo\u0026rsquo;s built-in functions to generate taxonomy pages that display all the pages associated with a particular term. You can also use taxonomies to create navigation menus, filtering options, or other dynamic features that make it easier for users to explore and discover your content.\nAdd tags and categories in posts template Head to archetypes/posts.md, in Hugo, archetypes are pre-defined templates for new content files. They are used to create new content files with a specific structure and pre-populated metadata, such as the title, date, and author.\nArchetypes are useful for maintaining consistency in the structure and metadata of your content files, and for saving time when creating new content. When you create a new content file using an archetype, the file will already have the necessary metadata and structure, so you can focus on writing the content itself.\nHere I define some parameters in posts template, we mainly foucs on tags and categories, hugo can help us to category by categories and tags. The name (tags and categories) must match the params defined in config.toml.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 title: \u0026#34;{{ replace .Name \u0026#34;-\u0026#34; \u0026#34; \u0026#34; | title }}\u0026#34; date: {{ .Date }} lastmod: {{ .Date }} subTitle: \u0026#34;subTitle\u0026#34; description: \u0026#34;this is description\u0026#34; draft: false type: posts label: \u0026#34;orginal\u0026#34; author: {{ .Site.Params.author}} tags: [tag1, tag2, tag3] categories: [cate1,cate2] cover: position: \u0026lt;left,right\u0026gt; image: \u0026#34;\u0026#34; alt: \u0026#34;\u0026lt;alt text\u0026gt;\u0026#34; caption: \u0026#34;\u0026lt;text\u0026gt;\u0026#34; Additionally, If the draft is false, the post will not display in the list page.\nWhere to display all my blogs/posts/articles? list.html is a template file used in Hugo, which is a popular static site generator. In Hugo, a list page refers to a page that displays a list of content items from a specific section or taxonomy.\nThe list.html template is used to render these list pages in Hugo. It typically includes elements such as a header, footer, and navigation menu, as well as a loop that iterates through the list of content items and displays them in a specific format.\nThe exact content and structure of the list.html template will depend on the specific requirements of your website or project. However, in general, it should provide a clear and organized way for visitors to navigate and browse through the content on your site.\nlist.html(to display all the posts) Go to the layouts folder, we create a posts folder and list.html( In fact the list template is also created automatically by hugo, I just move to posts folder make it easier to understand ), hugo can directly find the HTML file name list.html. my project How to display all the posts, you can overwrite css or change the layout. Define how many posts shows in a page In config.toml, we add this configuration below: 1 2 3 # Pagination paginate = 10 paginatePath = \u0026#34;page\u0026#34; List all the post by time In hugo, the synatx of Iterates is {range (xxxx) end}\n1 2 3 4 5 6 7 8 9 10 11 {{ range (.Paginate (.Pages.GroupByDate \u0026#34;2006-01\u0026#34;)).PageGroups }} \u0026lt;div class=\u0026#34;result\u0026#34; role=\u0026#34;group\u0026#34;\u0026gt; {{ $month := printf \u0026#34;%s%s\u0026#34; .Key \u0026#34;-01\u0026#34;}} \u0026lt;h2 class=\u0026#34;result__title\u0026#34;\u0026gt;{{ $month | time.Format \u0026#34;January 2006\u0026#34; }}\u0026lt;/h2\u0026gt; {{ range .Pages }} {{ partial \u0026#34;archiveItem.html\u0026#34; (dict \u0026#34;context\u0026#34; .) }} {{ end }} \u0026lt;/div\u0026gt; {{ end }} archiveItem.html is another template, you also write your post list in the same HTML.\nWhere to display my blogs/posts/articles according to a tag or category? After we add [taxonomies] to config.toml, Hugo will help us to category, still use list.html to display some specific posts.\nlist.html list.html ", 
            "url": "https:\/\/hupochuanbird.github.io\/posts\/whats-the-taxonomy\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/taxonomy\/": {
            "title": "Taxonomy",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/taxonomy\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/aboutme\/": {
            "title": "Aboutme",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/aboutme\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/posts\/create-a-custom-page\/": {
            "title": "Create a custom page",
            "tags": ["hugo","custom","aboutme",],
            "content": "Create a custom page: about me About page is not the default page, easily we can consider about.html is a other type of posts, so we need to create a post: the command-line interface (CLI) is: 1 hugo new posts/\u0026lt;post-name\u0026gt;.md in this case, we need to type: 1 2 3 hugo new about/_index.md # create a new folder named about, we separate posts folder(default blog folder) and custom folder you might ask why is md file not HTML? In fact, md(markdown) file can store the metadata of your article, about page is a special type of blog. when the application runs, the program will search _index file at first.\nPage structure Page structure We can notice, there are some metadatas I have defined in archetype, [title,date, type,layout\u0026hellip;], we need to create a about.html for the about page.\nCreate about.html Head to layout/ folder, create a html file name about, paste the html content to your about page. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 {{- define \u0026#34;main\u0026#34; }} \u0026lt;section class=\u0026#34;s:mt-10\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;container\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;flex flex-col sm:flex-row gap-8 sm:my-14\u0026#34;\u0026gt; \u0026lt;!-- Photo --\u0026gt; \u0026lt;div class=\u0026#34;sm:w-2/5 sm:mt-10\u0026#34;\u0026gt; \u0026lt;img src=\u0026#34;{{ $.Site.Params.aboutImage }}\u0026#34;\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;w-full sm:w-3/5 sm:mt-10\u0026#34;\u0026gt; \u0026lt;!-- Content --\u0026gt; {{ .Content }} \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/section\u0026gt; {{- end }} \u0026lt;!-- .Content is the hugo syntax, load the content you write in md file --\u0026gt; The fix HTML structure is, you can use it in any html file. 1 2 3 4 5 6 7 8 {{- define \u0026#34;main\u0026#34; }} \u0026lt;section class=\u0026#34;s:mt-10\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;container\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;flex flex-col sm:flex-row gap-8 sm:my-14\u0026#34;\u0026gt; \u0026lt;!-- add you html content or md content --\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/section\u0026gt; {{- end }} ’define \u0026ldquo;main\u0026rdquo;‘ you can consider it as a tag which will render in the index page automatically 1 {{- define \u0026#34;main\u0026#34; }}xxxx{{- end }} about page using HTML and md file\nUsing HTML tag in md file In hugo, it provides more flexible way to custom your own HTML page, you can write HTML code in pure HTML file, or you can use HTML tag in MD file. You need add this configuration in config.toml. 1 2 3 4 5 6 7 # allow md file shows HTML format [markup] [markup.goldmark] [markup.goldmark.renderer] unsafe= true hardWraps = false xhtml = false about page using HTML\n", 
            "url": "https:\/\/hupochuanbird.github.io\/posts\/create-a-custom-page\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/about\/": {
            "title": "About me",
            "tags": [],
            "content": "Hello, I\u0026rsquo;m xxx kdm ", 
            "url": "https:\/\/hupochuanbird.github.io\/about\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/oxford\/": {
            "title": "Afxord",
            "tags": [],
            "content": "Hello, I\u0026rsquo;m xxx ", 
            "url": "https:\/\/hupochuanbird.github.io\/oxford\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/": {
            "title": "Tags",
            "tags": [],
            "content": "Hello, I\u0026rsquo;m TAG ", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/entry\/": {
            "title": "Entry",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/entry\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/posts\/hugo-introduction\/": {
            "title": "Hugo introduction",
            "tags": ["entry","introduction",],
            "content": "Hugo Introduction Basic Description Hugo is a popular open-source static site generator that allows you to create fast and efficient websites without relying on a database or server-side scripting. The structure of a Hugo site includes the following elements:\nContent folder: This folder contains all the content of your website, including pages, blog posts, images, and other media. The content is typically written in Markdown, which is a lightweight markup language. Static folder: This folder contains all the static assets of your website, including CSS stylesheets, JavaScript files, images, and other media files. These assets are not generated dynamically and are instead served as-is. Archetypes folder: This folder contains templates for creating new content files. You can create templates for different types of content, such as blog posts or pages, to make it easy to create new content quickly. Themes folder: This folder contains all the templates, stylesheets, and other assets for your website\u0026rsquo;s theme. You can choose from a variety of pre-built themes or create your own. Config file: This file contains configuration settings for your Hugo site, such as the site title, language, and other global settings. Layouts folder: This folder contains templates for generating the HTML output of your website. You can create templates for different types of pages, such as the homepage, blog index, or individual blog posts. Data folder: This folder contains data files that are used to generate your website, such as site configuration settings, lists of authors or categories, or other metadata. Project structure In this case, we need to introduce our theme in theme folder, in terms of structure of theme, logically it the same as the default one.\nIt\u0026rsquo;s worth to notice that Config file [config.toml] we define a lot of global variables, I will reveal in the next section, including how to introduce custom theme.\nHugo Theme Hugo themes are collections of templates, stylesheets, and other assets that determine the appearance and behavior of a Hugo website. The structure of a Hugo theme typically includes the following elements:\nLayouts folder: This folder contains the templates that generate the HTML output of your website. It is organized by the content type (e.g., posts, pages) and can include a variety of template files, such as base templates, list templates, and single templates. Static folder: This folder contains all the static assets of the theme, including CSS stylesheets, JavaScript files, images, and other media files. These assets are not generated dynamically and are instead served as-is. Assets folder: This folder contains the source files for the theme\u0026rsquo;s stylesheets and scripts, as well as any other assets that need to be compiled or processed before being served to the browser. Config file: This file contains configuration settings for the theme, such as the theme name, author, and other global settings. Archetypes folder: This folder contains templates for creating new content files using the theme. i18n folder: This folder contains translation files for the theme in different languages. Shortcodes folder: This folder contains reusable snippets of code that can be used in content files to add custom functionality to the website. Partials folder: This folder contains smaller, reusable template files that can be included in other templates to reduce duplication and improve maintainability. By following this structure, Hugo themes can be easily shared and reused, allowing developers to quickly create new websites with a consistent look and feel.\nHow hugo run the application? We mainly focus on layouts folder. In _default folder, baseof.html is the entry port, index.html is the home\nPreparation Before go through the custom theme, here are some MUST TO READ documents you need to read.\nTemplating page-bundles Hugo menu Pagination Partial Templates Single Page Templates Content View Templates Taxonomies Variables and Params Function .Format Function .Param Config.toml file In config.toml, we can setup theme and define all the global variables, such as website url, website name, your name as the author, social media and so on.\nIntroduce theme 1 theme = \u0026#39;dark-theme\u0026#39; # the name should match your theme\u0026#39;s name in the theme folder Setup menu 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 # setup menu sectionPagesMenu = \u0026#34;main\u0026#34; [menu] [[menu.main]] name = \u0026#34;Home\u0026#34; pre = \u0026#34;home\u0026#34; url = \u0026#34;/\u0026#34; weight = 1 [[menu.main]] name = \u0026#34;My Project\u0026#34; pre = \u0026#34;posts\u0026#34; url = \u0026#34;/posts/\u0026#34; identifier = \u0026#34;posts\u0026#34; weight = 2 [[menu.main]] name = \u0026#34;Tags\u0026#34; pre = \u0026#34;tag\u0026#34; identifier = \u0026#34;tags\u0026#34; url = \u0026#34;/tags/\u0026#34; weight = 3 [[menu.main]] name = \u0026#34;Abouts\u0026#34; pre = \u0026#34;about\u0026#34; identifier = \u0026#34;about\u0026#34; url = \u0026#34;/about/\u0026#34; weight = 4 Hugo provides some default menu: posts,tags and categories. For the posts, generally it shows all your articles(blog), we will define the posts structure later.\nCommon js and css HTML structure Every html page contains some same css files and js files, such as same header and footer. In Layout/partials folder, hugo helps us to generate head.html, footer.html already, but we can create another two html to write js and css. Head and footer we use to write common navigation and footer parts;\nHeader and footer-script are for common css and js. Default HTML Entry Point \u0026mdash; baseof.html In layouts/_default folder, baseof.html is the main entrance, so we import the common HTML in the baseof.html, such as header, footer and main body.\nbaseof.html\nThis part is the dynamic content we reuse in each html, in other words, when user click different HTML page, it\u0026rsquo;ll show different content, but the header(navigation menu) and footer are the same. 1 {{- block \u0026#34;main\u0026#34; .}}xxxxxx{{- end}} display different content homepage \u0026mdash; index.html index.html\n_index.md\nIf we want to use the parameters we define in the md file, the syntax is 1 {{.Params.typed_names }} If we want to use the parameters we define in the config file(Global parameters), the syntax is 1 {{ $.Site.Params.homepage }} Article/post page \u0026mdash; single.html In Hugo, the single.html file is a template file used to display individual content pages, such as a single blog post or a single page on your website.\nThe single.html template can include Hugo variables and functions to display dynamic content, such as the title, date, author, and content of the page. You can also add custom CSS styles or JavaScript scripts to enhance the layout and functionality of your pages.\nOnce you have created the single.html template in your theme\u0026rsquo;s layouts directory, Hugo will automatically use it to display individual content pages on your website. If you want to customize the layout for specific types of content, you can create additional templates with different names, such as single-blog.html or single-page.html, and specify their usage in your Hugo configuration file.\nsingle.html ", 
            "url": "https:\/\/hupochuanbird.github.io\/posts\/hugo-introduction\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/introduction\/": {
            "title": "Introduction",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/introduction\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/": {
            "title": "Home",
            "tags": [],
            "content": "Hello, I\u0026rsquo;m yejia Yang\nI\u0026rsquo;m a backend developer, currently work for a startup company\nI like learning something new.\n", 
            "url": "https:\/\/hupochuanbird.github.io\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/christmas\/": {
            "title": "Christmas",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/christmas\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/gallery\/dublin-christmas-2021\/": {
            "title": "Dublin Christmas in 2021",
            "tags": ["Christmas","happynewyear",],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/gallery\/dublin-christmas-2021\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/happynewyear\/": {
            "title": "Happynewyear",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/happynewyear\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/categories\/galway\/": {
            "title": "Galway",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/categories\/galway\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/gallery\/galway-2021-christmas\/": {
            "title": "Galway Christmas in 2021",
            "tags": ["travel",],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/gallery\/galway-2021-christmas\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/tags\/travel\/": {
            "title": "Travel",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/tags\/travel\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/categories\/2021\/": {
            "title": "2021",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/categories\/2021\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/categories\/kinsale\/": {
            "title": "Kinsale",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/categories\/kinsale\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/gallery\/kinsale-2021\/": {
            "title": "Kinsale visit 2021",
            "tags": ["travel",],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/gallery\/kinsale-2021\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/archives\/": {
            "title": "Archive",
            "tags": [],
            "content": "Hello, I\u0026rsquo;m Archives ", 
            "url": "https:\/\/hupochuanbird.github.io\/archives\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/search\/": {
            "title": "Search me!",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/search\/"
        },
        
        "https:\/\/hupochuanbird.github.io\/series\/": {
            "title": "Series",
            "tags": [],
            "content": "", 
            "url": "https:\/\/hupochuanbird.github.io\/series\/"
        },
        
    }
</script>



<script async src="https://www.googletagmanager.com/gtag/js?id=G-C427NV2JKE"></script>
<script>
    window.dataLayer = window.dataLayer || [];

    function gtag() {
        dataLayer.push(arguments);
    }

    gtag('js', new Date());

    gtag('config', 'G-C427NV2JKE');
</script>

        </div><script src="/js/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="/js/particles.min.js"></script>
<script src="/js/typed/typed.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.umd.js"></script>

<script src="/js/main.js?v=2"></script>
<script src="/js/testdd.js?v=1"></script>



<script>
    function toggleTheme() {
      const currentTheme = localStorage.getItem('theme') || 'light';
      const newTheme = currentTheme === 'light' ? 'dark' : 'light';
      document.documentElement.setAttribute('data-theme', newTheme);
      localStorage.setItem('theme', newTheme);
      updateIcon(newTheme);
    }
  
    function updateIcon(theme) {
      const themeSwitch = document.getElementById('theme-switch');
      if (theme === 'dark') {
        themeSwitch.checked = true;
      } else {
        themeSwitch.checked = false;
      }
    }
  
    document.addEventListener('DOMContentLoaded', (event) => {
      const savedTheme = localStorage.getItem('theme') || 'light';
      document.documentElement.setAttribute('data-theme', savedTheme);
      updateIcon(savedTheme);
    });
  </script>
  </body>
</html>